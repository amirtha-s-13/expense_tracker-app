"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[786],{7872:function(e,t,i){i.d(t,{bY:function(){return l0}});class s{constructor(e,t,i){this._encode=e,this._decode=t,this._rangeCallback=i}floor(e){let t=new Date(e),i=this._encode(t);return this._decode(i)}ceil(e){let t=new Date(Number(e)-1),i=this._encode(t);return this._decode(i+1)}range(e,t,i){var s;let n=null===(s=this._rangeCallback)||void 0===s?void 0:s.call(this,e,t),r=this._encode(i?this.floor(e):this.ceil(e)),a=this._encode(i?this.ceil(t):this.floor(t));if(a<r)return[];let o=[];for(let e=r;e<=a;e++){let t=this._decode(e);o.push(t)}return null==n||n(),o}}class n extends s{getOffset(e,t){return Math.floor("number"==typeof e||e instanceof Date?this._encode(new Date(e)):0)%t}every(e,t){let i,n=0,{snapTo:r="start"}=null!=t?t:{};if("string"==typeof r){let t=n;i=(i,s)=>(n=this.getOffset("start"===r?i:s,e),()=>n=t)}else"number"==typeof r?n=this.getOffset(new Date(r),e):r instanceof Date&&(n=this.getOffset(r,e));return new s(t=>Math.floor((this._encode(t)-n)/e),t=>this._decode(t*e+n),i)}}let r=new n(function(e){return e.getTime()},function(e){return new Date(e)});new Date(0).getFullYear();let a=6e4*new Date().getTimezoneOffset(),o=new n(function(e){return Math.floor((e.getTime()-a)/1e3)},function(e){return new Date(a+1e3*e)}),l=6e4*new Date().getTimezoneOffset(),h=new n(function(e){return Math.floor((e.getTime()-l)/6e4)},function(e){return new Date(l+6e4*e)}),d=6e4*new Date().getTimezoneOffset(),u=new n(function(e){return Math.floor((e.getTime()-d)/36e5)},function(e){return new Date(d+36e5*e)}),c=new n(function(e){let t=6e4*e.getTimezoneOffset();return Math.floor((e.getTime()-t)/864e5)},function(e){let t=new Date(1970,0,1);return t.setDate(t.getDate()+e),t});function p(e){let t=new Date(2023,0,1+e).getTime();return new n(function(e){return Math.floor((e.getTime()-t)/6048e5)},function(e){let i=new Date(t);return i.setDate(i.getDate()+7*e),i})}let g=p(0);p(1),p(2),p(3),p(4),p(5),p(6);let f=new n(function(e){return 12*e.getFullYear()+e.getMonth()},function(e){let t=Math.floor(e/12);return new Date(t,e-12*t,1)}),m=new n(function(e){return e.getFullYear()},function(e){let t=new Date;return t.setFullYear(e),t.setMonth(0,1),t.setHours(0,0,0,0),t});function y(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&0>t.indexOf(s)&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var n=0,s=Object.getOwnPropertySymbols(e);n<s.length;n++)0>t.indexOf(s[n])&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(i[s[n]]=e[s[n]]);return i}function v(e,t,i,s){var n,r=arguments.length,a=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,s);else for(var o=e.length-1;o>=0;o--)(n=e[o])&&(a=(r<3?n(a):r>3?n(t,i,a):n(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a}function b(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function x(e,t,i,s){return new(i||(i=Promise))(function(n,r){function a(e){try{l(s.next(e))}catch(e){r(e)}}function o(e){try{l(s.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?n(e.value):((t=e.value)instanceof i?t:new i(function(e){e(t)})).then(a,o)}l((s=s.apply(e,t||[])).next())})}new n(function(e){return Math.floor(e.getTime()/6e4)},function(e){return new Date(6e4*e)}),new n(function(e){return Math.floor(e.getTime()/36e5)},function(e){return new Date(36e5*e)}),new n(function(e){return Math.floor(e.getTime()/864e5)},function(e){let t=new Date(0);return t.setUTCDate(t.getUTCDate()+e),t.setUTCHours(0,0,0,0),t}),new n(function(e){return 12*e.getUTCFullYear()+e.getUTCMonth()},function(e){let t=Math.floor(e/12);return new Date(Date.UTC(t,e-12*t,1))}),new n(function(e){return e.getUTCFullYear()},function(e){let t=new Date;return t.setUTCFullYear(e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0),t}),"function"==typeof SuppressedError&&SuppressedError;let S={isEnterprise:!1};class k{constructor(){this.destroyFns=[]}destroy(){for(let e of this.destroyFns)e()}}let D=[];function w(e){let t=D.find(t=>e.type===t.type&&e.optionsKey===t.optionsKey&&e.identifier===t.identifier);if(t){if("enterprise"===e.packageType&&"community"===t.packageType){let i=D.indexOf(t);D.splice(i,1,e)}}else D.push(e)}function O(){return D.some(e=>"enterprise"===e.packageType)}let M=new Map;function N(e){let{length:t}=e;if(0===t)return;let i=1/0,s=-1/0;for(let n=0;n<t;n++){let t=e[n];t instanceof Date&&(t=t.getTime()),"number"==typeof t&&(t<i&&(i=t),t>s&&(s=t))}let n=[i,s];if(!n.some(e=>!isFinite(e)))return n}function E(e,t,i){var s;let n=!1;return e.length>2&&(e=null!==(s=N(e))&&void 0!==s?s:[NaN,NaN]),isNaN(t)||(n||(n=t>e[0]),e=[t,e[1]]),isNaN(i)||(n||(n=i<e[1]),e=[e[0],i]),e[0]>e[1]&&(e=[]),{extent:e,clipped:n}}function C(e,t){if(null==e||null==t||e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(Array.isArray(e[i])&&Array.isArray(t[i])){if(!C(e[i],t[i]))return!1}else if(e[i]!==t[i])return!1;return!0}function A(e){return void 0===e?[]:Array.isArray(e)?e:[e]}let L={};function R(e,t){L[t]||(e(),L[t]=!0)}let T={log(...e){console.log(...e)},warn(e,...t){console.warn(`AG Charts - ${e}`,...t)},error(e,...t){"object"==typeof e?console.error("AG Charts error",e,...t):console.error(`AG Charts - ${e}`,...t)},table(...e){console.table(...e)},warnOnce(e,...t){R(()=>T.warn(e,...t),`Logger.warn: ${e}`)},errorOnce(e,...t){R(()=>T.error(e,...t),`Logger.warn: ${e}`)}};function I(e){let t="undefined"!=typeof window?window:void 0;return null==t?void 0:t[e]}let _=Date.now(),P=()=>{let e=Date.now()-_;if(e>2e3){let t=(Math.floor(e/100)/10).toFixed(1);T.log(`**** ${t}s since last log message ****`)}_=Date.now()},B={create:(...e)=>(...t)=>{B.check(...e)&&("function"==typeof t[0]&&(t=A(t[0]())),P(),T.log(...t))},check:(...e)=>(0===e.length&&e.push(!0),A(I("agChartsDebug")).some(t=>e.includes(t)))},F=Symbol("BREAK"),j="__decorator_config";function G(e,t){return(i,s)=>{let n=s.toString(),r=`__${n}`,{getters:a,setters:o}=function(e,t,i,s){null==Object.getOwnPropertyDescriptor(e,j)&&Object.defineProperty(e,j,{value:{}});let n=e[j];if(null!=n[i])return n[i];n[i]={setters:[],getters:[]};let r=Object.getOwnPropertyDescriptor(e,t),a=null==r?void 0:r.set,o=null==r?void 0:r.get;return Object.defineProperty(e,t,{set:function(e){var r,l;let h;let d=null!==(l=null===(r=n[i])||void 0===r?void 0:r.setters)&&void 0!==l?l:[];for(let i of(d.some(e=>e.length>2)&&(h=o?o.call(this):this[s]),d))if((e=i(this,t,e,h))===F)return;a?a.call(this,e):this[s]=e},get:function(){var e,r;let a=o?o.call(this):this[s];for(let s of null!==(r=null===(e=n[i])||void 0===e?void 0:e.getters)&&void 0!==r?r:[])if((a=s(this,t,a))===F)return;return a},enumerable:!0,configurable:!1}),n[i]}(i,s,n,r);o.push(e),t&&a.unshift(t)}}function z(e){return void 0!==e&&j in e}let W="class-instance";function Y(e,t){let i=q(e),s=q(t);if("array"===s)return"array"!==i||e.length!==t.length||t.some((t,i)=>null!=Y(null==e?void 0:e[i],t))?[...t]:null;if("primitive"===s)return"primitive"!==i?Object.assign({},t):e!==t?t:null;let n=e||{},r=t||{},a=new Set([...Object.keys(n),...Object.keys(r)]),o=0,l={};for(let e of a){if(n[e]===r[e])continue;let t=t=>{l[e]=t,o++},i=q(n[e]),s=q(r[e]);if(i!==s||"primitive"===s||null===s||"array"===s&&n[e].length!==r[e].length||s===W||"function"===s&&n[e]!==r[e]){t(r[e]);continue}let a=Y(n[e],r[e]);null!==a&&t(a)}return 0===o?null:l}let V=Symbol("<delete-property>"),$=Symbol("<unspecified-property>");function X(e,t){var i;let s=null!==(i=null==t?void 0:t.avoidDeepClone)&&void 0!==i?i:[];if(e.map(e=>q(e)).some(e=>"array"===e)){let i=e[e.length-1];return Array.isArray(i)?i.map(e=>{let i=q(e);return"array"===i?X([[],e],t):"object"===i?X([{},e],t):e}):i}let n={};for(let i of new Set(e.map(e=>null!=e?Object.keys(e):[]).reduce((e,t)=>e.concat(t),[]))){let r=e.map(e=>null!=e&&"object"==typeof e&&i in e?e[i]:$).filter(e=>e!==$);if(0===r.length)continue;let a=r[r.length-1];if(a===V)continue;let o=r.map(e=>q(e)),l=o[0];if(o.some(e=>e!==l)){n[i]=a;continue}"array"!==l&&"object"!==l||s.includes(i)?"array"===l?n[i]=[...a]:n[i]=a:n[i]=X(r,t)}return n}function H(e,t,i={}){var s,n,r;let{path:a,matcherPath:o=a?a.replace(/(\[[0-9+]+])/i,"[]"):void 0,skip:l=[],constructors:h={},constructedArrays:d=new WeakMap,allowedTypes:u={},idx:c}=i;if(null==e)throw Error(`AG Charts - target is uninitialised: ${null!=a?a:"<root>"}`);if(null==t)return e;null!=c&&"_declarationOrder"in e&&(e._declarationOrder=c);let p=q(e);for(let c in t){let g=`${o?o+".":""}${c}`;if(l.indexOf(g)>=0)continue;let f=t[c],m=`${a?a+".":""}${c}`,y=e.constructor,v=e[c],b=null!==(s=h[g])&&void 0!==s?s:h[c];try{let t=q(v),s=q(f);if(p===W&&!(c in e||Object.prototype.hasOwnProperty.call(e,c))){T.warn(`unable to set [${m}] in ${null==y?void 0:y.name} - property is unknown`);continue}let a=null!==(n=u[g])&&void 0!==n?n:[t];if(t===W&&"object"===s);else if(null!=t&&null!=s&&!a.includes(s)){T.warn(`unable to set [${m}] in ${null==y?void 0:y.name} - can't apply type of [${s}], allowed types are: [${a}]`);continue}"array"===s?(b=null!==(r=null!=b?b:d.get(v))&&void 0!==r?r:h[`${g}[]`],null!=b?e[c]=f.map((e,t)=>H(new b,e,Object.assign(Object.assign({},i),{path:m,matcherPath:g+"[]",idx:t}))):e[c]=f):s===W?e[c]=f:"object"===s?null!=v?H(v,f,Object.assign(Object.assign({},i),{path:m,matcherPath:g,idx:void 0})):null!=b?e[c]=H(new b,f,Object.assign(Object.assign({},i),{path:m,matcherPath:g,idx:void 0})):e[c]=f:e[c]=f}catch(e){T.warn(`unable to set [${m}] in [${null==y?void 0:y.name}]; nested error is: ${e.message}`)}}return e}function U(e,t,i,...s){let n=q(e),{skip:r=[]}=null!=i?i:{};if("array"===n){t(n,e,...s),e.forEach((e,n)=>{U(e,t,i,...(null!=s?s:[]).map(e=>null==e?void 0:e[n]))});return}if("object"===n)for(let a in t(n,e,...s),e){if(r.includes(a))continue;let n=e[a],o=null==s?void 0:s.map(e=>null==e?void 0:e[a]),l=q(n);("object"===l||"array"===l)&&U(n,t,i,...o)}}let K="undefined"!=typeof window;function q(e){return null==e?null:K&&e instanceof HTMLElement?"primitive":Array.isArray(e)?"array":e instanceof Date?"primitive":"object"==typeof e&&e.constructor===Object?"object":"function"==typeof e?"function":"object"==typeof e&&null!=e.constructor?W:"primitive"}let Z=2*Math.PI;function J(e){return e%=Z,e+=Z,e%=Z}function Q(e){return(e%=Z)<-Math.PI?e+=Z:e>=Math.PI&&(e-=Z),e}function ee(e){return e/180*Math.PI}function et(e,t,i){return Math.max(t,Math.min(i,e))}class ei{constructor(){this.type="band",this.cache=null,this.cacheProps=["_domain","range","_paddingInner","_paddingOuter","round","interval"],this.index=new Map,this.ordinalRange=[],this._domain=[],this.range=[0,1],this._bandwidth=1,this._rawBandwidth=1,this._paddingInner=0,this._paddingOuter=0,this.round=!1}didChange(){let{cache:e}=this;return!!(!e||this.cacheProps.some(t=>this[t]!==e[t]))&&(this.cache={},this.cacheProps.forEach(e=>this.cache[e]=this[e]),!0)}refresh(){this.didChange()&&this.update()}set domain(e){let t=[];this.index=new Map;let i=this.index;e.forEach(e=>{void 0===i.get(e)&&i.set(e,t.push(e)-1)}),this._domain=t}get domain(){return this._domain}ticks(){this.refresh();let{interval:e=1}=this,t=Math.abs(Math.round(e));return this._domain.filter((e,i)=>i%t==0)}convert(e){this.refresh();let t=this.index.get(e);if(void 0===t)return NaN;let i=this.ordinalRange[t];return void 0===i?NaN:i}invert(e){this.refresh();let t=this.ordinalRange.findIndex(t=>t===e);return this.domain[t]}get bandwidth(){return this.refresh(),this._bandwidth}get rawBandwidth(){return this.refresh(),this._rawBandwidth}set padding(e){e=et(e,0,1),this._paddingInner=e,this._paddingOuter=e}get padding(){return this._paddingInner}set paddingInner(e){this._paddingInner=et(e,0,1)}get paddingInner(){return this._paddingInner}set paddingOuter(e){this._paddingOuter=et(e,0,1)}get paddingOuter(){return this._paddingOuter}update(){let e=this._domain.length;if(0===e)return;let t=this.round,i=this._paddingInner,s=this._paddingOuter,[n,r]=this.range,a=r-n,o=a/Math.max(1,e+2*s-i),l=t?Math.floor(o):o,h=n+(a-l*(e-i))/2,d=t?Math.round(h):h,u=l*(1-i),c=[];for(let t=0;t<e;t++)c.push(d+l*t);this._bandwidth=t?Math.round(u):u,this._rawBandwidth=o*(1-i),this.ordinalRange=c}}function es(e,t,i){return Math.min(i,Math.max(e,t))}function en(e){return 0>Math.sign(e)||Object.is(e,-0)}class er{constructor(e,t,i,s=1){this.r=es(0,e||0,1),this.g=es(0,t||0,1),this.b=es(0,i||0,1),this.a=es(0,s||0,1)}static validColorString(e){return e.indexOf("#")>=0?!!er.parseHex(e):e.indexOf("rgb")>=0?!!er.stringToRgba(e):!!er.nameToHex[e.toLowerCase()]}static fromString(e){if(e.indexOf("#")>=0)return er.fromHexString(e);let t=er.nameToHex[e.toLowerCase()];if(t)return er.fromHexString(t);if(e.indexOf("rgb")>=0)return er.fromRgbaString(e);throw Error(`Invalid color string: '${e}'`)}static tryParseFromString(e){try{return er.fromString(e)}catch(t){return T.warnOnce(`invalid color string: '${e}'.`),er.fromArray([0,0,0])}}static parseHex(e){let t;switch((e=e.replace(/ /g,"").slice(1)).length){case 6:case 8:t=[];for(let i=0;i<e.length;i+=2)t.push(parseInt(`${e[i]}${e[i+1]}`,16));break;case 3:case 4:t=e.split("").map(e=>parseInt(e,16)).map(e=>e+16*e)}if((null==t?void 0:t.length)>=3&&t.every(e=>e>=0))return 3===t.length&&t.push(255),t}static fromHexString(e){let t=er.parseHex(e);if(t){let[e,i,s,n]=t;return new er(e/255,i/255,s/255,n/255)}throw Error(`Malformed hexadecimal color string: '${e}'`)}static stringToRgba(e){let[t,i]=[NaN,NaN];for(let s=0;s<e.length;s++){let n=e[s];if(t||"("!==n){if(")"===n){i=s;break}}else t=s}let s=t&&i&&e.substring(t+1,i);if(!s)return;let n=s.split(","),r=[];for(let e=0;e<n.length;e++){let t=n[e],i=parseFloat(t);if(isNaN(i))return;i=t.indexOf("%")>=0?Math.max(0,Math.min(100,i))/100:3===e?Math.max(0,Math.min(1,i)):Math.max(0,Math.min(255,i))/255,r.push(i)}return r}static fromRgbaString(e){let t=er.stringToRgba(e);if(t){if(3===t.length)return new er(t[0],t[1],t[2]);if(4===t.length)return new er(t[0],t[1],t[2],t[3])}throw Error(`Malformed rgb/rgba color string: '${e}'`)}static fromArray(e){if(4===e.length)return new er(e[0],e[1],e[2],e[3]);if(3===e.length)return new er(e[0],e[1],e[2]);throw Error("The given array should contain 3 or 4 color components (numbers).")}static fromHSB(e,t,i,s=1){let n=er.HSBtoRGB(e,t,i);return new er(n[0],n[1],n[2],s)}static fromHSL(e,t,i,s=1){let n=er.HSLtoRGB(e,t,i);return new er(n[0],n[1],n[2],s)}static padHex(e){return 1===e.length?"0"+e:e}toHexString(){let e="#"+er.padHex(Math.round(255*this.r).toString(16))+er.padHex(Math.round(255*this.g).toString(16))+er.padHex(Math.round(255*this.b).toString(16));return this.a<1&&(e+=er.padHex(Math.round(255*this.a).toString(16))),e}toRgbaString(e=3){let t=[Math.round(255*this.r),Math.round(255*this.g),Math.round(255*this.b)],i=Math.pow(10,e);return 1!==this.a?(t.push(Math.round(this.a*i)/i),`rgba(${t.join(", ")})`):`rgb(${t.join(", ")})`}toString(){return 1===this.a?this.toHexString():this.toRgbaString()}toHSB(){return er.RGBtoHSB(this.r,this.g,this.b)}static RGBtoHSL(e,t,i){let s,n;let r=Math.min(e,t,i),a=Math.max(e,t,i),o=(a+r)/2;if(a===r)s=NaN,n=0;else{let l=a-r;n=o>.5?l/(2-a-r):l/(a+r),s=(a===e?(t-i)/l+(t<i?6:0):a===t?(i-e)/l+2:(e-t)/l+4)*60}return[s,n,o]}static HSLtoRGB(e,t,i){if(0===t)return[i,i,i];let s=i<.5?i*(1+t):i+t-i*t,n=2*i-s;function r(e){return(e<0&&(e+=1),e>1&&(e-=1),e<1/6)?n+(s-n)*6*e:e<.5?s:e<2/3?n+(s-n)*(2/3-e)*6:n}return[r(e/360+1/3),r(e/360),r(e/360-1/3)]}static RGBtoHSB(e,t,i){let s=Math.min(e,t,i),n=Math.max(e,t,i),r=NaN;if(s!==n){let a=n-s,o=(n-e)/a,l=(n-t)/a,h=(n-i)/a;(r=(e===n?h-l:t===n?2+o-h:4+l-o)/6)<0&&(r+=1)}return[360*r,0!==n?(n-s)/n:0,n]}static HSBtoRGB(e,t,i){isNaN(e)&&(e=0),e=(e%360+360)%360/360;let s=0,n=0,r=0;if(0===t)s=n=r=i;else{let a=(e-Math.floor(e))*6,o=a-Math.floor(a),l=i*(1-t),h=i*(1-t*o),d=i*(1-t*(1-o));switch(a>>0){case 0:s=i,n=d,r=l;break;case 1:s=h,n=i,r=l;break;case 2:s=l,n=i,r=d;break;case 3:s=l,n=h,r=i;break;case 4:s=d,n=l,r=i;break;case 5:s=i,n=l,r=h}}return[s,n,r]}derive(e,t,i,s){let n=er.RGBtoHSB(this.r,this.g,this.b),r=n[2];0==r&&i>1&&(r=.05);let a=((n[0]+e)%360+360)%360,o=Math.max(Math.min(n[1]*t,1),0);r=Math.max(Math.min(r*i,1),0);let l=Math.max(Math.min(this.a*s,1),0),h=er.HSBtoRGB(a,o,r);return h.push(l),er.fromArray(h)}brighter(){return this.derive(0,1,1/.7,1)}darker(){return this.derive(0,1,.7,1)}static interpolate(e,t){let i=er.tryParseFromString(e),s=er.tryParseFromString(t);return e=>new er(i.r*(1-e)+s.r*e,i.g*(1-e)+s.g*e,i.b*(1-e)+s.b*e,i.a*(1-e)+s.a*e).toString()}}function ea(e){return G((t,i,s)=>{var n,r,a;if(e(s,{target:t}))return s;let o=i.toString().replace(/^_*/,""),l=null!==(r=null===(n=t.constructor)||void 0===n?void 0:n.className)&&void 0!==r?r:null===(a=t.constructor)||void 0===a?void 0:a.name;(null==l?void 0:l.length)<3&&(l=null);let h=l?`of [${l}] `:"";return e.message?T.warn(`Property [${o}] ${h}cannot be set to [${eo(s)}]; ${e.message}, ignoring.`):T.warn(`Property [${o}] ${h}cannot be set to [${eo(s)}], ignoring.`),F})}function eo(e){return"number"==typeof e&&isNaN(e)?"NaN":e===1/0?"Infinity":e===-1/0?"-Infinity":JSON.stringify(e)}function el(e,t){return e.message=t,e}er.nameToHex=Object.freeze({aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkgrey:"#A9A9A9",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",green:"#008000",greenyellow:"#ADFF2F",grey:"#808080",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",transparent:"#00000000",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"});let eh=(e,t,i)=>void 0===e||i(e,t),ed=(e,t)=>el((i,s)=>Array.isArray(i)&&(!e||i.length===e)&&(!t||i.every(e=>t(e,s))),"expecting an Array"),eu=e=>el((t,i)=>eh(t,i,ed(e)),"expecting an optional Array"),ec=(el(e=>Array.isArray(e)&&e.length>0,"expecting a non-empty Array"),(...e)=>el((t,i)=>e.every(e=>e(t,i)),e.map(e=>e.message).filter(e=>null!=e).join(" AND "))),ep=e=>null!=e&&!isNaN(e),eg=e=>el((t,i)=>!ep(t)||!ep(i.target[e])||t<i.target[e],`expected to be less than ${e}`),ef=e=>el((t,i)=>!ep(t)||!ep(i.target[e])||t>i.target[e],`expected to be greater than ${e}`),em=el(e=>"function"==typeof e,"expecting a Function"),ey=el((e,t)=>eh(e,t,em),"expecting an optional Function"),ev=el(e=>!0===e||!1===e,"expecting a Boolean"),eb=el((e,t)=>eh(e,t,ev),"expecting an optional Boolean"),ex=el(e=>"string"==typeof e,"expecting a String"),eS=el((e,t)=>eh(e,t,ex),"expecting an optional String"),ek=el(e=>e instanceof Date&&!isNaN(+e),"expecting a Date object"),eD=el((e,t)=>eh(e,t,ek),"expecting an optional Date");el(ed(void 0,ek),"expecting an Array of Date objects");let ew=eR(0),eO=((...e)=>el((t,i)=>e.some(e=>e(t,i)),e.map(e=>e.message).filter(e=>null!=e).join(" OR ")))(eD,el((e,t)=>eh(e,t,ew),"expecting an optional number")),eM="A color string can be in one of the following formats to be valid: #rgb, #rrggbb, rgb(r, g, b), rgba(r, g, b, a) or a CSS color name such as 'white', 'orange', 'cyan', etc",eN=el(e=>"string"==typeof e&&er.validColorString(e),`expecting a color String. ${eM}`),eE=el((e,t)=>eh(e,t,eN),`expecting an optional color String. ${eM}`),eC=el(ed(void 0,eN),`expecting an Array of color strings. ${eM}`),eA=el((e,t)=>eh(e,t,eC),`expecting an optional Array of color strings. ${eM}`);function eL(e="expecting a finite Number",t,i){let s=e;return void 0!==t&&void 0!==i?s+=` between ${t} and ${i} inclusive`:void 0!==t?s+=` greater than or equal to ${t}`:void 0!==i&&(s+=` less than or equal to ${i}`),s}function eR(e,t){return el(i=>"number"==typeof i&&Number.isFinite(i)&&(void 0===e||i>=e)&&(void 0===t||i<=t),eL(void 0,e,t))}function eT(e,t){return el((i,s)=>eh(i,s,eR(e,t)),eL("expecting an optional finite Number",e,t))}function eI(e,t){return el(i=>"number"==typeof i&&(isNaN(i)||Number.isFinite(i)&&(void 0===e||i>=e)&&(void 0===t||i<=t)),eL(void 0,e,t))}let e_=el(ed(void 0,eR()),"expecting an Array of numbers"),eP=el((e,t)=>eh(e,t,e_),"expecting an optional Array of numbers"),eB=el(ed(void 0,ex),"expecting an Array of strings");function eF(...e){return el(t=>"string"==typeof t&&e.indexOf(t)>=0,`expecting one of: ${e.join(", ")}`)}el((e,t)=>eh(e,t,eB),"expecting an optional Array of strings");let ej=el(ed(void 0,ev),"expecting an Array of boolean values");el((e,t)=>eh(e,t,ej),"expecting an optional Array of boolean values");let eG=["normal","bold","bolder","lighter"],ez=el(e=>"normal"===e||"italic"===e||"oblique"===e,"expecting a font style keyword such as 'normal', 'italic' or 'oblique'"),eW=el((e,t)=>eh(e,t,ez),"expecting an optional font style keyword such as 'normal', 'italic' or 'oblique'"),eY=el(e=>eG.includes(e)||"number"==typeof e&&isFinite(e),"expecting a font weight keyword such as 'normal', 'bold' or 'bolder' or a numeric value such as 100, 300 or 600"),eV=el((e,t)=>eh(e,t,eY),"expecting an optional font weight keyword such as 'normal', 'bold' or 'bolder' or a numeric value such as 100, 300 or 600"),e$=el(ed(void 0,eR(0)),"expecting an Array of numbers specifying the length in pixels of alternating dashes and gaps, for example, [6, 3] means dashes with a length of 6 pixels with gaps between of 3 pixels."),eX=el((e,t)=>eh(e,t,e$),"expecting an optional Array of numbers specifying the length in pixels of alternating dashes and gaps, for example, [6, 3] means dashes with a length of 6 pixels with gaps between of 3 pixels."),eH=["butt","round","square"],eU=el(e=>eH.includes(e),"expecting a line cap keyword such as 'butt', 'round' or 'square'");el((e,t)=>eh(e,t,eU),"expecting an optional line cap keyword such as 'butt', 'round' or 'square'");let eK=["round","bevel","miter"],eq=el(e=>eK.includes(e),"expecting a line join keyword such as 'round', 'bevel' or 'miter'");el((e,t)=>eh(e,t,eq),"expecting an optional line join keyword such as 'round', 'bevel' or 'miter'");let eZ=["top","right","bottom","left"],eJ=el(e=>eZ.includes(e),"expecting a position keyword such as 'top', 'right', 'bottom' or 'left"),eQ=["exact","nearest"],e0=el(e=>"number"==typeof e&&Number.isFinite(e)||eQ.includes(e),"expecting an interaction range of 'exact', 'nearest' or a number"),e1=["never","always","hyphenate","on-space"],e2=el(e=>e1.includes(e),"expecting a text wrap strategy keyword such as 'never', 'always', 'hyphenate', or 'on-space'"),e5=["ellipsis","hide"];el(e=>e5.includes(e),"expecting an overflow strategy keyword such as 'ellipsis', or 'hide'");let e3=["left","center","right"];el(e=>e3.includes(e),"expecting a text align keyword such as 'left', 'center', or 'right'");let e4=["top","middle","bottom"];el(e=>e4.includes(e),"expecting a text align keyword such as 'top', 'middle', or 'bottom'");let e6=["horizontal","vertical"],e8=el(e=>e6.includes(e),"expecting a direction keyword such as 'horizontal' or 'vertical'");el((e,t)=>eh(e,t,e8),"expecting an optional direction keyword such as 'horizontal' or 'vertical'"),(tB=tG||(tG={})).X="x",tB.Y="y",(tF=tz||(tz={}))[tF.NONE=0]="NONE",tF[tF.TRIVIAL=1]="TRIVIAL",tF[tF.MINOR=2]="MINOR",tF[tF.MAJOR=3]="MAJOR";let e9=function(){try{return Function("return true"),!0}catch(e){return!1}}();function e7(e){let{changeCb:t,convertor:i}=null!=e?e:{};return function(s,n){let r=`__${n}`;s[n]||(e9&&null==t&&null==i?function(e,t,i,s){let{redraw:n=tz.TRIVIAL,type:r="normal",checkDirtyOnAssignment:a=!1}=null!=s?s:{};Object.defineProperty(e,t,{set:Function("value",`
        const oldValue = this.${i};
        if (value !== oldValue) {
            this.${i} = value;
            ${"normal"===r?`this.markDirty(this, ${n});`:""}
            ${"transform"===r?`this.markDirtyTransform(${n});`:""}
            ${"path"===r?`if (!this._dirtyPath) { this._dirtyPath = true; this.markDirty(this, ${n}); }`:""}
            ${"font"===r?`if (!this._dirtyFont) { this._dirtyFont = true; this.markDirty(this, ${n}); }`:""}
        }
        ${a?`if (value != null && value._dirty > ${tz.NONE}) { this.markDirty(value, value._dirty); }`:""}
`),get:Function(`return this.${i};`),enumerable:!0,configurable:!0})}(s,n,r,e):function(e,t,i,s){let{redraw:n=tz.TRIVIAL,type:r="normal",changeCb:a,convertor:o,checkDirtyOnAssignment:l=!1}=null!=s?s:{};Object.defineProperty(e,t,{set:function(e){let t=this[i];(e=o?o(e):e)!==t&&(this[i]=e,"normal"===r&&this.markDirty(this,n),"transform"===r&&this.markDirtyTransform(n),"path"!==r||this._dirtyPath||(this._dirtyPath=!0,this.markDirty(this,n)),"font"!==r||this._dirtyFont||(this._dirtyFont=!0,this.markDirty(this,n)),a&&a(this)),l&&null!=e&&e._dirty>tz.NONE&&this.markDirty(e,e._dirty)},get:function(){return this[i]},enumerable:!0,configurable:!0})}(s,n,r,e))}}class te{constructor(){this._dirty=tz.MAJOR}markDirty(e,t=tz.TRIVIAL){this._dirty>t||(this._dirty=t)}markClean(e){this._dirty=tz.NONE}isDirty(){return this._dirty>tz.NONE}}let tt={};function ti(e){var t;let i=e.constructor,s=Object.prototype.hasOwnProperty.call(i,"className")?i.className:i.name;if(!s)throw Error(`The ${i} is missing the 'className' property.`);let n=(null!==(t=tt[s])&&void 0!==t?t:0)+1;return tt[s]=n,s+"-"+n}class ts{constructor(e,t,i,s){this.x=e,this.y=t,this.width=i,this.height=s}clone(){let{x:e,y:t,width:i,height:s}=this;return new ts(e,t,i,s)}equals(e){return this.x===e.x&&this.y===e.y&&this.width===e.width&&this.height===e.height}containsPoint(e,t){return e>=this.x&&e<=this.x+this.width&&t>=this.y&&t<=this.y+this.height}collidesBBox(e){return this.x<e.x+e.width&&this.x+this.width>e.x&&this.y<e.y+e.height&&this.y+this.height>e.y}isInfinite(){return Math.abs(this.x)===1/0||Math.abs(this.y)===1/0||Math.abs(this.width)===1/0||Math.abs(this.height)===1/0}distanceSquared(e){if(this.containsPoint(e.x,e.y))return 0;let t=e.x-Math.max(this.x,Math.min(e.x,this.x+this.width)),i=e.y-Math.max(this.y,Math.min(e.y,this.y+this.height));return t*t+i*i}static nearestBox(e,t){return function(e,t,i=1/0){let s={nearest:void 0,distanceSquared:i};for(let i of t){let t=i.distanceSquared(e);if(0===t)return{nearest:i,distanceSquared:0};t<s.distanceSquared&&(s.nearest=i,s.distanceSquared=t)}return s}(e,t)}shrink(e,t){let i=(e,t)=>{switch(e){case"top":this.y+=t;case"bottom":this.height-=t;break;case"left":this.x+=t;case"right":this.width-=t;break;case"vertical":this.y+=t,this.height-=2*t;break;case"horizontal":this.x+=t,this.width-=2*t;break;case void 0:this.x+=t,this.width-=2*t,this.y+=t,this.height-=2*t}};return"number"==typeof e?i(t,e):Object.entries(e).forEach(([e,t])=>i(e,t)),this}grow(e,t){if("number"==typeof e)this.shrink(-e,t);else{let t=Object.assign({},e);for(let e in t)t[e]*=-1;this.shrink(t)}return this}static merge(e){let t=1/0,i=1/0,s=-1/0,n=-1/0;return e.forEach(e=>{e.x<t&&(t=e.x),e.y<i&&(i=e.y),e.x+e.width>s&&(s=e.x+e.width),e.y+e.height>n&&(n=e.y+e.height)}),new ts(t,i,s-t,n-i)}}ts.zero=new ts(0,0,0,0);class tn{get e(){return[...this.elements]}constructor(e=[1,0,0,1,0,0]){this.elements=e}setElements(e){let t=this.elements;return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],this}get identity(){let e=this.elements;return 1===e[0]&&0===e[1]&&0===e[2]&&1===e[3]&&0===e[4]&&0===e[5]}AxB(e,t,i){let s=e[0]*t[0]+e[2]*t[1],n=e[1]*t[0]+e[3]*t[1],r=e[0]*t[2]+e[2]*t[3],a=e[1]*t[2]+e[3]*t[3],o=e[0]*t[4]+e[2]*t[5]+e[4],l=e[1]*t[4]+e[3]*t[5]+e[5];(i=null!=i?i:e)[0]=s,i[1]=n,i[2]=r,i[3]=a,i[4]=o,i[5]=l}multiplySelf(e){return this.AxB(this.elements,e.elements),this}multiply(e){let t=Array(6);return this.AxB(this.elements,e.elements,t),new tn(t)}preMultiplySelf(e){return this.AxB(e.elements,this.elements,this.elements),this}inverse(){let e=this.elements,t=e[0],i=e[1],s=e[2],n=e[3],r=e[4],a=e[5],o=1/(t*n-i*s);return t*=o,i*=o,s*=o,new tn([n*=o,-i,-s,t,s*a-n*r,i*r-t*a])}inverseTo(e){let t=this.elements,i=t[0],s=t[1],n=t[2],r=t[3],a=t[4],o=t[5],l=1/(i*r-s*n);return i*=l,s*=l,n*=l,r*=l,e.setElements([r,-s,-n,i,n*o-r*a,s*a-i*o]),this}invertSelf(){let e=this.elements,t=e[0],i=e[1],s=e[2],n=e[3],r=e[4],a=e[5],o=1/(t*n-i*s);return t*=o,i*=o,s*=o,n*=o,e[0]=n,e[1]=-i,e[2]=-s,e[3]=t,e[4]=s*a-n*r,e[5]=i*r-t*a,this}transformPoint(e,t){let i=this.elements;return{x:e*i[0]+t*i[2]+i[4],y:e*i[1]+t*i[3]+i[5]}}transformBBox(e,t){let i=this.elements,s=i[0],n=i[1],r=i[2],a=i[3],o=.5*e.width,l=.5*e.height,h=e.x+o,d=e.y+l,u=Math.abs(o*s)+Math.abs(l*r),c=Math.abs(o*n)+Math.abs(l*a);return t||(t=new ts(0,0,0,0)),t.x=h*s+d*r+i[4]-u,t.y=h*n+d*a+i[5]-c,t.width=u+u,t.height=c+c,t}toContext(e){if(this.identity)return;let t=this.elements;e.transform(t[0],t[1],t[2],t[3],t[4],t[5])}static flyweight(e){return tn.instance.setElements(e.elements)}static updateTransformMatrix(e,t,i,s,n,r,a){let o,l,h,d;let[u,c]=[0,0];1===t&&1===i?(o=0,l=0):(o=(null==a?void 0:a.scalingCenterX)==null?u:null==a?void 0:a.scalingCenterX,l=(null==a?void 0:a.scalingCenterY)==null?c:null==a?void 0:a.scalingCenterY);let p=Math.cos(s),g=Math.sin(s);0===s?(h=0,d=0):(h=(null==a?void 0:a.rotationCenterX)==null?u:null==a?void 0:a.rotationCenterX,d=(null==a?void 0:a.rotationCenterY)==null?c:null==a?void 0:a.rotationCenterY);let f=o*(1-t)-h,m=l*(1-i)-d;return e.setElements([p*t,g*t,-g*i,p*i,p*f-g*m+h+n,g*f+p*m+d+r]),e}static fromContext(e){let t=e.getTransform();return new tn([t.a,t.b,t.c,t.d,t.e,t.f])}}tn.instance=new tn,(tj=tW||(tW={}))[tj.All=0]="All",tj[tj.None=1]="None";let tr=e=>{e.parent&&(e.parent.dirtyZIndex=!0),e.zIndexChanged()};class ta extends te{get datum(){var e,t;return null!==(e=this._datum)&&void 0!==e?e:null===(t=this._parent)||void 0===t?void 0:t.datum}get previousDatum(){return this._previousDatum}set datum(e){this._datum!==e&&(this._previousDatum=this._datum),this._datum=e}_setLayerManager(e){for(let t of(this._layerManager=e,this._debug=null==e?void 0:e.debug,this._children))t._setLayerManager(e);for(let t of this._virtualChildren)t._setLayerManager(e)}get layerManager(){return this._layerManager}get parent(){return this._parent}get children(){if(0===this._virtualChildren.length)return this._children;let e=[...this._children];for(let t of this._virtualChildren)e.push(...t.children);return e}get virtualChildren(){return this._virtualChildren}hasVirtualChildren(){return this._virtualChildren.length>0}setProperties(e,t){for(let i of null!=t?t:Object.keys(e))this[i]=e[i];return this}append(e){for(let t of(Array.isArray(e)||(e=[e]),e)){if(t.parent)throw Error(`${t} already belongs to another parent: ${t.parent}.`);if(t.layerManager)throw Error(`${t} already belongs to a scene: ${t.layerManager}.`);if(this.childSet[t.id])throw Error(`Duplicate ${t.constructor.name} node: ${t}`);t.isVirtual?this._virtualChildren.push(t):this._children.push(t),this.childSet[t.id]=!0,t._parent=this,t._setLayerManager(this.layerManager)}this.dirtyZIndex=!0,this.markDirty(this,tz.MAJOR)}appendChild(e){return this.append(e),e}removeChild(e){let t=()=>{throw Error("The node to be removed is not a child of this node.")};if(e.parent!==this&&t(),e.isVirtual){let i=this._virtualChildren.indexOf(e);i<0&&t(),this._virtualChildren.splice(i,1)}else{let i=this._children.indexOf(e);i<0&&t(),this._children.splice(i,1)}return delete this.childSet[e.id],e._parent=void 0,e._setLayerManager(),this.dirtyZIndex=!0,this.markDirty(e,tz.MAJOR),e}calculateCumulativeMatrix(){this.computeTransformMatrix();let e=tn.flyweight(this.matrix),t=this.parent;for(;t;)t.computeTransformMatrix(),e.preMultiplySelf(t.matrix),t=t.parent;return e}transformPoint(e,t){return this.calculateCumulativeMatrix().invertSelf().transformPoint(e,t)}inverseTransformPoint(e,t){return this.calculateCumulativeMatrix().transformPoint(e,t)}transformBBox(e){return this.calculateCumulativeMatrix().invertSelf().transformBBox(e)}inverseTransformBBox(e){return this.calculateCumulativeMatrix().transformBBox(e)}markDirtyTransform(){this.dirtyTransform=!0,this.markDirty(this,tz.MAJOR)}constructor({isVirtual:e,tag:t}={}){super(),this.serialNumber=ta._nextSerialNumber++,this.id=ti(this),this.isContainerNode=!1,this._virtualChildren=[],this._children=[],this.childSet={},this.matrix=new tn,this.inverseMatrix=new tn,this.dirtyTransform=!1,this.scalingX=1,this.scalingY=1,this.scalingCenterX=null,this.scalingCenterY=null,this.rotationCenterX=null,this.rotationCenterY=null,this.rotation=0,this.translationX=0,this.translationY=0,this.visible=!0,this.dirtyZIndex=!1,this.zIndex=0,this.zIndexSubOrder=void 0,this.pointerEvents=tW.All,this.isVirtual=null!=e&&e,this.tag=null!=t?t:NaN}containsPoint(e,t){return!1}pickNode(e,t){var i;if(!this.visible||this.pointerEvents===tW.None||!this.containsPoint(e,t))return;let s=this.children;if(s.length>1e3)for(let n=s.length-1;n>=0;n--){let r=s[n],a=(null===(i=r.computeTransformedBBox())||void 0===i?void 0:i.containsPoint(e,t))?r.pickNode(e,t):void 0;if(a)return a}else if(s.length)for(let i=s.length-1;i>=0;i--){let n=s[i].pickNode(e,t);if(n)return n}else if(!this.isContainerNode)return this}findNodes(e){let t=e(this)?[this]:[];for(let i of this.children){let s=i.findNodes(e);s&&t.push(...s)}return t}computeBBox(){}computeTransformedBBox(){let e=this.computeBBox();if(!e)return;this.computeTransformMatrix();let t=tn.flyweight(this.matrix),i=this.parent;for(;i;)i.computeTransformMatrix(),t.preMultiplySelf(i.matrix),i=i.parent;return t.transformBBox(e,e),e}computeTransformMatrix(){if(!this.dirtyTransform)return;let{matrix:e,scalingX:t,scalingY:i,rotation:s,translationX:n,translationY:r,scalingCenterX:a,scalingCenterY:o,rotationCenterX:l,rotationCenterY:h}=this;tn.updateTransformMatrix(e,t,i,s,n,r,{scalingCenterX:a,scalingCenterY:o,rotationCenterX:l,rotationCenterY:h}),e.inverseTo(this.inverseMatrix),this.dirtyTransform=!1}render(e){let{stats:t}=e;this._dirty=tz.NONE,t&&t.nodesRendered++}clearBBox(e){let t=this.computeBBox();if(null==t)return;let{x:i,y:s,width:n,height:r}=t,a=this.transformPoint(i,s),o=this.transformPoint(i+n,s+r);e.clearRect(a.x,a.y,o.x-a.x,o.y-a.y)}markDirty(e,t=tz.TRIVIAL,i=t){!(this._dirty>t)&&(this._dirty!==t||t!==i)&&(this._dirty=t,this.parent?this.parent.markDirty(this,i):this.layerManager&&this.layerManager.markDirty())}get dirty(){return this._dirty}markClean(e){let{force:t=!1,recursive:i=!0}=null!=e?e:{};if(this._dirty!==tz.NONE||t){if(this._dirty=tz.NONE,!1!==i)for(let e of this._virtualChildren)e.markClean({force:t});if(!0===i)for(let e of this._children)e.markClean({force:t})}}visibilityChanged(){}get nodeCount(){let e=1,t=this._dirty>=tz.NONE||this.dirtyTransform?1:0,i=this.visible?1:0,s=s=>{let{count:n,visibleCount:r,dirtyCount:a}=s.nodeCount;e+=n,i+=r,t+=a};for(let e of this._children)s(e);for(let e of this._virtualChildren)s(e);return{count:e,visibleCount:i,dirtyCount:t}}zIndexChanged(){}}ta._nextSerialNumber=0,v([e7({type:"transform"}),b("design:type",Number)],ta.prototype,"scalingX",void 0),v([e7({type:"transform"}),b("design:type",Number)],ta.prototype,"scalingY",void 0),v([e7({type:"transform"}),b("design:type",Object)],ta.prototype,"scalingCenterX",void 0),v([e7({type:"transform"}),b("design:type",Object)],ta.prototype,"scalingCenterY",void 0),v([e7({type:"transform"}),b("design:type",Object)],ta.prototype,"rotationCenterX",void 0),v([e7({type:"transform"}),b("design:type",Object)],ta.prototype,"rotationCenterY",void 0),v([e7({type:"transform"}),b("design:type",Number)],ta.prototype,"rotation",void 0),v([e7({type:"transform"}),b("design:type",Number)],ta.prototype,"translationX",void 0),v([e7({type:"transform"}),b("design:type",Number)],ta.prototype,"translationY",void 0),v([e7({redraw:tz.MAJOR,changeCb:e=>e.visibilityChanged()}),b("design:type",Boolean)],ta.prototype,"visible",void 0),v([e7({redraw:tz.TRIVIAL,changeCb:tr}),b("design:type",Number)],ta.prototype,"zIndex",void 0),v([e7({redraw:tz.TRIVIAL,changeCb:tr}),b("design:type",Array)],ta.prototype,"zIndexSubOrder",void 0);class to extends te{constructor(){super(...arguments),this.enabled=!0,this.color="rgba(0, 0, 0, 0.5)",this.xOffset=0,this.yOffset=0,this.blur=5}}v([ea(ev),e7({redraw:tz.MAJOR}),b("design:type",Object)],to.prototype,"enabled",void 0),v([ea(eN),e7({redraw:tz.MAJOR}),b("design:type",Object)],to.prototype,"color",void 0),v([ea(eR()),e7({redraw:tz.MAJOR}),b("design:type",Object)],to.prototype,"xOffset",void 0),v([ea(eR()),e7({redraw:tz.MAJOR}),b("design:type",Object)],to.prototype,"yOffset",void 0),v([ea(eR(0)),e7({redraw:tz.MAJOR}),b("design:type",Object)],to.prototype,"blur",void 0);let tl=[/Android/i,/webOS/i,/iPhone/i,/iPad/i,/iPod/i,/BlackBerry/i,/Windows Phone/i];function th(){if("undefined"==typeof navigator)return!0;let e=navigator.userAgent;return!tl.some(t=>t.test(e))}class td{constructor(e){this._enabled=!0,this._pixelRatio=NaN,this._width=0,this._height=0;let{document:t,window:i,width:s=600,height:n=300,domLayer:r=!1,zIndex:a=0,name:o,overrideDevicePixelRatio:l}=e;this.document=t,this.window=i,td.document=t,this.element=t.createElement("canvas"),this.element.width=s,this.element.height=n,this.realContext=this.element.getContext("2d"),this.imageSource=this.realContext.canvas;let{style:h}=this.element;h.userSelect="none",h.display="block",r&&(h.position="absolute",h.zIndex=String(a),h.top="0",h.left="0",h.pointerEvents="none",h.opacity="1",o&&(this.element.id=o)),this.context=this.setPixelRatio(l),this.resize(s,n)}set container(e){this._container!==e&&(this.remove(),e&&e.appendChild(this.element),this._container=e)}get container(){return this._container}set enabled(e){this.element.style.display=e?"block":"none",this._enabled=!!e}get enabled(){return this._enabled}remove(){let{parentNode:e}=this.element;null!=e&&e.removeChild(this.element)}destroy(){this.element.remove(),this.element.width=0,this.element.height=0,this.context.clearRect(0,0,0,0),Object.freeze(this)}snapshot(){}clear(){this.context.save(),this.context.resetTransform(),this.context.clearRect(0,0,this.width,this.height),this.context.restore()}toImage(){let e=this.document.createElement("img");return e.src=this.getDataURL(),e}getDataURL(e){return this.element.toDataURL(e)}download(e,t="image/png"){e=(null!=e?e:"").trim()||"image";let i=this.getDataURL(t),s=this.document,n=s.createElement("a");n.href=i,n.download=e,n.style.display="none",s.body.appendChild(n),n.click(),s.body.removeChild(n)}get pixelRatio(){return this._pixelRatio}setPixelRatio(e){let t=null!=e?e:this.window.devicePixelRatio;return th()||(t=1),this._pixelRatio=t,td.overrideScale(this.realContext,t)}set pixelated(e){this.element.style.imageRendering=e?"pixelated":"auto"}get pixelated(){return"pixelated"===this.element.style.imageRendering}get width(){return this._width}get height(){return this._height}resize(e,t){if(!(e>0&&t>0))return;let{element:i,context:s,pixelRatio:n}=this;i.width=Math.round(e*n),i.height=Math.round(t*n),i.style.width=e+"px",i.style.height=t+"px",s.resetTransform(),this._width=e,this._height=t}static get textMeasuringContext(){if(this._textMeasuringContext)return this._textMeasuringContext;let e=this.document.createElement("canvas");return this._textMeasuringContext=e.getContext("2d"),this._textMeasuringContext}static get svgText(){if(this._svgText)return this._svgText;let e="http://www.w3.org/2000/svg",t=document.createElementNS(e,"svg");t.setAttribute("width","100"),t.setAttribute("height","100"),t.classList?t.classList.add("text-measuring-svg"):t.setAttribute("class","text-measuring-svg"),t.style.position="absolute",t.style.top="-1000px",t.style.visibility="hidden";let i=document.createElementNS(e,"text");return i.setAttribute("x","0"),i.setAttribute("y","30"),i.setAttribute("text","black"),t.appendChild(i),document.body.appendChild(t),this._svgText=i,i}static get has(){if(this._has)return this._has;let e="undefined"==typeof navigator||navigator.userAgent.indexOf("Chrome")>-1,t="undefined"!=typeof navigator&&navigator.userAgent.indexOf("Firefox")>-1,i=!e&&"undefined"!=typeof navigator&&navigator.userAgent.indexOf("Safari")>-1;return this._has=Object.freeze({textMetrics:void 0!==this.textMeasuringContext.measureText("test").actualBoundingBoxDescent&&!t&&!i,getTransform:void 0!==this.textMeasuringContext.getTransform}),this._has}static measureText(e,t,i,s){let n=this.textMeasuringContext;return n.font=t,n.textBaseline=i,n.textAlign=s,n.measureText(e)}static getTextSize(e,t){if(!this.has.textMetrics)return this.measureSvgText(e,t);{let i=this.textMeasuringContext;i.font=t;let s=i.measureText(e);return{width:s.width,height:s.actualBoundingBoxAscent+s.actualBoundingBoxDescent}}}static measureSvgText(e,t){let i=this.textSizeCache,s=i[t];if(s){let t=s[e];if(t)return t}else i[t]={};let n=this.svgText;n.style.font=t,n.textContent=e;let r=n.getBBox(),a={width:r.width,height:r.height};return i[t][e]=a,a}static overrideScale(e,t){let i=0,s={save(){this.$save(),i++},restore(){if(i>0)this.$restore(),i--;else throw Error("AG Charts - Unable to restore() past depth 0")},setTransform(e,i,s,n,r,a){"object"==typeof e?this.$setTransform(e):this.$setTransform(e*t,i*t,s*t,n*t,r*t,a*t)},resetTransform(){this.$setTransform(t,0,0,t,0,0)},verifyDepthZero(){if(0!==i)throw Error("AG Charts - Save/restore depth is non-zero: "+i)}};for(let t in s)Object.prototype.hasOwnProperty.call(s,t)&&(e["$"+t]||(e["$"+t]=e[t]),e[t]=s[t]);return e}}td.document=globalThis.document,td.textSizeCache={};class tu{constructor(){this.stops=[]}}class tc extends tu{constructor(){super(...arguments),this.angle=0}createGradient(e,t){let{stops:i,angle:s}=this,n=J(ee(s+90)),r=Math.cos(n),a=Math.sin(n),o=t.width,l=t.height,h=t.x+.5*o,d=t.y+.5*l;if(o>0&&l>0){let t=Math.sqrt(l*l+o*o)/2*Math.abs(Math.cos((n<Math.PI/2?n:n<Math.PI?Math.PI-n:n<3*Math.PI/2?n-Math.PI:2*Math.PI-n)-Math.atan2(l,o))),s=e.createLinearGradient(h+r*t,d+a*t,h-r*t,d-a*t);return i.forEach(e=>{s.addColorStop(e.offset,e.color)}),s}return"black"}}let tp=/^linear-gradient\((.*?)deg,\s*(.*?)\s*\)$/i;class tg extends ta{constructor(){super(...arguments),this.fillOpacity=1,this.strokeOpacity=1,this.fill=tg.defaultStyles.fill,this.stroke=tg.defaultStyles.stroke,this.strokeWidth=tg.defaultStyles.strokeWidth,this.lineDash=tg.defaultStyles.lineDash,this.lineDashOffset=tg.defaultStyles.lineDashOffset,this.lineCap=tg.defaultStyles.lineCap,this.lineJoin=tg.defaultStyles.lineJoin,this.opacity=tg.defaultStyles.opacity,this.fillShadow=tg.defaultStyles.fillShadow}restoreOwnStyles(){let e=this.constructor.defaultStyles,t=Object.getOwnPropertyNames(e);for(let i=0,s=t.length;i<s;i++){let s=t[i];this[s]=e[s]}}updateGradient(){let e;let{fill:t}=this;if((null==t?void 0:t.startsWith("linear-gradient"))&&(e=tp.exec(t))){let t;let i=parseFloat(e[1]),s=[],n=e[2],r=/(#[0-9a-f]+)|(rgba?\(.+?\))|([a-z]+)/gi;for(;t=r.exec(n);)s.push(t[0]);this.gradient=new tc,this.gradient.angle=i,this.gradient.stops=s.map((e,t)=>({offset:t/(s.length-1),color:e}))}else this.gradient=void 0}align(e,t){var i,s,n;let r=null!==(n=null===(s=null===(i=this.layerManager)||void 0===i?void 0:i.canvas)||void 0===s?void 0:s.pixelRatio)&&void 0!==n?n:1,a=Math.round(e*r)/r;return void 0==t?a:0===t?0:t<1?Math.ceil(t*r)/r:Math.round((t+e)*r)/r-a}fillStroke(e){this.renderFill(e),this.renderStroke(e)}renderFill(e){if(this.fill){let{globalAlpha:t}=e;this.applyFill(e),this.applyFillAlpha(e),this.applyShadow(e),e.fill(),e.globalAlpha=t}e.shadowColor="rgba(0, 0, 0, 0)"}applyFill(e){this.gradient?e.fillStyle=this.gradient.createGradient(e,this.computeBBox()):e.fillStyle=this.fill}applyFillAlpha(e){let{globalAlpha:t}=e;e.globalAlpha=t*this.opacity*this.fillOpacity}applyShadow(e){var t,i;let s=null!==(i=null===(t=this.layerManager)||void 0===t?void 0:t.canvas.pixelRatio)&&void 0!==i?i:1,n=this.fillShadow;(null==n?void 0:n.enabled)&&(e.shadowColor=n.color,e.shadowOffsetX=n.xOffset*s,e.shadowOffsetY=n.yOffset*s,e.shadowBlur=n.blur*s)}renderStroke(e){if(this.stroke&&this.strokeWidth){let{globalAlpha:t}=e;e.strokeStyle=this.stroke,e.globalAlpha=t*this.opacity*this.strokeOpacity,e.lineWidth=this.strokeWidth,this.lineDash&&e.setLineDash(this.lineDash),this.lineDashOffset&&(e.lineDashOffset=this.lineDashOffset),this.lineCap&&(e.lineCap=this.lineCap),this.lineJoin&&(e.lineJoin=this.lineJoin),e.stroke(),e.globalAlpha=t}}containsPoint(e,t){return this.isPointInPath(e,t)}}function tf(e){let{redraw:t=tz.MAJOR,changeCb:i}=null!=e?e:{};return e7({redraw:t,type:"font",changeCb:i})}tg.defaultStyles=Object.assign({},{fill:"black",stroke:void 0,strokeWidth:0,lineDash:void 0,lineDashOffset:0,lineCap:void 0,lineJoin:void 0,opacity:1,fillShadow:void 0}),v([e7({redraw:tz.MINOR}),b("design:type",Number)],tg.prototype,"fillOpacity",void 0),v([e7({redraw:tz.MINOR}),b("design:type",Number)],tg.prototype,"strokeOpacity",void 0),v([e7({redraw:tz.MINOR,changeCb:e=>e.updateGradient()}),b("design:type",Object)],tg.prototype,"fill",void 0),v([e7({redraw:tz.MINOR}),b("design:type",Object)],tg.prototype,"stroke",void 0),v([e7({redraw:tz.MINOR}),b("design:type",Number)],tg.prototype,"strokeWidth",void 0),v([e7({redraw:tz.MINOR}),b("design:type",Object)],tg.prototype,"lineDash",void 0),v([e7({redraw:tz.MINOR}),b("design:type",Number)],tg.prototype,"lineDashOffset",void 0),v([e7({redraw:tz.MINOR}),b("design:type",String)],tg.prototype,"lineCap",void 0),v([e7({redraw:tz.MINOR}),b("design:type",String)],tg.prototype,"lineJoin",void 0),v([e7({redraw:tz.MINOR,convertor:e=>Math.min(1,Math.max(0,e))}),b("design:type",Number)],tg.prototype,"opacity",void 0),v([e7({redraw:tz.MINOR,checkDirtyOnAssignment:!0}),b("design:type",Object)],tg.prototype,"fillShadow",void 0);class tm extends tg{constructor(){super(...arguments),this.x=0,this.y=0,this.lines=[],this.text=void 0,this._dirtyFont=!0,this.fontSize=10,this.fontFamily="sans-serif",this.textAlign=tm.defaultStyles.textAlign,this.textBaseline=tm.defaultStyles.textBaseline,this.lineHeight=void 0}_setLines(){this.lines=tS(this.text)}get font(){return(null==this._font||this._dirtyFont)&&(this._dirtyFont=!1,this._font=ty(this)),this._font}computeBBox(){return td.has.textMetrics?tv(this.lines,this.x,this.y,this):tb(this.lines,this.x,this.y,this)}getLineHeight(e){var t,i;if(this.lineHeight)return this.lineHeight;if(td.has.textMetrics){let s=td.measureText(e,this.font,this.textBaseline,this.textAlign);return(null!==(t=s.fontBoundingBoxAscent)&&void 0!==t?t:s.emHeightAscent)+(null!==(i=s.fontBoundingBoxDescent)&&void 0!==i?i:s.emHeightDescent)}return td.getTextSize(e,this.font).height}isPointInPath(e,t){let i=this.transformPoint(e,t),s=this.computeBBox();return!!s&&s.containsPoint(i.x,i.y)}render(e){let{ctx:t,forceRender:i,stats:s}=e;if(this.dirty===tz.NONE&&!i||!this.lines.length||!this.layerManager){s&&(s.nodesSkipped+=this.nodeCount.count);return}this.computeTransformMatrix(),this.matrix.toContext(t);let{fill:n,stroke:r,strokeWidth:a}=this;t.font=this.font,t.textAlign=this.textAlign,t.textBaseline=this.textBaseline;let o=this.layerManager.canvas.pixelRatio||1,{globalAlpha:l}=t;if(n){t.fillStyle=n,t.globalAlpha=l*this.opacity*this.fillOpacity;let{fillShadow:e}=this;(null==e?void 0:e.enabled)&&(t.shadowColor=e.color,t.shadowOffsetX=e.xOffset*o,t.shadowOffsetY=e.yOffset*o,t.shadowBlur=e.blur*o),this.renderLines((e,i,s)=>t.fillText(e,i,s))}if(r&&a){t.strokeStyle=r,t.lineWidth=a,t.globalAlpha=l*this.opacity*this.strokeOpacity;let{lineDash:e,lineDashOffset:i,lineCap:s,lineJoin:n}=this;e&&t.setLineDash(e),i&&(t.lineDashOffset=i),s&&(t.lineCap=s),n&&(t.lineJoin=n),this.renderLines((e,i,s)=>t.strokeText(e,i,s))}super.render(e)}renderLines(e){let{lines:t,x:i,y:s}=this,n=this.lines.map(e=>this.getLineHeight(e)),r=-(n.reduce((e,t)=>e+t,0)-n[0])*tx(this.textBaseline);for(let a=0;a<t.length;a++)e(t[a],i,s+r),r+=n[a]}static wrap(e,t,i,s,n,r="ellipsis"){var a;let o="hide"!==r,l=function(e){let t=new Map,i=t=>td.getTextSize(t,e);return{size:i,width:e=>{if(t.has(e))return t.get(e);let{width:s}=i(e);return t.set(e,s),s}}}(ty(s)),h=e.split(/\r?\n/g);if(0===h.length)return"";if("never"===n)return null!==(a=tm.truncateLine(h[0],t,l,o?"auto":"never"))&&void 0!==a?a:"";let d=[],u=0;for(let e of h){let r=tm.wrapLine(e,t,i,l,s,n,u,o);if(null==r)return"";if(d.push(r.result),u=r.cumulativeHeight,r.truncated)break}return d.join("\n").trim()}static wrapLine(e,t,i,s,n,r,a,o){if(!(e=e.trim()))return{result:"",truncated:!1,cumulativeHeight:a};let l=s.size(e);if(l.width<=t)return{result:e,truncated:!1,cumulativeHeight:a+l.height};if(l.height>i||s.width("W")>t)return o?{result:"",truncated:!0,cumulativeHeight:a}:void 0;let h=e.split(/\s+/g),d=tm.wrapLineSequentially(h,t,i,s,n,r,a,o);if(null==d)return;a=d.cumulativeHeight;let{lines:u}=d;if(!(d.wordsBrokenOrTruncated||d.linesTruncated)){let e=d.lines.length,i=tm.wrapLineBalanced(h,t,s,e);i.length===u.length&&(u=i)}return{result:u.map(e=>e.join(" ")).join("\n"),truncated:d.linesTruncated,cumulativeHeight:a}}static breakWord(e,t,i,s,n){let r=t=>tm.punctuationMarks.includes(e[t]),a=s?n.width("-"):0,o=[],l=0,h=0;for(let s=0;s<e.length;s++){let r=e[s],d=n.width(r);l+d+a>(0===h?t:i)&&(o.push(s),l=0,h++),l+=d}let d=[],u=0;for(let t of o){let i=e.substring(u,t);s&&i.length>0&&!r(t-1)&&!r(t)&&(i+="-"),d.push(i),u=t}return d.push(e.substring(u)),d}static truncateLine(e,t,i,s){e=e.trimEnd();let n=i.width(e);if(n>t&&"never"===s)return;if(n<=t&&"force"!==s)return e;let r=i.width(""),a=e,o=n;for(;a.length>0&&o+r>t;)a=a.slice(0,-1).trimEnd(),o=i.width(a);return o+r<=t?`${a}`:void 0}static wrapLineSequentially(e,t,i,s,n,r,a,o){let{fontSize:l=0,lineHeight:h=l*tm.defaultLineHeightRatio}=n,d="always"===r||"hyphenate"===r,u="hyphenate"===r,c=s.width(" "),p=!1,g=!1,f=[],m=[],y=0,v=()=>({lines:f,linesTruncated:g,wordsBrokenOrTruncated:p,cumulativeHeight:a}),b=()=>{if(!o)return;let e=m.join(" "),i=tm.truncateLine(e,t,s,"force");if(null!=i)return m.splice(0,m.length,i),g=!0,v()},x=()=>{let e=a+h;return!(e>=i)&&(m=[],y=0,a=e,f.push(m),!0)};if(!x())return b();for(let i=0;i<e.length;i++){let n=e[i],r=s.width(n),a=0===m.length?0:c,l=y+a+r;if(l<=t){m.push(n),y=l;continue}if(r<=t){if(!x())return b();m.push(n),y=r;continue}if(p=!0,d){let e=t-y-a,i=tm.breakWord(n,e,t,u,s);for(let e=0;e<i.length;e++){let t=i[e];if(t&&m.push(t),e===i.length-1)y=s.width(t);else if(!x())return b()}}else{if(!o)return;if(!x())return b();let r=tm.truncateLine(n,t,s,"force");if(null==r)return;m.push(r),i<e.length-1&&(g=!0);break}}return v()}static wrapLineBalanced(e,t,i,s){let n=e.reduce((e,t)=>e+i.width(t),0),r=i.width(" "),a=(n+r*(e.length-s-2))/s,o=[],l=[],h=i.width(e[0]),d=!0;for(let s of e){let e=i.width(s);if(d){(l=[]).push(s),h=e,d=!1,o.push(l);continue}let n=h+r+e;n<=a?(l.push(s),h=n):n<=t?(l.push(s),d=!0):(l=[s],h=e,o.push(l))}return o}setFont(e){this.fontFamily=e.fontFamily,this.fontSize=e.fontSize,this.fontStyle=e.fontStyle,this.fontWeight=e.fontWeight}setAlign(e){this.textAlign=e.textAlign,this.textBaseline=e.textBaseline}}function ty(e){let{fontFamily:t,fontSize:i,fontStyle:s,fontWeight:n}=e;return[null!=s?s:"",null!=n?n:"",i+"px",t].join(" ").trim()}function tv(e,t,i,s){var n,r;let a=0,o=0,l=0,h=0,d=0,u=ty(s),{lineHeight:c,textBaseline:p=tm.defaultStyles.textBaseline,textAlign:g=tm.defaultStyles.textAlign}=s;for(let t=0;t<e.length;t++){let i=td.measureText(e[t],u,p,g);a=Math.max(a,i.actualBoundingBoxLeft),l=Math.max(l,i.width),0==t?(o+=i.actualBoundingBoxAscent,h+=i.actualBoundingBoxAscent):d+=null!==(n=i.fontBoundingBoxAscent)&&void 0!==n?n:i.emHeightAscent,t==e.length-1?h+=i.actualBoundingBoxDescent:d+=null!==(r=i.fontBoundingBoxDescent)&&void 0!==r?r:i.emHeightDescent}return void 0!==c&&(d=(e.length-1)*c),h+=d,new ts(t-a,i-(o+=d*tx(p)),l,h)}function tb(e,t,i,s){let n=0,r=0,a=0,o=ty(s),{lineHeight:l,textBaseline:h=tm.defaultStyles.textBaseline,textAlign:d=tm.defaultStyles.textAlign}=s;if(e.length>0){let t=td.getTextSize(e[0],o);n=t.width,r=t.height}for(let t=1;t<e.length;t++){let i=td.getTextSize(e[t],o);n=Math.max(n,i.width),a+=null!=l?l:i.height}switch(d){case"end":case"right":t-=n;break;case"center":t-=n/2}switch(h){case"alphabetic":i-=.7*r+.5*a;break;case"middle":i-=.45*r+.5*a;break;case"ideographic":case"bottom":i-=r+a;break;case"hanging":i-=.2*r+.5*a}return new ts(t,i,n,r+a)}function tx(e){switch(e){case"top":case"hanging":return 0;case"bottom":case"alphabetic":case"ideographic":return 1;case"middle":return .5}}function tS(e){return"string"==typeof e?e.split(/\r?\n/g):[]}function tk(e,t){return G((i,s,n)=>(i[e][null!=t?t:s]=n,n))}function tD(e){let{newValue:t,oldValue:i,changeValue:s}=e;return G((e,n,r,a)=>(r!==a&&(void 0!==a&&(null==i||i.call(e,a)),void 0!==r&&(null==t||t.call(e,r)),null==s||s.call(e,r,a)),r))}tm.className="Text",tm.defaultLineHeightRatio=1.15,tm.defaultStyles=Object.assign({},tg.defaultStyles,{textAlign:"start",fontStyle:void 0,fontWeight:void 0,fontSize:10,fontFamily:"sans-serif",textBaseline:"alphabetic"}),tm.ellipsis="",tm.punctuationMarks=[".",",","-",":",";","!","?","'",'"',"(",")"],v([e7({redraw:tz.MAJOR}),b("design:type",Number)],tm.prototype,"x",void 0),v([e7({redraw:tz.MAJOR}),b("design:type",Number)],tm.prototype,"y",void 0),v([e7({redraw:tz.MAJOR,changeCb:e=>e._setLines()}),b("design:type",String)],tm.prototype,"text",void 0),v([tf(),b("design:type",String)],tm.prototype,"fontStyle",void 0),v([tf(),b("design:type",String)],tm.prototype,"fontWeight",void 0),v([tf(),b("design:type",Number)],tm.prototype,"fontSize",void 0),v([tf(),b("design:type",String)],tm.prototype,"fontFamily",void 0),v([e7({redraw:tz.MAJOR}),b("design:type",String)],tm.prototype,"textAlign",void 0),v([e7({redraw:tz.MAJOR}),b("design:type",String)],tm.prototype,"textBaseline",void 0),v([e7({redraw:tz.MAJOR}),b("design:type",Number)],tm.prototype,"lineHeight",void 0);class tw{constructor(){this.node=new tm,this.enabled=!1,this.text=void 0,this.fontSize=10,this.fontFamily="sans-serif",this.maxWidth=void 0,this.maxHeight=void 0,this.wrapping="always";let e=this.node;e.textAlign="center",e.pointerEvents=tW.None}computeTextWrap(e,t){var i,s;let{text:n,wrapping:r}=this,a=Math.min(null!==(i=this.maxWidth)&&void 0!==i?i:1/0,e),o=null!==(s=this.maxHeight)&&void 0!==s?s:t;if(!isFinite(a)&&!isFinite(o)){this.node.text=n;return}let l=tm.wrap(null!=n?n:"",a,o,this,r);this.node.text=l}}tw.SMALL_PADDING=10,tw.LARGE_PADDING=20,v([ea(ev),b("design:type",Object)],tw.prototype,"enabled",void 0),v([ea(eS),tk("node"),b("design:type",String)],tw.prototype,"text",void 0),v([ea(eW),tk("node"),b("design:type",Object)],tw.prototype,"fontStyle",void 0),v([ea(eV),tk("node"),b("design:type",Object)],tw.prototype,"fontWeight",void 0),v([ea(eR(0)),tk("node"),b("design:type",Number)],tw.prototype,"fontSize",void 0),v([ea(ex),tk("node"),b("design:type",String)],tw.prototype,"fontFamily",void 0),v([ea(eE),tk("node","fill"),b("design:type",Object)],tw.prototype,"color",void 0),v([ea(eT(0)),b("design:type",Number)],tw.prototype,"spacing",void 0),v([ea(eT(0)),b("design:type",Number)],tw.prototype,"lineHeight",void 0),v([ea(eT(0)),b("design:type",Number)],tw.prototype,"maxWidth",void 0),v([ea(eT(0)),b("design:type",Number)],tw.prototype,"maxHeight",void 0),v([ea(e2),b("design:type",String)],tw.prototype,"wrapping",void 0);class tO{constructor(){this.enabled=!1,this.text=void 0,this.spacing=tw.SMALL_PADDING,this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=10,this.fontFamily="sans-serif",this.wrapping="always",this.formatter=void 0}}function tM(e,t){let i={};if(Array.isArray(t))for(let s=0;s<e.length;s++)i[`${e[s]}`]=t[s];else for(let s=0;s<e.length;s++)i[`${e[s]}`]=t;return i}function tN(e,t){return i=>Number(e)*(1-i)+Number(t)*i}v([ea(ev),b("design:type",Object)],tO.prototype,"enabled",void 0),v([ea(eS),b("design:type",String)],tO.prototype,"text",void 0),v([ea(eT(0)),b("design:type",Number)],tO.prototype,"spacing",void 0),v([ea(eW),b("design:type",String)],tO.prototype,"fontStyle",void 0),v([ea(eV),b("design:type",String)],tO.prototype,"fontWeight",void 0),v([ea(eR(0)),b("design:type",Number)],tO.prototype,"fontSize",void 0),v([ea(ex),b("design:type",String)],tO.prototype,"fontFamily",void 0),v([ea(eE),b("design:type",String)],tO.prototype,"color",void 0),v([ea(e2),b("design:type",String)],tO.prototype,"wrapping",void 0),v([ea(ey),b("design:type",Function)],tO.prototype,"formatter",void 0);let tE=e=>e,tC=e=>Math.sin(e*Math.PI/2),tA=e=>-(Math.cos(e*Math.PI)-1)/2,tL={animationDuration:.2,animationDelay:1};function tR(e){return e.every(e=>e instanceof ta)}(t3=tY||(tY={})).Loop="loop",t3.Reverse="reverse";class tT{constructor(e){var t,i,s,n,r,a,o,l,h,d;this.elapsed=0,this.iteration=0,this.isPlaying=!1,this.isReverse=!1,this.id=e.id,this.groupId=e.groupId,this.autoplay=null===(t=e.autoplay)||void 0===t||t,this.delay=null!==(i=e.delay)&&void 0!==i?i:0,this.duration=null!==(s=e.duration)&&void 0!==s?s:1e3,this.ease=null!==(n=e.ease)&&void 0!==n?n:tE,this.repeat=null!==(r=e.repeat)&&void 0!==r?r:0,this.repeatType=null!==(a=e.repeatType)&&void 0!==a?a:tY.Loop,this.onComplete=e.onComplete,this.onPlay=e.onPlay,this.onStop=e.onStop,this.onRepeat=e.onRepeat,this.onUpdate=e.onUpdate,this.interpolate=this.createInterpolator(e.from,e.to),!0===e.skip?(null===(o=this.onUpdate)||void 0===o||o.call(this,e.to,!1,this),null===(l=this.onStop)||void 0===l||l.call(this,this),null===(h=this.onComplete)||void 0===h||h.call(this,this)):this.autoplay&&(this.play(),null===(d=this.onUpdate)||void 0===d||d.call(this,e.from,!0,this))}play(){var e;return this.isPlaying||(this.isPlaying=!0,null===(e=this.onPlay)||void 0===e||e.call(this,this)),this}pause(){return this.isPlaying&&(this.isPlaying=!1),this}stop(){var e;return this.isPlaying&&(this.isPlaying=!1,null===(e=this.onStop)||void 0===e||e.call(this,this)),this}reset(e){let t=this.interpolate(this.isReverse?1-this.delta:this.delta);return this.interpolate=this.createInterpolator(t,e.to),this.elapsed=0,this.iteration=0,"number"==typeof e.delay&&(this.delay=e.delay),"number"==typeof e.duration&&(this.duration=e.duration),"function"==typeof e.ease&&(this.ease=e.ease),this}update(e){var t,i,s;if(this.elapsed+=e,this.elapsed<=this.delay)return this;let n=this.interpolate(this.isReverse?1-this.delta:this.delta);return null===(t=this.onUpdate)||void 0===t||t.call(this,n,!1,this),this.elapsed-this.delay>=this.duration&&(this.iteration<this.repeat?(this.iteration++,this.elapsed=(this.elapsed-this.delay)%this.duration+this.delay,this.repeatType===tY.Reverse&&(this.isReverse=!this.isReverse),null===(i=this.onRepeat)||void 0===i||i.call(this,this)):(this.stop(),null===(s=this.onComplete)||void 0===s||s.call(this,this))),this}get delta(){return this.ease(es(0,(this.elapsed-this.delay)/this.duration,1))}createInterpolator(e,t){if("object"!=typeof t)return this.interpolateValue(e,t);let i=Object.keys(t).map(i=>[i,this.interpolateValue(e[i],t[i])]);return e=>{let t={};for(let[s,n]of i)t[s]=n(e);return t}}interpolateValue(e,t){try{switch(typeof e){case"number":return tN(e,t);case"string":return function(e,t){if("string"==typeof e)try{e=er.fromString(e)}catch(t){e=er.fromArray([0,0,0])}if("string"==typeof t)try{t=er.fromString(t)}catch(e){t=er.fromArray([0,0,0])}let i=tN(e.r,t.r),s=tN(e.g,t.g),n=tN(e.b,t.b),r=tN(e.a,t.a);return e=>er.fromArray([i(e),s(e),n(e),r(e)]).toRgbaString()}(e,t)}}catch(e){}throw Error(`Unable to interpolate values: ${e}, ${t}`)}}let tI={added:{animationDuration:.25,animationDelay:.75},updated:{animationDuration:.5,animationDelay:.25},removed:{animationDuration:.25,animationDelay:0},unknown:{animationDuration:1,animationDelay:0}};function t_(e,t,i,s,n,r,a){let{defaultDuration:o}=i,{fromFn:l,toFn:h,intermediateFn:d}=n,u=tR(s),c=u?s:[],p=u?[]:s,g={added:{},removed:{}};r&&a&&(g.added=tM(a.added,!0),g.removed=tM(a.removed,!0));let f=(s,n)=>{var u,c;let p;let f=0,m=0;for(let v of n){let b=s[f]===v,x={last:m>=n.length-1,lastLive:f>=s.length-1,prev:n[m-1],prevFromProps:p,prevLive:s[f-1],next:n[m+1],nextLive:s[f+(b?1:0)]},S=`${e}_${t}_${v.id}`;i.stopByAnimationId(S);let k="unknown";b?r&&a&&(k=function(e,t,i,s){let n=i(e,t);return s.added[n]?"added":s.removed[n]?"removed":"updated"}(v,v.datum,r,g)):k="removed";let D=l(v,v.datum,k,x),{animationDelay:w,animationDuration:O,start:M={},finish:N={}}=D,E=y(D,["animationDelay","animationDuration","start","finish"]),C=h(v,v.datum,k,x),{animationDelay:A,animationDuration:L,start:R={},finish:T={}}=C,I=y(C,["animationDelay","animationDuration","start","finish"]);i.animate({id:S,groupId:e,from:E,to:I,ease:tC,onPlay:()=>{v.setProperties(Object.assign(Object.assign({},M),R))},onUpdate(e){v.setProperties(e),d&&v.setProperties(d(v,v.datum,k,x))},onStop:()=>{v.setProperties(Object.assign(Object.assign(Object.assign({},I),N),T))},duration:(null!==(u=null!=O?O:L)&&void 0!==u?u:1)*o,delay:(null!==(c=null!=w?w:A)&&void 0!==c?c:0)*o}),b&&f++,m++,p=E}},m=0;for(let s of p){let n=s.nodes();f(n.filter(e=>!s.isGarbage(e)),n),i.animate({id:`${e}_${t}_selection_${m}`,groupId:e,from:0,to:1,ease:tC,onStop(){s.cleanup()}}),m++}f(c,c)}function tP(e,t,i,s,n,r,a={}){let o=tR(s),l=o?s:[],h=o?[]:s,{animationDelay:d=0,animationDuration:u=1,start:c={},finish:p={}}=a,{defaultDuration:g}=i;i.animate({id:`${e}_${t}`,groupId:e,from:n,to:r,ease:tC,onPlay:()=>{for(let e of l)e.setProperties(c);for(let e of h)for(let t of e.nodes())t.setProperties(c)},onUpdate(e){for(let t of l)t.setProperties(e);for(let t of h)for(let i of t.nodes())i.setProperties(e)},onStop:()=>{for(let e of l)e.setProperties(Object.assign(Object.assign({},r),p));for(let e of h)for(let t of e.nodes())t.setProperties(Object.assign(Object.assign({},r),p))},duration:u*g,delay:d*g})}var tB,tF,tj,tG,tz,tW,tY,tV,t$,tX,tH,tU,tK,tq,tZ,tJ,tQ,t0,t1,t2,t5,t3,t4,t6,t8,t9,t7,ie,it,ii,is,ir,ia,io,il,ih,id=Object.freeze({__proto__:null,NODE_UPDATE_PHASES:["removed","updated","added"],FROM_TO_MIXINS:tI,fromToMotion:t_,staticFromToMotion:tP});let iu=e=>`(${e})`,ic=e=>`${iu(e)}?`,ip=e=>ic(`?:${e}`),ig=RegExp(["^",ip(`${ic(".")}${iu("[<>=^]")}`),ic("[+\\-( ]"),ic("[$\xa3\xa5#]"),ic("0"),ic("\\d+"),ic(","),ip(`\\.${iu("\\d+")}`),ic("~"),ic("[%a-z]"),"$"].join(""),"i"),im=new RegExp(["^",iu(".*?"),`#\\{${iu(".+?")}\\}`,iu(".*?"),"$"].join(""));function iy(e){let t,i;let s=im.exec(e);s&&([,t,e,i]=s);let n=ig.exec(e);if(!n)throw Error(`The number formatter is invalid: ${e}`);let[,r,a,o,l,h,d,u,c,p,g]=n;return{fill:r,align:a,sign:o,symbol:l,zero:h,width:parseInt(d),comma:u,precision:parseInt(c),trim:!!p,type:g,prefix:t,suffix:i}}function iv(e){let t,i;let s="string"==typeof e?iy(e):e,{fill:n,align:r,sign:a="-",symbol:o,zero:l,width:h,comma:d,type:u,prefix:c="",suffix:p="",precision:g}=s,{trim:f}=s,m=void 0===g||isNaN(g);if(u){if(u in iS&&u in ix)t=m?ix[u]:iS[u];else if(u in iS)t=iS[u];else if(u in ix)t=ix[u];else throw Error(`The number formatter type is invalid: ${u}`)}else t=iS.g,f=!0;return i=null==g||m?u?6:12:g,e=>{let s=t(e,i);return f&&(s=s.replace(/\.0+$/,"").replace(/(\.[1-9])0+$/,"$1")),d&&(s=function(e,t){let i=e.indexOf(".");i<0&&(i=e.length);let s=e.substring(0,i).split(""),n=e.substring(i);for(let e=s.length-3;e>0;e-=3)s.splice(e,0,t);return`${s.join("")}${n}`}(s,d)),s=function(e,t,i=""){return"("===i?e>=0?t:`(${t})`:`${e>=0?"+"===i?"+":"":""}${t}`}(e,s,a),o&&"#"!==o&&(s=`${o}${s}`),"#"===o&&"x"===u&&(s=`0x${s}`),"s"===u&&(s=`${s}${iO[ik(e)]}`),("%"===u||"p"===u)&&(s=`${s}%`),null==h||isNaN(h)||(s=function(e,t,i=" ",s=">"){let n=e;if(">"!==s&&s){if("<"===s)n=n.padEnd(t,i);else if("^"===s){let e=Math.max(0,t-n.length);n=(n=n.padStart(Math.ceil(e/2)+n.length,i)).padEnd(Math.floor(e/2)+n.length,i)}}else n=n.padStart(t,i);return n}(s,h,null!=n?n:l,r)),s=`${c}${s}${p}`}}let ib=e=>Math.floor(Math.abs(e)),ix={b:e=>ib(e).toString(2),c:e=>String.fromCharCode(e),d:e=>Math.round(Math.abs(e)).toFixed(0),o:e=>ib(e).toString(8),x:e=>ib(e).toString(16),X:e=>ix.x(e).toUpperCase(),n:e=>ix.d(e),"%":e=>`${ib(100*e).toFixed(0)}`},iS={e:(e,t)=>Math.abs(e).toExponential(t),E:(e,t)=>iS.e(e,t).toUpperCase(),f:(e,t)=>Math.abs(e).toFixed(t),F:(e,t)=>iS.f(e,t).toUpperCase(),g:(e,t)=>{if(0===e)return"0";let i=Math.abs(e),s=Math.floor(Math.log10(i));return s>=-4&&s<t?i.toFixed(t-1-s):i.toExponential(t-1)},G:(e,t)=>iS.g(e,t).toUpperCase(),n:(e,t)=>iS.g(e,t),p:(e,t)=>iS.r(100*e,t),r:(e,t)=>{if(0===e)return"0";let i=Math.abs(e),s=Math.floor(Math.log10(i))-(t-1);if(s<=0)return i.toFixed(-s);let n=Math.pow(10,s);return(Math.round(i/n)*n).toFixed()},s:(e,t)=>{let i=ik(e);return iS.r(e/Math.pow(10,i),t)},"%":(e,t)=>iS.f(100*e,t)};function ik(e){return Math.max(iD,Math.min(iw,3*Math.floor(Math.log10(Math.abs(e))/3)))}let iD=-24,iw=24,iO={[-24]:"y",[-21]:"z",[-18]:"a",[-15]:"f",[-12]:"p",[-9]:"n",[-6]:"\xb5",[-3]:"m",0:"",3:"k",6:"M",9:"G",12:"T",15:"P",18:"E",21:"Z",24:"Y"};function iM(e,t,i,s,n){if(i<2)return iA(e,t,t-e);let r=iE(e,t,i,s,n);return isNaN(r)?new iC(0):iA(e=Math.ceil(e/r)*r,t=Math.floor(t/r)*r,r)}let iN=[1,2,5,10];function iE(e,t,i,s=0,n=1/0){let r=Math.pow(10,Math.floor(Math.log10((t-e)/i))),a=iN.map(a=>{let o=Math.ceil((t-e)/(a*r));return{multiplier:a,isWithinBounds:o>=s&&o<=n,diffCount:Math.abs(o-i)}}).sort((e,t)=>e.isWithinBounds!==t.isWithinBounds?e.isWithinBounds?-1:1:e.diffCount-t.diffCount)[0].multiplier;return!a||isNaN(a)?NaN:a*r}class iC extends Array{constructor(e,t){if(super(),t)for(let e=0,i=t.length;e<i;e++)this[e]=t[e];this.fractionDigits=e}}function iA(e,t,i){let s=(e=>{var t,i;let s=e.split("e");return Math.max((null!==(i=null===(t=s[0].split(".")[1])||void 0===t?void 0:t.length)&&void 0!==i?i:0)-Number(s[1]),0)})((i%1).toExponential()),n=Math.pow(10,s),r=Math.ceil((t-e)/i),a=new iC(s);for(let t=0;t<=r;t++){let s=e+i*t;a.push(Math.round(s*n)/n)}return a}class iL{static is(e){return e instanceof iL}constructor(e,t){this.domain=e,this.range=t,this.nice=!1,this.tickCount=iL.defaultTickCount,this.minTickCount=0,this.maxTickCount=1/0,this.niceDomain=[],this.defaultClampMode="raw",this.cache=null,this.cacheProps=["domain","range","nice","tickCount","minTickCount","maxTickCount"]}transform(e){return e}transformInvert(e){return e}calcBandwidth(e=1){let t=this.getDomain(),i=Math.max(...this.range);return i/Math.max(1,Math.min((t[1]-t[0])/e+1,Math.floor(i)))}fromDomain(e){return"number"==typeof e?e:e instanceof Date?e.getTime():NaN}getDomain(){return this.nice&&(this.refresh(),this.niceDomain.length)?this.niceDomain:this.domain}convert(e,t){var i;let s=null!==(i=null==t?void 0:t.clampMode)&&void 0!==i?i:this.defaultClampMode;if(!this.domain||this.domain.length<2)return NaN;this.refresh();let[n,r]=this.getDomain().map(e=>this.transform(e)),{range:a}=this,[o,l]=a;if(e=this.transform(e),"clamped"===s){if(e<n)return o;if(e>r)return l}return n===r?(o+l)/2:e===n?o:e===r?l:o+(this.fromDomain(e)-this.fromDomain(n))/(this.fromDomain(r)-this.fromDomain(n))*(l-o)}invert(e){let t;this.refresh();let[i,s]=this.getDomain().map(e=>this.transform(e)),{range:n}=this,[r,a]=n,o=r>a;return e<(o?a:r)?o?s:i:e>(o?r:a)?o?i:s:(t=r===a?this.toDomain((this.fromDomain(i)+this.fromDomain(s))/2):this.toDomain(this.fromDomain(i)+(e-r)/(a-r)*(this.fromDomain(s)-this.fromDomain(i))),this.transformInvert(t))}didChange(){let{cache:e}=this;return!!(!e||this.cacheProps.some(t=>this[t]!==e[t]))&&(this.cache={},this.cacheProps.forEach(e=>this.cache[e]=this[e]),!0)}refresh(){this.didChange()&&this.update()}getPixelRange(){let e=this.range.slice().sort((e,t)=>e-t);return e[1]-e[0]}isDenseInterval({start:e,stop:t,interval:i,count:s}){let n=this.getPixelRange();return null!=s||(s=(t-e)/("number"==typeof i?i:1)),s>=n&&(T.warn("the configured tick interval results in more than 1 tick per pixel, ignoring. Supply a larger tick interval or omit this configuration."),!0)}}iL.defaultTickCount=5,iL.defaultMaxTickCount=6;class iR extends iL{constructor(){super([0,1],[0,1]),this.type="linear"}toDomain(e){return e}ticks(){var e;let t=null!==(e=this.tickCount)&&void 0!==e?e:iL.defaultTickCount;if(!this.domain||this.domain.length<2||t<1||this.domain.some(e=>!isFinite(e)))return[];this.refresh();let[i,s]=this.getDomain(),{interval:n}=this;if(n){let e=Math.abs(n);if(!this.isDenseInterval({start:i,stop:s,interval:e}))return iA(i,s,e)}return iM(i,s,t,this.minTickCount,this.maxTickCount)}update(){this.domain&&!(this.domain.length<2)&&this.nice&&this.updateNiceDomain()}getTickStep(e,t){var i,s;let n=null!==(i=this.tickCount)&&void 0!==i?i:iL.defaultTickCount;return null!==(s=this.interval)&&void 0!==s?s:iE(e,t,n,this.minTickCount,this.maxTickCount)}updateNiceDomain(){var e;let t=null!==(e=this.tickCount)&&void 0!==e?e:iL.defaultTickCount,[i,s]=this.domain;if(t<1){this.niceDomain=[i,s];return}if(1===t){this.niceDomain=function(e,t){let i=Math.pow(10,Math.floor(Math.log10(t-e)));return iN.map(s=>{let n=s*i,r=Math.floor(e/n)*n,a=Math.ceil(t/n)*n;return{error:1-(t-e)/(a-r),domain:[r,a]}}).sort((e,t)=>e.error-t.error)[0].domain}(i,s);return}let n=i,r=s;for(let e=0;e<4;e++){let e=this.getTickStep(i,s),[t,a]=this.domain;if(e>=1)i=Math.floor(t/e)*e,s=Math.ceil(a/e)*e;else{let n=1/e;i=Math.floor(t*n)/n,s=Math.ceil(a*n)/n}if(i===n&&s===r)break;n=i,r=s}this.niceDomain=[i,s]}tickFormat({ticks:e,specifier:t}){return function(e,t){let i=iy(null!=t?t:",f"),{precision:s}=i;(null==s||isNaN(s))&&("f"===i.type||"%"===i.type?i.precision=Math.max(...e.map(e=>{if("number"!=typeof e||0===e)return 0;let t=Math.floor(Math.log10(Math.abs(e))),s=i.type?6:12,n=e.toExponential(s-1).replace(/\.?0+e/,"e"),r=n.indexOf(".");return r<0?t>=0?0:-t:Math.max(0,n.indexOf("e")-r-t-1)})):(!i.type||i.type in iS)&&(i.precision=Math.max(...e.map(e=>{if("number"!=typeof e)return 0;let t=e.toExponential((i.type?6:12)-1).replace(/\.?0+e/,"e");return t.substring(0,t.indexOf("e")).replace(".","").length}))));let n=iv(i);return e=>n(Number(e))}(null!=e?e:this.ticks(),t)}}function iT(e,t){let i=0;return"number"==typeof e&&"number"==typeof t?i=e-t:"string"==typeof e&&"string"==typeof t?i=e.localeCompare(t):null==e&&null==t||(i=null==e?-1:null==t?1:String(e).localeCompare(String(t))),i}function iI(e,t,i){let s=e=>"function"==typeof e?e():e;for(let n in e){let r=i(s(e[n]),s(t[n]));if(0!==r)return r}return 0}class i_ extends ta{zIndexChanged(){var e;this.layer&&(null===(e=this._layerManager)||void 0===e||e.moveLayer(this.layer,this.zIndex,this.zIndexSubOrder))}isLayer(){return null!=this.layer}constructor(e){var t;super({isVirtual:null==e?void 0:e.isVirtual}),this.opts=e,this.opacity=1,this.lastBBox=void 0;let{zIndex:i,zIndexSubOrder:s}=null!=e?e:{};this.isContainerNode=!0,void 0!==i&&(this.zIndex=i),void 0!==s&&(this.zIndexSubOrder=s),this.name=null===(t=this.opts)||void 0===t?void 0:t.name}_setLayerManager(e){var t,i;if(this._layerManager&&this.layer&&(this._layerManager.removeLayer(this.layer),this.layer=void 0),this.layer)throw Error("AG Charts - unable to deregister scene rendering layer!");if(super._setLayerManager(e),e&&(null===(t=this.opts)||void 0===t?void 0:t.layer)){let{zIndex:t,zIndexSubOrder:s,name:n}=null!==(i=this.opts)&&void 0!==i?i:{};this.layer=e.addLayer({zIndex:t,zIndexSubOrder:s,name:n,getComputedOpacity:()=>this.getComputedOpacity(),getVisibility:()=>this.getVisibility()})}}getComputedOpacity(){let e=1,t=this;do t instanceof i_&&(e*=t.opacity);while(t=t.parent);return e}getVisibility(){let e=this,t=this.visible;for(;e=e.parent;)e.visible||(t=e.visible);return t}visibilityChanged(){this.layer&&(this.layer.enabled=this.visible)}markDirty(e,t=tz.TRIVIAL){if(this.isVirtual){super.markDirty(e,t);return}let i=t;(t<tz.MINOR||null!=this.layer)&&(i=tz.TRIVIAL),super.markDirty(e,t,i)}containsPoint(e,t){return!0}computeBBox(){return this.computeTransformMatrix(),i_.computeBBox(this.children)}computeTransformedBBox(){return this.computeBBox()}render(e){var t,i;let{opts:{name:s}={},_debug:n=()=>{}}=this,{dirty:r,dirtyZIndex:a,layer:o,children:l,clipRect:h,dirtyTransform:d}=this,{ctx:u,forceRender:c,clipBBox:p}=e,{resized:g,stats:f}=e,m=u.getTransform(),y=r>=tz.MINOR||a||g,v=y,b=!1;for(let e of l)if(v||(v=null==e.layerManager&&e.dirty>=tz.TRIVIAL),b||(b=null!=e.layerManager&&e.dirty>=tz.TRIVIAL),v)break;if(s&&n({name:s,group:this,isDirty:y,isChildDirty:v,dirtyTransform:d,renderCtx:e,forceRender:c}),d)c="dirtyTransform";else if(o){let e=this.computeBBox();void 0!==this.lastBBox&&this.lastBBox.equals(e)||(c="dirtyTransform",this.lastBBox=e)}if(!y&&!v&&!b&&!c){s&&f&&n({name:s,result:"skipping",renderCtx:e,counts:this.nodeCount,group:this}),o&&f&&(f.layersSkipped++,f.nodesSkipped+=this.nodeCount.count),this.markClean({recursive:!1});return}let x=this.visible;if(o){if((u=o.context).save(),u.resetTransform(),"dirtyTransform"!==c&&(c=v||a),c&&o.clear(),p){let{width:t,height:i,x:r,y:a}=p;n(()=>({name:s,clipBBox:p,ctxTransform:u.getTransform(),renderCtx:e,group:this})),this.clipCtx(u,r,a,t,i)}u.setTransform(m)}else u.globalAlpha*=this.opacity;if(this.computeTransformMatrix(),this.matrix.toContext(u),h){let{x:t,y:i,width:r,height:a}=h;u.save(),n(()=>({name:s,clipRect:h,ctxTransform:u.getTransform(),renderCtx:e,group:this})),this.clipCtx(u,t,i,r,a),p=this.matrix.transformBBox(h)}let S=this.hasVirtualChildren();a?(this.sortChildren(l),"dirtyTransform"!==c&&(c=!0)):S&&this.sortChildren(l);let k=c!==e.forceRender||p!==e.clipBBox||u!==e.ctx?Object.assign(Object.assign({},e),{ctx:u,forceRender:c,clipBBox:p}):e,D=0;for(let e of l){if(!e.visible||!x){e.markClean(),f&&(D+=e.nodeCount.count);continue}if(!c&&e.dirty===tz.NONE){f&&(D+=e.nodeCount.count);continue}u.save(),e.render(k),u.restore()}if(f&&(f.nodesSkipped+=D),super.render(e),h&&u.restore(),S)for(let e of this.virtualChildren)e.markClean({recursive:"virtual"});o&&(f&&f.layersRendered++,u.restore(),c&&o.snapshot(),null===(i=(t=o.context).verifyDepthZero)||void 0===i||i.call(t)),s&&f&&n({name:s,result:"rendered",skipped:D,renderCtx:e,counts:this.nodeCount,group:this})}sortChildren(e){this.dirtyZIndex=!1,e.sort((e,t)=>{var i,s;return iI([e.zIndex,...null!==(i=e.zIndexSubOrder)&&void 0!==i?i:[void 0,void 0],e.serialNumber],[t.zIndex,...null!==(s=t.zIndexSubOrder)&&void 0!==s?s:[void 0,void 0],t.serialNumber],iT)})}clipCtx(e,t,i,s,n){e.beginPath(),e.moveTo(t,i),e.lineTo(t+s,i),e.lineTo(t+s,i+n),e.lineTo(t,i+n),e.closePath(),e.clip()}static computeBBox(e){let t=1/0,i=-1/0,s=1/0,n=-1/0;return e.forEach(e=>{if(!e.visible)return;let r=e.computeTransformedBBox();if(!r)return;let a=r.x,o=r.y;a<t&&(t=a),o<s&&(s=o),a+r.width>i&&(i=a+r.width),o+r.height>n&&(n=o+r.height)}),new ts(t,s,i-t,n-s)}setClipRectInGroupCoordinateSpace(e){this.clipRect=e?this.transformBBox(e):void 0}}i_.className="Group",v([e7({redraw:tz.MAJOR,convertor:e=>Math.min(1,Math.max(0,e))}),b("design:type",Number)],i_.prototype,"opacity",void 0);class iP{static select(e,t,i=!0){return new iP(e,t,i)}static selectAll(e,t){let i=[],s=e=>{t(e)&&i.push(e),e.children.forEach(s)};return s(e),i}static selectByClass(e,t){return iP.selectAll(e,e=>e instanceof t)}static selectByTag(e,t){return iP.selectAll(e,e=>e.tag===t)}constructor(e,t,i=!0){this.parentNode=e,this.autoCleanup=i,this.garbageBin=new Set,this._nodesMap=new Map,this._nodes=[],this.data=[],this.debug=B.create(!0,"scene","scene:selections"),this.nodeFactory=Object.prototype.isPrototypeOf.call(ta,t)?()=>new t:t}createNode(e,t,i){let s=this.nodeFactory(e);return s.datum=e,null==t||t(s),null!=i?this._nodes.splice(i,0,s):this._nodes.push(s),this.parentNode.appendChild(s),s}update(e,t,i){if(this.garbageBin.size>0&&this.debug(`Selection - update() called with pending garbage: ${e}`),i){let s=new Map(e.map((e,t)=>[i(e),[e,t]]));for(let[e,t]of this._nodesMap.entries())if(s.has(t)){let[i]=s.get(t);e.datum=i,this.garbageBin.delete(e),s.delete(t)}else this.garbageBin.add(e);for(let[e,[i,n]]of s.entries())this._nodesMap.set(this.createNode(i,t,n),e)}else{let i=Math.max(e.length,this.data.length);for(let s=0;s<i;s++)s>=e.length?this.garbageBin.add(this._nodes[s]):s>=this._nodes.length?this.createNode(e[s],t):(this._nodes[s].datum=e[s],this.garbageBin.delete(this._nodes[s]))}return this.data=e.slice(),this.autoCleanup&&this.cleanup(),this}cleanup(){return 0===this.garbageBin.size||(this._nodes=this._nodes.filter(e=>!this.garbageBin.has(e)||(this._nodesMap.delete(e),this.garbageBin.delete(e),this.parentNode.removeChild(e),!1))),this}clear(){return this.update([]),this}isGarbage(e){return this.garbageBin.has(e)}hasGarbage(){return this.garbageBin.size>0}each(e){return this._nodes.forEach((t,i)=>e(t,t.datum,i)),this}*[Symbol.iterator](){for(let e=0;e<this._nodes.length;e++){let t=this._nodes[e],i=this._nodes[e].datum;yield{node:t,datum:i,index:e}}}select(e){return iP.selectAll(this.parentNode,e)}selectByClass(e){return iP.selectByClass(this.parentNode,e)}selectByTag(e){return iP.selectByTag(this.parentNode,e)}nodes(){return this._nodes}}class iB extends tg{constructor(e={}){super(e),this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.restoreOwnStyles()}set x(e){this.x1=e,this.x2=e}set y(e){this.y1=e,this.y2=e}computeBBox(){return new ts(Math.min(this.x1,this.x2),Math.min(this.y1,this.y2),Math.abs(this.x2-this.x1),Math.abs(this.y2-this.y1))}isPointInPath(e,t){if(this.x1===this.x2||this.y1===this.y2){let{x:i,y:s}=this.transformPoint(e,t);return this.computeBBox().grow(this.strokeWidth/2).containsPoint(i,s)}return!1}render(e){var t;let{ctx:i,forceRender:s,stats:n}=e;if(this.dirty===tz.NONE&&!s){n&&(n.nodesSkipped+=this.nodeCount.count);return}this.computeTransformMatrix(),this.matrix.toContext(i);let{x1:r,y1:a,x2:o,y2:l}=this;if(r===o){let e=Math.round(r)+Math.floor(this.strokeWidth)%2/2;r=e,o=e}else if(a===l){let e=Math.round(a)+Math.floor(this.strokeWidth)%2/2;a=e,l=e}i.beginPath(),i.moveTo(r,a),i.lineTo(o,l),this.fillStroke(i),null===(t=this.fillShadow)||void 0===t||t.markClean(),super.render(e)}}function iF(e,t,i,s,n,r,a,o){let l=(i-e)*(o-r)-(s-t)*(a-n);if(0===l)return null;let h=((a-n)*(t-r)-(e-n)*(o-r))/l,d=((i-e)*(t-r)-(s-t)*(e-n))/l;return h>=0&&h<=1&&d>=0&&d<=1?{x:e+h*(i-e),y:t+h*(s-t)}:null}function ij(e,t,i,s){return[-e+3*t-3*i+s,3*e-6*t+3*i,-3*e+3*t,e]}function iG(e,t,i,s,n,r,a,o,l,h){let d=(h-o)/(l-a),u=o-d*a,c=Math.pow(d,2)+1,p=2*(d*(u-t)-e),g=Math.pow(p,2)-4*c*(Math.pow(e,2)+Math.pow(u-t,2)-Math.pow(i,2));if(g<0)return[];let f=[];return[(-p+Math.sqrt(g))/2/c,(-p-Math.sqrt(g))/2/c].forEach(e=>{if(!(e>=Math.min(a,l)&&e<=Math.max(a,l)))return;let t=d*e+u,i=J(s),o=J(n),h=J(Math.atan2(t,e));o<=i&&(o+=2*Math.PI),h<i&&(h+=2*Math.PI),r!==(h>=i&&h<=o)&&f.push({x:e,y:t})}),f}function iz(e,t,i){let s=Math.sqrt(Math.pow(e,2)+Math.pow(t,2)),{innerRadius:n,outerRadius:r}=i;if(i.startAngle===i.endAngle||s<Math.min(n,r)||s>Math.max(n,r))return!1;let a=Q(i.startAngle),o=Q(i.endAngle),l=Math.atan2(t,e);return a<o?l<=o&&l>=a:l<=o&&l>=-Math.PI||l>=a&&l<=Math.PI}function iW(e,t){let{startAngle:i,endAngle:s,innerRadius:n,outerRadius:r}=t,a={x:r*Math.cos(i),y:r*Math.sin(i)},o={x:r*Math.cos(s),y:r*Math.sin(s)},l=0===n?{x:0,y:0}:{x:n*Math.cos(i),y:n*Math.sin(i)},h=0===n?{x:0,y:0}:{x:n*Math.cos(s),y:n*Math.sin(s)};return null!=iF(e.start.x,e.start.y,e.end.x,e.end.y,a.x,a.y,l.x,l.y)||null!=iF(e.start.x,e.start.y,e.end.x,e.end.y,o.x,o.y,h.x,h.y)||iG(0,0,r,i,s,!0,e.start.x,e.start.y,e.end.x,e.end.y).length>0}iB.className="Line",iB.defaultStyles=Object.assign({},tg.defaultStyles,{fill:void 0,strokeWidth:1}),v([e7({redraw:tz.MAJOR}),b("design:type",Number)],iB.prototype,"x1",void 0),v([e7({redraw:tz.MAJOR}),b("design:type",Number)],iB.prototype,"y1",void 0),v([e7({redraw:tz.MAJOR}),b("design:type",Number)],iB.prototype,"x2",void 0),v([e7({redraw:tz.MAJOR}),b("design:type",Number)],iB.prototype,"y2",void 0),(t4=tV||(tV={}))[t4.Move=0]="Move",t4[t4.Line=1]="Line",t4[t4.Arc=2]="Arc",t4[t4.Curve=3]="Curve",t4[t4.ClosePath=4]="ClosePath";class iY{constructor(){this.previousCommands=[],this.previousParams=[],this.previousClosedPath=!1,this.commands=[],this.params=[],this._closedPath=!1}isDirty(){if(this._closedPath!==this.previousClosedPath||this.previousCommands.length!==this.commands.length||this.previousParams.length!==this.params.length)return!0;for(let e=0;e<this.commands.length;e++)if(this.commands[e]!==this.previousCommands[e])return!0;for(let e=0;e<this.params.length;e++)if(this.params[e]!==this.previousParams[e])return!0;return!1}draw(e){let t=this.commands,i=this.params,s=0;for(let n of(e.beginPath(),t))switch(n){case tV.Move:e.moveTo(i[s++],i[s++]);break;case tV.Line:e.lineTo(i[s++],i[s++]);break;case tV.Curve:e.bezierCurveTo(i[s++],i[s++],i[s++],i[s++],i[s++],i[s++]);break;case tV.Arc:e.arc(i[s++],i[s++],i[s++],i[s++],i[s++],1===i[s++]);break;case tV.ClosePath:e.closePath()}0===t.length&&e.closePath()}moveTo(e,t){this.xy?(this.xy[0]=e,this.xy[1]=t):this.xy=[e,t],this.commands.push(tV.Move),this.params.push(e,t)}lineTo(e,t){this.xy?(this.commands.push(tV.Line),this.params.push(e,t),this.xy[0]=e,this.xy[1]=t):this.moveTo(e,t)}rect(e,t,i,s){this.moveTo(e,t),this.lineTo(e+i,t),this.lineTo(e+i,t+s),this.lineTo(e,t+s),this.closePath()}arc(e,t,i,s,n,r=!1){let a=e+i*Math.cos(n),o=t+i*Math.sin(n);this.xy?(this.xy[0]=a,this.xy[1]=o):this.xy=[a,o],this.commands.push(tV.Arc),this.params.push(e,t,i,s,n,r?1:0)}cubicCurveTo(e,t,i,s,n,r){this.xy||this.moveTo(e,t),this.commands.push(tV.Curve),this.params.push(e,t,i,s,n,r),this.xy&&(this.xy[0]=n,this.xy[1]=r)}get closedPath(){return this._closedPath}closePath(){this.xy&&(this.xy=void 0,this.commands.push(tV.ClosePath),this._closedPath=!0)}clear({trackChanges:e}={trackChanges:!1}){e?(this.previousCommands=this.commands,this.previousParams=this.params,this.previousClosedPath=this._closedPath,this.commands=[],this.params=[]):(this.commands.length=0,this.params.length=0),this.xy=void 0,this._closedPath=!1}isPointInPath(e,t){let i=this.commands,s=this.params,n=i.length,r=NaN,a=NaN,o=0,l=0,h=0;for(let d=0,u=0;d<n;d++)switch(i[d]){case tV.Move:!isNaN(r)&&iF(r,a,o,l,-1e4,-1e4,e,t)&&h++,r=o=s[u++],a=l=s[u++];break;case tV.Line:iF(o,l,s[u++],s[u++],-1e4,-1e4,e,t)&&h++,o=s[u-2],l=s[u-1];break;case tV.Curve:h+=function(e,t,i,s,n,r,a,o,l,h,d,u){let c=[],p=h-u,g=d-l,f=ij(e,i,n,a),m=ij(t,s,r,o),y=p*f[0]+g*m[0];for(let e of function(e,t,i,s){if(0===e)return function(e,t,i){if(0===e)return function(e,t){let i=-t/e;return 0!==e&&i>=0&&i<=1?[i]:[]}(t,i);let s=t*t-4*e*i,n=[];if(0===s){let i=-t/(2*e);i>=0&&i<=1&&n.push(i)}else if(s>0){let i=Math.sqrt(s),r=(-t-i)/(2*e),a=(-t+i)/(2*e);r>=0&&r<=1&&n.push(r),a>=0&&a<=1&&n.push(a)}return n}(t,i,s);let n=t/e,r=i/e,a=(3*r-n*n)/9,o=(9*n*r-s/e*27-2*n*n*n)/54,l=a*a*a+o*o,h=1/3,d=[];if(l>=0){let e=Math.sqrt(l),t=Math.sign(o+e)*Math.pow(Math.abs(o+e),h),i=Math.sign(o-e)*Math.pow(Math.abs(o-e),h),s=-h*n+(t+i);if(s>=0&&s<=1&&d.push(s),0===Math.abs(Math.sqrt(3)*(t-i)/2)){let e=-h*n-(t+i)/2;e>=0&&e<=1&&d.push(e)}}else{let e=Math.acos(o/Math.sqrt(-a*a*a)),t=h*n,i=2*Math.sqrt(-a),s=i*Math.cos(h*e)-t,r=i*Math.cos(h*(e+2*Math.PI))-t,l=i*Math.cos(h*(e+4*Math.PI))-t;s>=0&&s<=1&&d.push(s),r>=0&&r<=1&&d.push(r),l>=0&&l<=1&&d.push(l)}return d}(y,p*f[1]+g*m[1],p*f[2]+g*m[2],p*f[3]+g*m[3]+(l*(u-h)-h*(d-l)))){let t;let i=e*e,s=e*i,n=f[0]*s+f[1]*i+f[2]*e+f[3],r=m[0]*s+m[1]*i+m[2]*e+m[3];(t=l!==d?(n-l)/(d-l):(r-h)/(u-h))>=0&&t<=1&&c.push({x:n,y:r})}return c}(o,l,s[u++],s[u++],s[u++],s[u++],s[u++],s[u++],-1e4,-1e4,e,t).length,o=s[u-2],l=s[u-1];break;case tV.Arc:let n=s[u++],c=s[u++],p=s[u++],g=s[u++],f=s[u++];h+=iG(n,c,p,g,f,!!s[u++],-1e4,-1e4,e,t).length,o=n+Math.cos(f)*p,l=c+Math.sin(f)*p;break;case tV.ClosePath:!isNaN(r)&&iF(r,a,o,l,-1e4,-1e4,e,t)&&h++}return h%2==1}getPoints(){let{commands:e,params:t}=this,i=[],s=0;for(let n=0;n<e.length;n++)switch(e[n]){case tV.Move:case tV.Line:i.push({x:t[s++],y:t[s++]});break;case tV.Curve:s+=4,i.push({x:t[s++],y:t[s++]});break;case tV.Arc:i.push({x:t[s++],y:t[s++]}),s+=4;case tV.ClosePath:}return i}}function iV(e){let{redraw:t=tz.MAJOR,changeCb:i,convertor:s}=null!=e?e:{};return e7({redraw:t,type:"path",convertor:s,changeCb:i})}class i$ extends tg{constructor(){super(...arguments),this.path=new iY,this.clipScalingX=1,this.clipScalingY=1,this._dirtyPath=!0}set dirtyPath(e){this._dirtyPath!==e&&(this._dirtyPath=e,e&&this.markDirty(this,tz.MAJOR))}get dirtyPath(){return this._dirtyPath}checkPathDirty(){var e,t,i,s;this._dirtyPath||(this.dirtyPath=this.path.isDirty()||null!==(t=null===(e=this.fillShadow)||void 0===e?void 0:e.isDirty())&&void 0!==t&&t||null!==(s=null===(i=this.clipPath)||void 0===i?void 0:i.isDirty())&&void 0!==s&&s)}isPointInPath(e,t){let i=this.transformPoint(e,t);return this.path.closedPath&&this.path.isPointInPath(i.x,i.y)}isDirtyPath(){return!1}updatePath(){}clip(e,t){let i=e.getTransform(),s=1!==this.clipScalingX||1!==this.clipScalingY;s&&e.scale(this.clipScalingX,this.clipScalingY),t(),s&&e.setTransform(i)}render(e){var t;let{ctx:i,forceRender:s,stats:n}=e;if(this.dirty===tz.NONE&&!s){n&&(n.nodesSkipped+=this.nodeCount.count);return}this.computeTransformMatrix(),this.matrix.toContext(i),(this.dirtyPath||this.isDirtyPath())&&(this.updatePath(),this.dirtyPath=!1),this.clipPath&&null!=this.clipMode?(i.save(),"normal"===this.clipMode&&this.clip(i,()=>{var e;null===(e=this.clipPath)||void 0===e||e.draw(i),i.clip()}),this.clipScalingX>0&&this.clipScalingY>0&&(this.path.draw(i),this.fillStroke(i)),"punch-out"===this.clipMode&&this.clip(i,()=>{var e,t;null===(e=this.clipPath)||void 0===e||e.draw(i),i.clip();let{x:s=-1e4,y:n=-1e4,width:r=2e4,height:a=2e4}=null!==(t=this.computeBBox())&&void 0!==t?t:{};i.clearRect(s,n,r,a)}),i.restore()):(this.path.draw(i),this.fillStroke(i)),null===(t=this.fillShadow)||void 0===t||t.markClean(),super.render(e)}}i$.className="Path",v([iV(),b("design:type",iY)],i$.prototype,"clipPath",void 0),v([iV(),b("design:type",String)],i$.prototype,"clipMode",void 0),v([iV(),b("design:type",Object)],i$.prototype,"clipScalingX",void 0),v([iV(),b("design:type",Object)],i$.prototype,"clipScalingY",void 0);class iX extends i${constructor(){super(...arguments),this.centerX=0,this.centerY=0,this.innerRadius=10,this.outerRadius=20,this.startAngle=0,this.endAngle=2*Math.PI,this.angleOffset=0,this.inset=0}computeBBox(){let e=this.outerRadius;return new ts(this.centerX-e,this.centerY-e,2*e,2*e)}updatePath(){let e=this.path,{angleOffset:t,inset:i}=this,s=this.startAngle+t,n=this.endAngle+t,r=Math.abs(this.endAngle-this.startAngle)>=2*Math.PI,a=this.centerX,o=this.centerY;if(e.clear(),r){let t=this.innerRadius<=0?0:this.innerRadius+i,r=Math.min(t,this.outerRadius-i),l=Math.max(t,this.outerRadius-i);e.arc(a,o,l,s,n),r>0&&(e.moveTo(a+r*Math.cos(n),o+r*Math.sin(n)),e.arc(a,o,r,n,s,!0))}else{let t=Math.min(this.innerRadius+i,this.outerRadius-i),r=Math.max(this.innerRadius+i,this.outerRadius-i),l=t>0?i/t:0,h=r>0?i/r:0,d=Math.abs(n-s);if(d<2*h)return;let u=t<=i||d<2*l;if(u){let l;let h=Math.abs(d)<.5*Math.PI?i*(1+Math.cos(d))/Math.sin(d):NaN;l=h>0&&h<r?Math.max(Math.hypot(i,h),t):t;let u=(s+n)*.5;e.moveTo(a+l*Math.cos(u),o+l*Math.sin(u))}else e.moveTo(a+t*Math.cos(s+l),o+t*Math.sin(s+l));e.arc(a,o,r,s+h,n-h),u||(t>0?e.arc(a,o,t,n-l,s+l,!0):e.lineTo(a,o))}e.closePath(),this.dirtyPath=!1}isPointInPath(e,t){let{angleOffset:i}=this,s=this.startAngle+i,n=this.endAngle+i,r=Math.min(this.innerRadius,this.outerRadius),a=Math.max(this.innerRadius,this.outerRadius),o=this.transformPoint(e,t);return iz(o.x,o.y,{startAngle:s,endAngle:n,innerRadius:r,outerRadius:a})}}function iH(e,t){if(iq(e)&&iq(t)){let i={};return Object.keys(e).forEach(s=>{s in t?i[s]=iH(e[s],t[s]):i[s]=e[s]}),Object.keys(t).forEach(s=>{s in e||(i[s]=t[s])}),i}return Array.isArray(e)&&!Array.isArray(t)||iU(e)&&!iU(t)?e:t}function iU(e){return"object"==typeof e&&null!==e}function iK(e){return iU(e)&&!Array.isArray(e)}function iq(e){return iK(e)&&e.constructor===Object}function iZ(...e){var t;let i={};for(let s of e)if(s)for(let e of z(s)?function(e){let t=new Set;for(;z(e);)t.add(null==e?void 0:e[j]),e=Object.getPrototypeOf(e);return Array.from(t).flatMap(e=>Object.keys(e))}(s):Object.keys(s))iK(i[e])&&iK(s[e])?i[e]=iZ(i[e],s[e]):null!==(t=i[e])&&void 0!==t||(i[e]=s[e]);return i}iX.className="Sector",v([iV(),b("design:type",Number)],iX.prototype,"centerX",void 0),v([iV(),b("design:type",Number)],iX.prototype,"centerY",void 0),v([iV(),b("design:type",Number)],iX.prototype,"innerRadius",void 0),v([iV(),b("design:type",Number)],iX.prototype,"outerRadius",void 0),v([iV(),b("design:type",Number)],iX.prototype,"startAngle",void 0),v([iV(),b("design:type",Number)],iX.prototype,"endAngle",void 0),v([iV(),b("design:type",Number)],iX.prototype,"angleOffset",void 0),v([iV(),b("design:type",Number)],iX.prototype,"inset",void 0);let iJ=null;function iQ(e){return null==e?void 0:""===e?"":(null!=iJ||(iJ=document.createElement("div")),iJ.textContent=String(e),iJ.innerHTML)}let i0=e=>"string"==typeof e,i1=e=>!!e&&Object.prototype.hasOwnProperty.call(e,"toString")&&i0(e.toString());function i2(e){return i3(e)||!!e&&Object.prototype.hasOwnProperty.call(e,"valueOf")&&i3(e.valueOf())||e instanceof Date&&!isNaN(+e)}function i5(e,t){return t&&i2(e)?e:t?void 0:i0(e)||i1(e)?e:String(e)}let i3=e=>"number"==typeof e&&Number.isFinite(e),i4=new Map;function i6(e,t){var i,s,n;let r=JSON.stringify(e,null,0);return i4.has(t)||i4.set(t,new Map),(null===(i=i4.get(t))||void 0===i?void 0:i.has(r))||null===(s=i4.get(t))||void 0===s||s.set(r,t(e)),null===(n=i4.get(t))||void 0===n?void 0:n.get(r)}let i8={type:"reducer",property:"smallestKeyInterval",initialValue:1/0,reducer:()=>{let e=NaN;return(t=1/0,i)=>{let s=i.keys[0],n=Math.abs(s-e);return(e=s,!isNaN(n)&&n>0&&n<t)?n:t}}},i9={type:"processor",property:"sortedGroupDomain",calculate:({domain:{groups:e}})=>{if(null!=e)return[...e].sort((e,t)=>{for(let i=0;i<e.length;i++){let s=e[i]-t[i];if(0!==s)return s}return 0})}};function i7({normaliseTo:e,mode:t}){let i=(t,i)=>{let s=t*e/i;return s>=0?Math.min(e,s):Math.max(-e,s)};return()=>()=>(e,s)=>{let n=[0,0];for(let i of s){let s=e[i],r=s<0?0:1;"sum"===t?n[r]+=s:0===r?n[r]=Math.min(n[r],s):n[r]=Math.max(n[r],s)}let r=Math.max(Math.abs(n[0]),n[1]);for(let t of s)e[t]=i(e[t],r)}}function se(e,t,i,s="sum"){return{scopes:[e.id],type:"group-value-processor",matchGroupIds:t,adjust:i6({normaliseTo:i,mode:s},i7)}}function st({normaliseTo:e,zeroDomain:t,rangeMin:i,rangeMax:s}){let n=e[1]-e[0],r=(i,s,r)=>{let a=e[0]+(i-s)/r*n;return 0===r?t:a>=e[1]?e[1]:a<e[0]?e[0]:a};return()=>(t,n)=>{let[a,o]=t.domain.values[n];null!=i&&(a=i),null!=s&&(o=s);let l=o-a;for(let i of(t.domain.values[n]=[e[0],e[1]],t.data)){let e=i.values;for(let i of("ungrouped"===t.type&&(e=[e]),e))i[n]=r(i[n],a,l)}}}function si(e,t,i,s,n,r){return{scopes:[e.id],type:"property-value-processor",property:t,adjust:i6({normaliseTo:i,rangeMin:n,rangeMax:r,zeroDomain:s},st)}}function ss(e,t=[]){return{type:"processor",scopes:[e.id],property:"animationValidation",calculate(i){var s;let{keys:n,values:r}=i.defs,{input:a,data:o}=i,l=!0,h=!0,d=[];for(let i=0;i<r.length;i++)(null===(s=r[i].scopes)||void 0===s?void 0:s.some(t=>t===e.id))&&t.some(e=>r[i].id===e)&&d.push([i,r[i]]);let u=(e,t,s)=>{var n;if("category"===t.valueType){let t=i.domain[s][e];l&&(l=t.length===a.count);return}let r=null===(n=o[0])||void 0===n?void 0:n[s][e];for(let t=1;(l||h)&&t<o.length;t++){let i=o[t][s][e];h&&(h=r<=i),l&&(l=r!==i),r=i}};for(let e=0;(l||h)&&e<n.length;e++)u(e,n[e],"keys");for(let e=0;(l||h)&&e<d.length;e++){let[t,i]=d[e];u(t,i,"values")}return{uniqueKeys:l,orderedKeys:h}}}}function sn({mode:e,separateNegative:t}){return()=>()=>(i,s)=>{let n=[0,0];for(let r of s){let s=i[r],a=en(s)&&t?0:1;"number"!=typeof s||isNaN(s)||("normal"===e&&(n[a]+=s),i[r]=n[a],"trailing"!==e||(n[a]+=s))}}}function sr({mode:e,sum:t}){return()=>{let i=[],s=!0;return()=>(n,r)=>{let a=0;for(let o of r){let r=n[o],l=s&&"current"===t?0:i[o];i[o]=r;let h="current"===t?r:l;if("number"!=typeof r||isNaN(r)||"number"!=typeof l||isNaN(l)){n[o]=a;continue}"normal"===e&&(a+=h),n[o]=a,"trailing"===e&&(a+=h)}s=!1}}}function sa(e,t=!0){return{type:"processor",property:"diff",calculate:i=>{let s={changed:!1,moved:[],added:[],updated:[],removed:[],addedIndices:[],updatedIndices:[],removedIndices:[]},n=new Map,r=new Map,a=new Map,o=new Map,l=new Map,h=new Map,d=new Map;for(let s=0;s<Math.max(e.data.length,i.data.length);s++){let u=e.data[s],c=i.data[s],p=u?so(u.keys):"",g=c?so(c.keys):"";if(p===g){C(u.values,c.values)||(a.set(g,c),h.set(g,s));continue}o.has(g)?((t||!C(o.get(g).values,c.values))&&(a.set(g,c),h.set(g,s),n.set(g,c)),o.delete(g),d.delete(g)):c&&(r.set(g,c),l.set(g,s)),r.has(p)?((t||!C(r.get(p).values,u.values))&&(a.set(p,u),h.set(p,s),n.set(p,u)),r.delete(p),l.delete(p)):u&&(a.delete(p),h.delete(p),o.set(p,u),d.set(p,s))}return s.added=Array.from(r.keys()),s.updated=Array.from(a.keys()),s.removed=Array.from(o.keys()),s.moved=Array.from(n.keys()),s.addedIndices=Array.from(l.values()),s.updatedIndices=Array.from(h.values()),s.removedIndices=Array.from(d.values()),s.changed=s.added.length>0||s.updated.length>0||s.removed.length>0,s}}}function so(e){return e.join("___")}class sl{constructor(){this.enabled=!0,this.color="#464646",this.fontSize=12,this.fontFamily="Verdana, sans-serif"}getFont(){return ty(this)}}function sh(e){let{parallelFlipRotation:t=0,regularFlipRotation:i=0}=e,s=e.rotation?J(ee(e.rotation)):0,n=!s&&t>=0&&t<=Math.PI?-1:1,r=!s&&i>=0&&i<=Math.PI?-1:1,a=0;return e.parallel?a=n*Math.PI/2:-1===r&&(a=Math.PI),{configuredRotation:s,defaultRotation:a,parallelFlipFlag:n,regularFlipFlag:r}}function sd(e,t,i,s,n){if(e){if(!t&&!i)return"center";if(s*(t>0&&t<=Math.PI||i>0&&i<=Math.PI?-1:1)==-1)return"end"}else if(s*n==-1)return"end";return"start"}v([ea(ev),b("design:type",Object)],sl.prototype,"enabled",void 0),v([ea(eN),b("design:type",Object)],sl.prototype,"color",void 0),v([ea(eW),b("design:type",String)],sl.prototype,"fontStyle",void 0),v([ea(eV),b("design:type",String)],sl.prototype,"fontWeight",void 0),v([ea(eR(0)),b("design:type",Object)],sl.prototype,"fontSize",void 0),v([ea(ex),b("design:type",Object)],sl.prototype,"fontFamily",void 0),v([ea(ey),b("design:type",Function)],sl.prototype,"formatter",void 0),(t6=t$||(t$={}))[t6.SERIES_BACKGROUND_ZINDEX=-10]="SERIES_BACKGROUND_ZINDEX",t6[t6.AXIS_GRID_ZINDEX=0]="AXIS_GRID_ZINDEX",t6[t6.AXIS_ZINDEX=20]="AXIS_ZINDEX",t6[t6.SERIES_CROSSLINE_RANGE_ZINDEX=30]="SERIES_CROSSLINE_RANGE_ZINDEX",t6[t6.SERIES_LAYER_ZINDEX=500]="SERIES_LAYER_ZINDEX",t6[t6.AXIS_FOREGROUND_ZINDEX=750]="AXIS_FOREGROUND_ZINDEX",t6[t6.SERIES_CROSSHAIR_ZINDEX=1e3]="SERIES_CROSSHAIR_ZINDEX",t6[t6.SERIES_LABEL_ZINDEX=1500]="SERIES_LABEL_ZINDEX",t6[t6.SERIES_CROSSLINE_LINE_ZINDEX=2500]="SERIES_CROSSLINE_LINE_ZINDEX",t6[t6.LEGEND_ZINDEX=3e3]="LEGEND_ZINDEX";class su extends i${constructor(){super(...arguments),this.x=0,this.y=0,this.size=12}computeBBox(){let{x:e,y:t,size:i}=this,s=i/2;return new ts(e-s,t-s,i,i)}applyPath(e,t){let{path:i}=this,{x:s,y:n}=this;for(let{x:r,y:a,t:o}of(i.clear(),t))s+=r*e,n+=a*e,"move"===o?i.moveTo(s,n):i.lineTo(s,n);i.closePath()}}v([iV(),b("design:type",Number)],su.prototype,"x",void 0),v([iV(),b("design:type",Number)],su.prototype,"y",void 0),v([iV({convertor:Math.abs}),b("design:type",Number)],su.prototype,"size",void 0);class sc extends su{updatePath(){let{x:e,y:t,path:i,size:s}=this;i.clear(),i.arc(e,t,s/2,0,2*Math.PI),i.closePath()}}sc.className="Circle";let sp={BLUE:"#5090dc",ORANGE:"#ffa03a",GREEN:"#459d55",CYAN:"#34bfe1",YELLOW:"#e1cc00",VIOLET:"#9669cb",GRAY:"#b5b5b5",MAGENTA:"#bd5aa7",BROWN:"#8a6224",RED:"#ef5452"},sg={BLUE:"#2b5c95",ORANGE:"#cc6f10",GREEN:"#1e652e",CYAN:"#18859e",YELLOW:"#a69400",VIOLET:"#603c88",GRAY:"#575757",MAGENTA:"#7d2f6d",BROWN:"#4f3508",RED:"#a82529"};class sf{constructor(e){this.modules={},this.parent=e}destroy(){for(let[e,t]of Object.entries(this.modules))t.instance.destroy(),delete this.modules[e],delete this.parent[e]}addModule(e){if(null!=this.modules[e.optionsKey])throw Error("AG Charts - module already initialised: "+e.optionsKey);if(e.optionsKey in this.parent)throw Error(`AG Charts - class already has option key '${e.optionsKey}'`);null==this.moduleContext&&(this.moduleContext=this.parent.createModuleContext());let t=new e.instanceConstructor(Object.assign({},this.moduleContext));this.modules[e.optionsKey]={instance:t},this.parent[e.optionsKey]=t}removeModule(e){var t,i;null===(i=null===(t=this.modules[e.optionsKey])||void 0===t?void 0:t.instance)||void 0===i||i.destroy(),delete this.modules[e.optionsKey],delete this.parent[e.optionsKey]}isModuleEnabled(e){return null!=this.modules[e.optionsKey]}*[Symbol.iterator](){for(let{instance:e}of Object.values(this.modules))yield e}}class sm{constructor(){this.registeredListeners=new Map}addListener(e,t,i){let s={symbol:Symbol(e),handler:t,meta:i};return this.registeredListeners.has(e)?this.registeredListeners.get(e).push(s):this.registeredListeners.set(e,[s]),()=>this.removeListener(s.symbol)}removeListener(e){for(let[t,i]of this.registeredListeners.entries()){let s=i.findIndex(t=>t.symbol===e);if(s>=0){i.splice(s,1),0===i.length&&this.registeredListeners.delete(t);break}}}dispatch(e,...t){class i{constructor(){this.results=void 0}push(e){var t;void 0!==e&&(null!==(t=this.results)&&void 0!==t||(this.results=[]),this.results.push(e))}}let s=new i;for(let i of this.getListenersByType(e))try{s.push(i.handler(...t))}catch(e){T.errorOnce(e)}return s.results}dispatchWrapHandlers(e,t,...i){for(let s of this.getListenersByType(e))try{t(s.handler,s.meta,...i)}catch(e){T.errorOnce(e)}}getListenersByType(e){var t;return null!==(t=this.registeredListeners.get(e))&&void 0!==t?t:[]}}class sy{constructor(){this.eventListeners=new Map}addEventListener(e,t){if("function"!=typeof t)throw Error("AG Charts - listener must be a Function");let i=this.eventListeners.get(e);i?i.add(t):this.eventListeners.set(e,new Set([t]))}removeEventListener(e,t){var i;null===(i=this.eventListeners.get(e))||void 0===i||i.delete(t),0===this.eventListeners.size&&this.eventListeners.delete(e)}hasEventListener(e){return this.eventListeners.has(e)}clearEventListeners(){this.eventListeners.clear()}fireEvent(e){var t;null===(t=this.eventListeners.get(e.type))||void 0===t||t.forEach(t=>t(e))}}function sv(e,t=[1/0,-1/0]){for(let i of e)"number"==typeof i&&(i<t[0]&&(t[0]=i),i>t[1]&&(t[1]=i));return t}function sb(e,t=[0,0]){for(let i of e)"number"==typeof i&&(i<0&&(t[0]+=i),i>0&&(t[1]+=i));return t}function sx(e,t){return{id:t,scopes:[e.id],type:"aggregate",aggregateFunction:()=>[0,1],groupAggregateFunction:(e,t=[0,0])=>{var i,s;return t[0]+=null!==(i=null==e?void 0:e[0])&&void 0!==i?i:0,t[1]+=null!==(s=null==e?void 0:e[1])&&void 0!==s?s:0,t}}}function sS(e,t,i,s){let n={id:t,scopes:[e.id],matchGroupIds:s?[s]:void 0,type:"aggregate",aggregateFunction:(e,t=[])=>{let s=t[1]-t[0];return i.aggregateFunction(e).map(e=>e/s)}};return i.groupAggregateFunction&&(n.groupAggregateFunction=i.groupAggregateFunction),n}function sk(e){return null!=i5(e,!0)}function sD(e){return null!=i5(e,!1)}function sw(e,t,i,s={}){return Object.assign({scopes:[e.id],property:t,type:"key",valueType:i?"range":"category",validation:i?sk:sD},s)}function sO(e,t,i,s={}){return Object.assign({scopes:[e.id],property:t,type:"value",valueType:i?"range":"category",validation:i?sk:sD},s)}function sM(e,t,i,s,n="current",r){return[sO(e,t,i,r),function(e,t,i,s,n=!1){let r;return r=i.startsWith("window")?i6({mode:i.endsWith("-trailing")?"trailing":"normal",sum:s},sr):i6({mode:i,separateNegative:n},sn),{scopes:[e.id],type:"group-value-processor",matchGroupIds:[t],adjust:r}}(e,r.groupId,s,n,r.separateNegative)]}(t8=tX||(tX={}))[t8.EXACT_SHAPE_MATCH=0]="EXACT_SHAPE_MATCH",t8[t8.NEAREST_BY_MAIN_AXIS_FIRST=1]="NEAREST_BY_MAIN_AXIS_FIRST",t8[t8.NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST=2]="NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST",t8[t8.NEAREST_NODE=3]="NEAREST_NODE";class sN{constructor(e,t,{datum:i},s){this.type=e,this.event=t,this.datum=i,this.seriesId=s.id}}class sE{constructor(){this.fill="yellow",this.fillOpacity=void 0,this.stroke=void 0,this.strokeWidth=void 0,this.strokeOpacity=void 0,this.lineDash=void 0,this.lineDashOffset=void 0}}v([ea(eE),b("design:type",String)],sE.prototype,"fill",void 0),v([ea(eT(0,1)),b("design:type",Number)],sE.prototype,"fillOpacity",void 0),v([ea(eE),b("design:type",String)],sE.prototype,"stroke",void 0),v([ea(eT(0)),b("design:type",Number)],sE.prototype,"strokeWidth",void 0),v([ea(eT(0,1)),b("design:type",Number)],sE.prototype,"strokeOpacity",void 0),v([ea(eX),b("design:type",Array)],sE.prototype,"lineDash",void 0),v([ea(eT(0)),b("design:type",Number)],sE.prototype,"lineDashOffset",void 0);class sC{constructor(){this.strokeWidth=void 0,this.dimOpacity=void 0,this.enabled=void 0}}v([ea(eT(0)),b("design:type",Number)],sC.prototype,"strokeWidth",void 0),v([ea(eT(0,1)),b("design:type",Number)],sC.prototype,"dimOpacity",void 0),v([ea(eb),b("design:type",Boolean)],sC.prototype,"enabled",void 0);class sA{constructor(){this.color="black"}}v([ea(eE),b("design:type",String)],sA.prototype,"color",void 0);class sL{constructor(){this.item=new sE,this.series=new sC,this.text=new sA}}(t9=tH||(tH={}))[t9.None=0]="None",t9[t9.This=1]="This",t9[t9.Other=2]="Other";class sR extends sy{get type(){var e;return null!==(e=this.constructor.type)&&void 0!==e?e:""}set data(e){this._data=e,this.onDataChange()}get data(){var e;return null!==(e=this._data)&&void 0!==e?e:this._chartData}onDataChange(){this.nodeDataRefresh=!0}setChartData(e){this._chartData=e,this.data===e&&this.onDataChange()}hasData(){let{data:e}=this;return e&&(!Array.isArray(e)||e.length>0)}set visible(e){this._visible=e,this.visibleChanged()}get visible(){return this._visible}onSeriesGroupingChange(e,t){let{id:i,type:s,visible:n,rootGroup:r,highlightGroup:a,annotationGroup:o}=this;e&&this.ctx.seriesStateManager.deregisterSeries({id:i,type:s}),t&&this.ctx.seriesStateManager.registerSeries({id:i,type:s,visible:n,seriesGrouping:t}),null!=this.rootGroup.parent&&this.ctx.seriesLayerManager.changeGroup({id:i,type:s,rootGroup:r,highlightGroup:a,annotationGroup:o,getGroupZIndexSubOrder:e=>this.getGroupZIndexSubOrder(e),seriesGrouping:t,oldGrouping:e})}getBandScalePadding(){return{inner:1,outer:0}}constructor(e){super(),this.NodeClickEvent=sN,this.id=ti(this),this.rootGroup=new i_({name:"seriesRoot",isVirtual:!0}),this.axes={[tG.X]:void 0,[tG.Y]:void 0},this.directions=[tG.X,tG.Y],this.nodeDataRefresh=!0,this._visible=!0,this.showInLegend=!0,this.cursor="default",this.nodeClickRange="exact",this.seriesGrouping=void 0,this._declarationOrder=-1,this.seriesListeners=new sm,this.highlightStyle=new sL,this.moduleMap=new sf(this),this.nodeDataDependencies={},this.ctx=e.moduleCtx;let{useLabelLayer:t=!1,pickModes:i=[tX.NEAREST_BY_MAIN_AXIS_FIRST],directionKeys:s={},directionNames:n={},contentGroupVirtual:r=!0,canHaveAxes:a=!1}=e;this.directionKeys=s,this.directionNames=n,this.canHaveAxes=a,this.contentGroup=this.rootGroup.appendChild(new i_({name:`${this.id}-content`,layer:!r,isVirtual:r,zIndex:t$.SERIES_LAYER_ZINDEX,zIndexSubOrder:this.getGroupZIndexSubOrder("data")})),this.highlightGroup=new i_({name:`${this.id}-highlight`,layer:!r,isVirtual:r,zIndex:t$.SERIES_LAYER_ZINDEX,zIndexSubOrder:this.getGroupZIndexSubOrder("highlight")}),this.highlightNode=this.highlightGroup.appendChild(new i_({name:"highlightNode",zIndex:0})),this.highlightLabel=this.highlightGroup.appendChild(new i_({name:"highlightLabel",zIndex:10})),this.pickModes=i,this.labelGroup=this.rootGroup.appendChild(new i_({name:`${this.id}-series-labels`,layer:t,zIndex:t$.SERIES_LABEL_ZINDEX})),this.annotationGroup=new i_({name:`${this.id}-annotation`,layer:!r,isVirtual:r,zIndex:t$.SERIES_LAYER_ZINDEX,zIndexSubOrder:this.getGroupZIndexSubOrder("annotation")})}getGroupZIndexSubOrder(e,t=0){let i=0;switch(e){case"data":case"paths":break;case"labels":i+=2e4;break;case"marker":i+=1e4;break;case"highlight":t+=15e3;break;case"annotation":i+=15e3}return[()=>this._declarationOrder+i,t]}addListener(e,t){return this.seriesListeners.addListener(e,t)}dispatch(e,t){return this.seriesListeners.dispatch(e,t)}addChartEventListeners(){}destroy(){this.ctx.seriesStateManager.deregisterSeries(this),this.ctx.seriesLayerManager.releaseGroup(this)}getDirectionValues(e,t){let i=this.resolveKeyDirection(e),s=null==t?void 0:t[i],n=[];if(!s)return n;let r=(...e)=>{for(let t of e)Array.isArray(t)?r(...t):"object"==typeof t?r(...Object.values(t)):n.push(t)};return r(...s.map(e=>this[e])),n}getKeys(e){return this.getDirectionValues(e,this.directionKeys)}getNames(e){return this.getDirectionValues(e,this.directionNames)}resolveKeyDirection(e){return e}getDomain(e){var t;let i=this.getSeriesDomain(e);return(null!==(t=this.dispatch("data-getDomain",{direction:e}))&&void 0!==t?t:[]).reduce((e,t)=>e.concat(t),i)}markNodeDataDirty(){this.nodeDataRefresh=!0}visibleChanged(){this.ctx.seriesStateManager.registerSeries(this)}getOpacity(){let{dimOpacity:e=1,enabled:t=!0}=this.highlightStyle.series;if(!t||1===e)return 1;switch(this.isItemIdHighlighted()){case tH.None:case tH.This:return 1;case tH.Other:default:return e}}getStrokeWidth(e){let{strokeWidth:t,enabled:i=!0}=this.highlightStyle.series;if(!i||void 0===t)return e;switch(this.isItemIdHighlighted()){case tH.This:return t;case tH.None:case tH.Other:return e}}isItemIdHighlighted(){var e,t;let{series:i}=null!==(t=null===(e=this.ctx.highlightManager)||void 0===e?void 0:e.getActiveHighlight())&&void 0!==t?t:{};return null==i?tH.None:i!==this?tH.Other:tH.This}getModuleTooltipParams(e){var t;return(null!==(t=this.dispatch("tooltip-getParams",{datum:e}))&&void 0!==t?t:[]).reduce((e,t)=>Object.assign(Object.assign({},t),e),{})}pickNode(e,t){let{pickModes:i,visible:s,rootGroup:n}=this;if(s&&n.visible)for(let s of i){let i;if(!t||t.includes(s)){switch(s){case tX.EXACT_SHAPE_MATCH:i=this.pickNodeExactShape(e);break;case tX.NEAREST_BY_MAIN_AXIS_FIRST:case tX.NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST:i=this.pickNodeMainAxisFirst(e,s===tX.NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST);break;case tX.NEAREST_NODE:i=this.pickNodeClosestDatum(e)}if(i)return{pickMode:s,match:i.datum,distance:i.distance}}}}pickNodeExactShape(e){let t=this.contentGroup.pickNode(e.x,e.y);return t&&{datum:t.datum,distance:0}}pickNodeClosestDatum(e){throw Error("AG Charts - Series.pickNodeClosestDatum() not implemented")}pickNodeMainAxisFirst(e,t){throw Error("AG Charts - Series.pickNodeMainAxisFirst() not implemented")}fireNodeClickEvent(e,t){this.fireEvent(new this.NodeClickEvent("nodeClick",e,t,this))}fireNodeDoubleClickEvent(e,t){this.fireEvent(new this.NodeClickEvent("nodeDoubleClick",e,t,this))}toggleSeriesItem(e,t){this.visible=t,this.nodeDataRefresh=!0,this.dispatch("visibility-changed",{itemId:e,enabled:t})}isEnabled(){return this.visible}getModuleMap(){return this.moduleMap}createModuleContext(){return Object.assign(Object.assign({},this.ctx),{series:this})}getLabelText(e,t,i=String){var s;return e.formatter&&null!==(s=this.ctx.callbackCache.call(e.formatter,Object.assign({seriesId:this.id},t)))&&void 0!==s?s:i(t.value)}getMarkerStyle(e,t,i=e.getStyle()){var s,n;let r=iZ({size:null!==(n=null===(s=t.datum.point)||void 0===s?void 0:s.size)&&void 0!==n?n:0},i);return e.formatter?iZ(this.ctx.callbackCache.call(e.formatter,Object.assign(Object.assign(Object.assign({seriesId:this.id},r),t),{datum:t.datum.datum})),r):r}updateMarkerStyle(e,t,i,s=t.getStyle(),{applyTranslation:n=!0}={}){let{point:r}=i.datum,a=this.getMarkerStyle(t,i,s),o=this.visible&&a.size>0&&r&&!isNaN(r.x)&&!isNaN(r.y);n?e.setProperties(Object.assign(Object.assign({visible:o},a),{translationX:null==r?void 0:r.x,translationY:null==r?void 0:r.y})):e.setProperties(Object.assign({visible:o},a)),"function"!=typeof t.shape||e.dirtyPath||(e.path.clear({trackChanges:!0}),e.updatePath(),e.checkPathDirty())}getMinRect(){}checkResize(e){let t={seriesRectWidth:null==e?void 0:e.width,seriesRectHeight:null==e?void 0:e.height},i=null!=Y(this.nodeDataDependencies,t);return i&&(this.nodeDataDependencies=t,this.markNodeDataDirty()),i}}function sT({id:e},t,i,s){tP(e,t,i,s,{opacity:0},{opacity:1},tL)}function sI({id:e},t,i,s){tP(e,t,i,s,{opacity:1},{opacity:0},tL)}function s_(e){return{opacity:1}}sR.highlightedZIndex=1e12,v([ea(ex),b("design:type",Object)],sR.prototype,"id",void 0),v([ea(ev),b("design:type",Object)],sR.prototype,"_visible",void 0),v([ea(ev),b("design:type",Object)],sR.prototype,"showInLegend",void 0),v([ea(ex),b("design:type",Object)],sR.prototype,"cursor",void 0),v([ea(e0),b("design:type",Object)],sR.prototype,"nodeClickRange",void 0),v([tD({changeValue:function(e,t){this.onSeriesGroupingChange(t,e)}}),b("design:type",Object)],sR.prototype,"seriesGrouping",void 0);let sP={days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]};function sB(e,t=new Date(e.getFullYear(),0,1)){let i=e.getTimezoneOffset()-t.getTimezoneOffset();return Math.floor((e.getTime()-t.getTime()+6e4*i)/864e5)}function sF(e,t){let i=new Date(e.getFullYear(),0,1).getDay(),s=new Date(e.getFullYear(),0,(t-i+7)%7+1);return s<=e?Math.floor(sB(e,s)/7)+1:0}let sj={a:e=>sP.shortDays[e.getDay()],A:e=>sP.days[e.getDay()],b:e=>sP.shortMonths[e.getMonth()],B:e=>sP.months[e.getMonth()],c:"%x, %X",d:(e,t)=>sz(e.getDate(),2,null!=t?t:"0"),e:"%_d",f:(e,t)=>sz(1e3*e.getMilliseconds(),6,null!=t?t:"0"),H:(e,t)=>sz(e.getHours(),2,null!=t?t:"0"),I:(e,t)=>{let i=e.getHours()%12;return 0===i?"12":sz(i,2,null!=t?t:"0")},j:(e,t)=>sz(sB(e)+1,3,null!=t?t:"0"),m:(e,t)=>sz(e.getMonth()+1,2,null!=t?t:"0"),M:(e,t)=>sz(e.getMinutes(),2,null!=t?t:"0"),L:(e,t)=>sz(e.getMilliseconds(),3,null!=t?t:"0"),p:e=>12>e.getHours()?"AM":"PM",Q:e=>String(e.getTime()),s:e=>String(Math.floor(e.getTime()/1e3)),S:(e,t)=>sz(e.getSeconds(),2,null!=t?t:"0"),u:e=>{let t=e.getDay();return t<1&&(t+=7),String(t%7)},U:(e,t)=>sz(sF(e,0),2,null!=t?t:"0"),V:(e,t)=>sz(function e(t,i=t.getFullYear()){let s=new Date(i,0,1).getDay(),n=new Date(i,0,(4-s+7)%7-3+1);return n<=t?Math.floor(sB(t,n)/7)+1:e(t,i-1)}(e),2,null!=t?t:"0"),w:(e,t)=>sz(e.getDay(),2,null!=t?t:"0"),W:(e,t)=>sz(sF(e,1),2,null!=t?t:"0"),x:"%-m/%-d/%Y",X:"%-I:%M:%S %p",y:(e,t)=>sz(e.getFullYear()%100,2,null!=t?t:"0"),Y:(e,t)=>sz(e.getFullYear(),4,null!=t?t:"0"),Z:e=>(function(e){let t=e.getTimezoneOffset(),i=Math.abs(t);return`${t>0?"-":"+"}${sz(Math.floor(i/60),2,"0")}${sz(Math.floor(i%60),2,"0")}`})(e),"%":()=>"%"},sG={_:" ",0:"0","-":""};function sz(e,t,i){let s=String(Math.floor(e));return s.length>=t?s:`${i.repeat(t-s.length)}${s}`}function sW(e){let t=[];for(;e.length>0;){let i=e.indexOf("%");if(0!==i){let s=i>0?e.substring(0,i):e;t.push(s)}if(i<0)break;let s=sG[e[i+1]];null!=s&&i++;let n=e[i+1],r=sj[n];if("function"==typeof r)t.push([r,s]);else if("string"==typeof r){let e=sW(r);t.push([e,s])}else t.push(`${null!=s?s:""}${n}`);e=e.substring(i+2)}return e=>{let i="number"==typeof e?new Date(e):e;return t.map(e=>"string"==typeof e?e:e[0](i,e[1])).join("")}}let sY=/(#\{(.*?)\})/g;function sV(e,t){let i=e.createElement("style");i.innerHTML=t,e.head.insertBefore(i,e.head.querySelector("style"))}let s$="ag-chart-tooltip",sX="ag-chart-dark-tooltip",sH=`
.${s$} {
    transition: transform 0.1s ease;
    display: table;
    position: fixed;
    left: 0px;
    top: 0px;
    white-space: nowrap;
    z-index: 99999;
    font: 12px Verdana, sans-serif;
    color: rgb(70, 70, 70);
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.08);
}

.${s$}-no-interaction {
    pointer-events: none;
    user-select: none;
}

.${s$}-no-animation {
    transition: none !important;
}

.${s$}-hidden {
    visibility: hidden;
}

.${s$}-title {
    position: relative;
    padding: 8px 14px;
    border-top-left-radius: 2px;
    border-top-right-radius: 2px;
    color: white;
    background-color: #888888;
    z-index: 1;
}

.${s$}-title:only-child {
    border-bottom-left-radius: 2px;
    border-bottom-right-radius: 2px;
}

.${s$}-content {
    padding: 6px 14px;
    line-height: 1.7em;
    background: white;
    border-bottom-left-radius: 2px;
    border-bottom-right-radius: 2px;
    border: 1px solid rgba(0, 0, 0, 0.15);
    overflow: hidden;
}

.${s$}-arrow::before {
    content: "";

    position: absolute;
    top: 100%;
    left: 50%;
    transform: translateX(-50%);

    border: 5px solid #d9d9d9;

    border-left-color: transparent;
    border-right-color: transparent;
    border-bottom-color: transparent;

    width: 0;
    height: 0;

    margin: 0 auto;
}

.${s$}-arrow::after {
    content: "";

    position: absolute;
    top: calc(100% - 1px);
    left: 50%;
    transform: translateX(-50%);

    border: 5px solid white;

    border-left-color: transparent;
    border-right-color: transparent;
    border-bottom-color: transparent;

    width: 0;
    height: 0;

    margin: 0 auto;
}

.${s$}.${sX} {
    color: white;
    background: #15181c;
}

.${s$}.${sX} .${s$}-content {
    border-color: rgba(255, 255, 255, 0.15);
}

.ag-chart-wrapper {
    box-sizing: border-box;
    overflow: hidden;
}
`;function sU(e,t){var i,s,n;if("string"==typeof e)return e;let{content:r=null!==(i=null==t?void 0:t.content)&&void 0!==i?i:"",title:a=null==t?void 0:t.title,color:o=null!==(s=null==t?void 0:t.color)&&void 0!==s?s:"white",backgroundColor:l=null!==(n=null==t?void 0:t.backgroundColor)&&void 0!==n?n:"#888"}=e,h=a?`<div class="${s$}-title"
        style="color: ${o}; background-color: ${l}">${a}</div>`:"",d=r?`<div class="${s$}-content">${r}</div>`:"";return`${h}${d}`}let sK=["pointer","node"],sq=el(e=>sK.includes(e),"expecting a position type keyword such as 'pointer' or 'node'");class sZ{constructor(){this.type="pointer",this.xOffset=0,this.yOffset=0}}v([ea(sq),b("design:type",String)],sZ.prototype,"type",void 0),v([ea(eR()),b("design:type",Number)],sZ.prototype,"xOffset",void 0),v([ea(eR()),b("design:type",Number)],sZ.prototype,"yOffset",void 0);class sJ{constructor(e,t,i,s){this.enableInteraction=!1,this.enabled=!0,this.showArrow=void 0,this.class=void 0,this.lastClass=void 0,this.delay=0,this.range="nearest",this.lastVisibilityChange=Date.now(),this.position=new sZ,this.showTimeout=0,this._showArrow=!0,this.tooltipRoot=s,this.window=i;let n=t.createElement("div");if(this.element=this.tooltipRoot.appendChild(n),this.element.classList.add(s$),this.canvasElement=e,"undefined"!=typeof IntersectionObserver){let e=new IntersectionObserver(e=>{for(let t of e)t.target===this.canvasElement&&0===t.intersectionRatio&&this.toggle(!1)},{root:this.tooltipRoot});e.observe(this.canvasElement),this.observer=e}0>sJ.tooltipDocuments.indexOf(t)&&(sV(t,sH),sJ.tooltipDocuments.push(t))}destroy(){let{parentNode:e}=this.element;e&&e.removeChild(this.element),this.observer&&this.observer.unobserve(this.canvasElement)}isVisible(){let{element:e}=this;return!e.classList.contains(s$+"-hidden")}updateClass(e,t){let{element:i,class:s,lastClass:n,enableInteraction:r,lastVisibilityChange:a}=this,o=this.isVisible(),l=!!e,h=1/0;if(o!==l){let e=Date.now();h=e-a,this.lastVisibilityChange=e}let d=(e,t)=>{let s=`${s$}-${e}`;t?i.classList.add(s):i.classList.remove(s)},u=!o&&l&&h>100;h>5&&d("no-animation",u),d("no-interaction",!r),d("hidden",!e),d("arrow",!!t),s!==n&&(n&&i.classList.remove(n),s&&i.classList.add(s),this.lastClass=s)}show(e,t,i=!1){var s,n,r,a,o,l,h;let{element:d,canvasElement:u}=this;if(void 0!==t)d.innerHTML=t;else if(!d.innerHTML){this.toggle(!1);return}let c=(e,t,i)=>Math.max(Math.min(t,i),e),p=null!==(n=null===(s=e.position)||void 0===s?void 0:s.xOffset)&&void 0!==n?n:0,g=null!==(a=null===(r=e.position)||void 0===r?void 0:r.yOffset)&&void 0!==a?a:0,f=u.getBoundingClientRect(),m=f.left+e.offsetX-d.clientWidth/2+p,y=f.top+e.offsetY-d.clientHeight-8+g,v=this.getWindowBoundingBox(),b=v.x+v.width-d.clientWidth-1,x=v.y+v.height-d.clientHeight,S=c(v.x,m,b),k=c(v.y,y,x),D=S!==m||k!==y,w=null!==(l=null!==(o=e.showArrow)&&void 0!==o?o:this.showArrow)&&void 0!==l?l:!D&&!p&&!g;if(this.updateShowArrow(w),d.style.transform=`translate(${Math.round(S)}px, ${Math.round(k)}px)`,this.enableInteraction=null!==(h=e.enableInteraction)&&void 0!==h&&h,this.delay>0&&!i){this.toggle(!1),this.showTimeout=this.window.setTimeout(()=>{this.toggle(!0)},this.delay);return}this.toggle(!0)}getWindowBoundingBox(){return new ts(0,0,this.window.innerWidth,this.window.innerHeight)}toggle(e){e||this.window.clearTimeout(this.showTimeout),this.updateClass(e,this._showArrow)}pointerLeftOntoTooltip(e){var t;if(!this.enableInteraction)return!1;let i=null===(t=e.sourceEvent.relatedTarget)||void 0===t?void 0:t.classList,s=!!["","-title","-content"].filter(e=>null==i?void 0:i.contains(`${s$}${e}`));return void 0!==i&&s}updateShowArrow(e){this._showArrow=e}}sJ.tooltipDocuments=[],v([ea(ev),b("design:type",Boolean)],sJ.prototype,"enabled",void 0),v([ea(eb),b("design:type",Boolean)],sJ.prototype,"showArrow",void 0),v([ea(eS),b("design:type",String)],sJ.prototype,"class",void 0),v([ea(eR(0)),b("design:type",Number)],sJ.prototype,"delay",void 0),v([ea(e0),b("design:type",Object)],sJ.prototype,"range",void 0);class sQ{constructor(){this.enabled=!1}}v([ea(ev),b("design:type",Object)],sQ.prototype,"enabled",void 0);class s0{constructor(){this.enabled=!0,this.showArrow=void 0,this.format=void 0,this.renderer=void 0,this.interaction=new sQ,this.position=new sZ}toTooltipHtml(e,t,i){var s,n,r;let a=null!==(s=null==i?void 0:i.format)&&void 0!==s?s:this.format,o=null!==(n=null==i?void 0:i.renderer)&&void 0!==n?n:this.renderer;return a?sU({content:a.replace(sY,function(...e){let[i,s]=e[2].split(":"),n=t[i];if("number"==typeof n){let e=s&&r&&r[s];if(e){let{locales:t,options:i}=e;return n.toLocaleString(t,i)}return String(n)}if(n instanceof Date){let e=s&&r&&r[s];return"string"==typeof e?sW(e)(n):n.toDateString()}return"string"==typeof n||(null==n?void 0:n.toString)?String(n):""})},e):o?sU(o(t),e):sU(e)}}function s1(e,t,i,s){let n=[i.convert(0),i.convert(1)],r=[s.convert(0),s.convert(1)],a=-(Math.PI/2)+ee(t),o=({radius:e})=>({innerRadius:n[0],outerRadius:n[0]+(n[1]-n[0])*e}),l=({radius:e})=>({innerRadius:r[0],outerRadius:r[0]+(r[1]-r[0])*e});return{nodes:{toFn:(e,t,i,{prevLive:s})=>{var n,r;let{startAngle:l,endAngle:h,innerRadius:d,outerRadius:u}=t,{stroke:c,fill:p}=t.sectorFormat;if("removed"===i&&s?(l=null===(n=s.datum)||void 0===n?void 0:n.endAngle,h=null===(r=s.datum)||void 0===r?void 0:r.endAngle):"removed"!==i||s||(l=a,h=a),"removed"===i){let e=o(t);d=e.innerRadius,u=e.outerRadius}return{startAngle:l,endAngle:h,outerRadius:u,innerRadius:d,stroke:c,fill:p}},fromFn:(t,i,s,{prevFromProps:n})=>{var r,o,h,d,u,c;let{startAngle:p,endAngle:g,innerRadius:f,outerRadius:m}=t,{fill:y,stroke:v}=i.sectorFormat;if("unknown"!==s&&("added"!==s||n)?"added"===s&&n&&(p=null!==(r=n.endAngle)&&void 0!==r?r:a,g=null!==(o=n.endAngle)&&void 0!==o?o:a,f=null!==(h=n.innerRadius)&&void 0!==h?h:i.innerRadius,m=null!==(d=n.outerRadius)&&void 0!==d?d:i.outerRadius):(p=a,g=a,f=i.innerRadius,m=i.outerRadius),"added"===s&&!e){let e=l(i);f=e.innerRadius,m=e.outerRadius}return"updated"===s&&(y=null!==(u=t.fill)&&void 0!==u?u:y,v=null!==(c=t.stroke)&&void 0!==c?c:v),{startAngle:p,endAngle:g,innerRadius:f,outerRadius:m,fill:y,stroke:v}}},innerCircle:{fromFn:(e,t)=>{var i,s,n;return{size:null!==(n=null!==(s=null===(i=e.previousDatum)||void 0===i?void 0:i.radius)&&void 0!==s?s:e.size)&&void 0!==n?n:0}},toFn:(e,t)=>{var i;return{size:null!==(i=t.radius)&&void 0!==i?i:0}}}}}function s2(e,t){return{startAngle:t.startAngle,endAngle:t.endAngle,innerRadius:t.innerRadius,outerRadius:t.outerRadius,fill:t.sectorFormat.fill,stroke:t.sectorFormat.stroke}}function s5(e,t){let i=tR(e),s=i?e:[];for(let s of i?[]:e){for(let e of s.nodes()){let i=t(e,e.datum);e.setProperties(i)}s.cleanup()}for(let e of s){let i=t(e,e.datum);e.setProperties(i)}}v([ea(ev),b("design:type",Object)],s0.prototype,"enabled",void 0),v([ea(eb),b("design:type",Boolean)],s0.prototype,"showArrow",void 0),v([ea(eS),b("design:type",String)],s0.prototype,"format",void 0),v([ea(ey),b("design:type",Function)],s0.prototype,"renderer",void 0);var s3=Object.freeze({__proto__:null,resetMotion:s5});class s4{constructor(e,t,i){this.states=t,this.preTransitionCb=i,this.debug=B.create(!0,"animation"),this.state=e,this.debug(`%c${this.constructor.name} | init -> ${e}`,"color: green")}transition(e,t){var i,s;let n=this.states[this.state],r=null==n?void 0:n[e];if(!r){this.debug(`%c${this.constructor.name} | ${this.state} -> ${e} -> ${this.state}`,"color: grey");return}let a=this.state;return"string"==typeof r?a=r:"object"==typeof r&&(a=r.target),this.debug(`%c${this.constructor.name} | ${this.state} -> ${e} -> ${a}`,"color: green"),null===(i=this.preTransitionCb)||void 0===i||i.call(this,this.state,a),this.state=a,"function"==typeof r?r(t):"object"==typeof r&&(null===(s=r.action)||void 0===s||s.call(r,t)),this.state}}class s6 extends sR{isContinuous(){var e,t;return{isContinuousX:iL.is(null===(e=this.axes[tG.X])||void 0===e?void 0:e.scale),isContinuousY:iL.is(null===(t=this.axes[tG.Y])||void 0===t?void 0:t.scale)}}requestDataModel(e,t,i){var s;return x(this,void 0,void 0,function*(){let n=i.props;for(let e of null!==(s=this.dispatch("data-prerequest",this.isContinuous()))&&void 0!==s?s:[])n.push(...e);let{dataModel:r,processedData:a}=yield e.request(this.id,null!=t?t:[],Object.assign(Object.assign({},i),{props:n}));return this.dataModel=r,this.processedData=a,this.dispatch("data-processed",{dataModel:r,processedData:a}),{dataModel:r,processedData:a}})}isProcessedDataAnimatable(){var e,t;let i=null===(t=null===(e=this.processedData)||void 0===e?void 0:e.reduced)||void 0===t?void 0:t.animationValidation;if(!i)return!0;let{orderedKeys:s,uniqueKeys:n}=i;return!!s&&!!n}checkProcessedDataAnimatable(){this.isProcessedDataAnimatable()||this.ctx.animationManager.skipCurrentBatch()}}class s8 extends s6{constructor(e){var{useLabelLayer:t=!1,pickModes:i=[tX.EXACT_SHAPE_MATCH],canHaveAxes:s=!1,animationResetFns:n}=e;super(Object.assign(Object.assign({},y(e,["useLabelLayer","pickModes","canHaveAxes","animationResetFns"])),{useLabelLayer:t,pickModes:i,contentGroupVirtual:!1,directionKeys:{[tG.X]:["angleKey"],[tG.Y]:["radiusKey"]},directionNames:{[tG.X]:["angleName"],[tG.Y]:["radiusName"]},canHaveAxes:s})),this.sectorGroup=this.contentGroup.appendChild(new i_),this.itemSelection=iP.select(this.sectorGroup,()=>this.nodeFactory(),!1),this.labelSelection=iP.select(this.labelGroup,tm,!1),this.highlightSelection=iP.select(this.highlightGroup,()=>this.nodeFactory()),this.centerX=0,this.centerY=0,this.radius=0,this.sectorGroup.zIndexSubOrder=[()=>this._declarationOrder,1],this.animationResetFns=n,this.animationState=new s4("empty",{empty:{update:{target:"ready",action:e=>this.animateEmptyUpdateReady(e)}},ready:{updateData:"waiting",clear:"clearing",highlight:e=>this.animateReadyHighlight(e),highlightMarkers:e=>this.animateReadyHighlightMarkers(e),resize:e=>this.animateReadyResize(e)},waiting:{update:{target:"ready",action:e=>this.animateWaitingUpdateReady(e)}},clearing:{update:{target:"empty",action:e=>this.animateClearingUpdateEmpty(e)}}},()=>this.checkProcessedDataAnimatable())}getLabelData(){return[]}computeLabelsBBox(e,t){return null}resetAllAnimation(){var e;let{item:t,label:i}=null!==(e=this.animationResetFns)&&void 0!==e?e:{};this.ctx.animationManager.stopByAnimationGroupId(this.id),t&&s5([this.itemSelection,this.highlightSelection],t),i&&s5([this.labelSelection],i),this.itemSelection.cleanup(),this.labelSelection.cleanup(),this.highlightSelection.cleanup()}animateEmptyUpdateReady(e){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation()}animateWaitingUpdateReady(e){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation()}animateReadyHighlight(e){var t;let{item:i}=null!==(t=this.animationResetFns)&&void 0!==t?t:{};i&&s5([this.highlightSelection],i)}animateReadyHighlightMarkers(e){}animateReadyResize(e){this.resetAllAnimation()}animateClearingUpdateEmpty(e){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation()}animationTransitionClear(){this.animationState.transition("clear",this.getAnimationData())}getAnimationData(e){return{seriesRect:e}}}class s9 extends sN{constructor(e,t,i,s){super(e,t,i,s),this.angleKey=s.angleKey,this.radiusKey=s.radiusKey,this.calloutLabelKey=s.calloutLabelKey,this.sectorLabelKey=s.sectorLabelKey}}(t7=tU||(tU={}))[t7.Sector=0]="Sector",t7[t7.Callout=1]="Callout",t7[t7.Label=2]="Label";class s7 extends sl{constructor(){super(...arguments),this.offset=3,this.minAngle=0,this.minSpacing=4,this.maxCollisionOffset=50,this.avoidCollisions=!0}}v([ea(eR(0)),b("design:type",Object)],s7.prototype,"offset",void 0),v([ea(eR(0)),b("design:type",Object)],s7.prototype,"minAngle",void 0),v([ea(eR(0)),b("design:type",Object)],s7.prototype,"minSpacing",void 0),v([ea(eR(0)),b("design:type",Object)],s7.prototype,"maxCollisionOffset",void 0),v([ea(ev),b("design:type",Object)],s7.prototype,"avoidCollisions",void 0);class ne extends sl{constructor(){super(...arguments),this.positionOffset=0,this.positionRatio=.5}}v([ea(eR()),b("design:type",Object)],ne.prototype,"positionOffset",void 0),v([ea(eR(0,1)),b("design:type",Object)],ne.prototype,"positionRatio",void 0);class nt{constructor(){this.length=10,this.strokeWidth=1}}v([ea(eA),b("design:type",Array)],nt.prototype,"colors",void 0),v([ea(eR(0)),b("design:type",Number)],nt.prototype,"length",void 0),v([ea(eR(0)),b("design:type",Number)],nt.prototype,"strokeWidth",void 0);class ni extends tw{constructor(){super(...arguments),this.showInLegend=!1}}v([ea(ev),b("design:type",Object)],ni.prototype,"showInLegend",void 0);class ns extends sl{constructor(){super(...arguments),this.text="",this.margin=2}}v([ea(ex),b("design:type",Object)],ns.prototype,"text",void 0),v([ea(eR()),b("design:type",Object)],ns.prototype,"margin",void 0);class nn{constructor(){this.fill="transparent",this.fillOpacity=1}}v([ea(eN),b("design:type",Object)],nn.prototype,"fill",void 0),v([ea(eT(0,1)),b("design:type",Object)],nn.prototype,"fillOpacity",void 0);class nr extends s8{constructor(e){super({moduleCtx:e,useLabelLayer:!0,animationResetFns:{item:s2,label:s_}}),this.previousRadiusScale=new iR,this.radiusScale=new iR,this.backgroundGroup=this.rootGroup.appendChild(new i_({name:`${this.id}-background`,layer:!0,zIndex:t$.SERIES_BACKGROUND_ZINDEX})),this.innertCircleGroup=this.backgroundGroup.appendChild(new i_({name:`${this.id}-innerCircle`})),this.nodeData=[],this.seriesItemEnabled=[],this.title=void 0,this.calloutLabel=new s7,this.sectorLabel=new ne,this.calloutLine=new nt,this.tooltip=new s0,this.angleKey="",this.angleName="",this.innerLabels=[],this.innerCircle=void 0,this.radiusKey=void 0,this.radiusName=void 0,this.radiusMin=void 0,this.radiusMax=void 0,this.calloutLabelKey=void 0,this.calloutLabelName=void 0,this.sectorLabelKey=void 0,this.sectorLabelName=void 0,this.legendItemKey=void 0,this.fills=Object.values(sp),this.strokes=Object.values(sg),this.fillOpacity=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.formatter=void 0,this.rotation=0,this.outerRadiusOffset=0,this.outerRadiusRatio=1,this.innerRadiusOffset=0,this.innerRadiusRatio=1,this.strokeWidth=1,this.shadow=void 0,this.highlightStyle=new sL,this.surroundingRadius=void 0,this.NodeClickEvent=s9,this.angleScale=new iR,this.angleScale.domain=[0,1],this.angleScale.range=[-Math.PI,Math.PI].map(e=>e+Math.PI/2);let t=new i_({name:"pieCalloutLabels"}),i=new i_({name:"pieSectorLabels"}),s=new i_({name:"innerLabels"});this.labelGroup.append(t),this.labelGroup.append(i),this.labelGroup.append(s),this.calloutLabelSelection=iP.select(t,i_),this.sectorLabelSelection=iP.select(i,tm),this.innerLabelsSelection=iP.select(s,tm),this.innerCircleSelection=iP.select(this.innertCircleGroup,sc)}addChartEventListeners(){var e;null===(e=this.ctx.chartEventManager)||void 0===e||e.addListener("legend-item-click",e=>this.onLegendItemClick(e))}visibleChanged(){this.processSeriesItemEnabled()}processSeriesItemEnabled(){var e;let{data:t,visible:i}=this;this.seriesItemEnabled=null!==(e=null==t?void 0:t.map(()=>i))&&void 0!==e?e:[]}nodeFactory(){return new iX}getSeriesDomain(e){return e===tG.X?this.angleScale.domain:this.radiusScale.domain}processData(e){var t,i;return x(this,void 0,void 0,function*(){let{data:s}=this,{angleKey:n,radiusKey:r,calloutLabelKey:a,sectorLabelKey:o,legendItemKey:l,seriesItemEnabled:h}=this;if(null==n||null==s)return;let d=!this.ctx.animationManager.isSkipped(),u=[],c=[];l?u.push(sw(this,l,!1,{id:"legendItemKey"})):a?u.push(sw(this,a,!1,{id:"calloutLabelKey"})):o&&u.push(sw(this,o,!1,{id:"sectorLabelKey"})),r&&c.push(function(e,t,i={}){let{min:s=-1/0,max:n=1/0}=i,r=y(i,["min","max"]);return Object.assign({scopes:[e.id],type:"value",property:t,valueType:"range",validation:sk,processor:()=>e=>"number"!=typeof e||isNaN(e)?e:Math.min(Math.max(e,s),n)},r)}(this,r,{id:"radiusValue",min:null!==(t=this.radiusMin)&&void 0!==t?t:0,max:this.radiusMax}),sO(this,r,!0,{id:"radiusRaw"}),si(this,{id:"radiusValue"},[0,1],1,null!==(i=this.radiusMin)&&void 0!==i?i:0,this.radiusMax)),a&&c.push(sO(this,a,!1,{id:"calloutLabelValue"})),o&&c.push(sO(this,o,!1,{id:"sectorLabelValue"})),l&&c.push(sO(this,l,!1,{id:"legendItemValue"})),d&&this.processedData&&u.length>0&&c.push(sa(this.processedData)),c.push(ss(this)),s=s.map((e,t)=>h[t]?e:Object.assign(Object.assign({},e),{[n]:0})),yield this.requestDataModel(e,s,{props:[...u,function(e,t,i,s={}){let{onlyPositive:n}=s;return Object.assign(Object.assign({},sO(e,t,i,y(s,["onlyPositive"]))),{processor:()=>{let e=0;return t=>"number"!=typeof t||isNaN(t)?t:e+=n?Math.max(0,t):t}})}(this,n,!0,{id:"angleValue",onlyPositive:!0}),sO(this,n,!0,{id:"angleRaw"}),si(this,{id:"angleValue"},[0,1],0,0),...c]}),this.animationState.transition("updateData")})}maybeRefreshNodeData(){return x(this,void 0,void 0,function*(){if(!this.nodeDataRefresh)return;let[{nodeData:e=[]}={}]=yield this.createNodeData();this.nodeData=e,this.nodeDataRefresh=!1})}getProcessedDataIndexes(e){let t=e.resolveProcessedDataIndexById(this,"angleValue").index,i=this.radiusKey?e.resolveProcessedDataIndexById(this,"radiusValue").index:-1;return{angleIdx:t,radiusIdx:i,calloutLabelIdx:this.calloutLabelKey?e.resolveProcessedDataIndexById(this,"calloutLabelValue").index:-1,sectorLabelIdx:this.sectorLabelKey?e.resolveProcessedDataIndexById(this,"sectorLabelValue").index:-1,legendItemIdx:this.legendItemKey?e.resolveProcessedDataIndexById(this,"legendItemValue").index:-1}}createNodeData(){return x(this,void 0,void 0,function*(){let{id:e,processedData:t,dataModel:i,rotation:s,angleScale:n}=this;if(!t||!i||"ungrouped"!==t.type)return[];let{angleIdx:r,radiusIdx:a,calloutLabelIdx:o,sectorLabelIdx:l,legendItemIdx:h}=this.getProcessedDataIndexes(i),d=0,u=t.data.map((e,t)=>{var i;let{datum:u,values:c}=e,p=c[r],g=n.convert(d)+ee(s);d=p;let f=n.convert(d)+ee(s),m=Math.abs(f-g),y=g+m/2,v=c[r+1],b=a>=0&&null!==(i=c[a])&&void 0!==i?i:1,x=a>=0?c[a+1]:void 0,S=h>=0?c[h]:void 0,k=this.getLabels(u,y,m,!0,c[o],c[l],S),D=this.getSectorFormat(u,t,!1);return Object.assign({itemId:t,series:this,datum:u,index:t,angleValue:v,midAngle:y,midCos:Math.cos(y),midSin:Math.sin(y),startAngle:g,endAngle:f,sectorFormat:D,radiusValue:x,radius:b,innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(b),0),legendItemValue:S},k)});return[{itemId:e,nodeData:u,labelData:u}]})}getLabels(e,t,i,s,n,r,a){let{calloutLabel:o,sectorLabel:l,legendItemKey:h}=this,d=!s||o.enabled?this.calloutLabelKey:void 0,u=!s||l.enabled?this.sectorLabelKey:void 0;if(!d&&!u&&!h)return{};let c={datum:e,angleKey:this.angleKey,angleName:this.angleName,radiusKey:this.radiusKey,radiusName:this.radiusName,calloutLabelKey:this.calloutLabelKey,calloutLabelName:this.calloutLabelName,sectorLabelKey:this.sectorLabelKey,sectorLabelName:this.sectorLabelName,legendItemKey:this.legendItemKey},p={};return d&&i>ee(o.minAngle)&&(p.calloutLabel=Object.assign(Object.assign({},this.getTextAlignment(t)),{text:this.getLabelText(o,Object.assign(Object.assign({},c),{value:n})),hidden:!1,collisionTextAlign:void 0,collisionOffsetY:0,box:void 0})),u&&(p.sectorLabel={text:this.getLabelText(l,Object.assign(Object.assign({},c),{value:r}))}),null!=h&&null!=a&&(p.legendItem={key:h,text:a}),p}getTextAlignment(e){var t,i;let s=[{textAlign:"center",textBaseline:"bottom"},{textAlign:"left",textBaseline:"middle"},{textAlign:"center",textBaseline:"hanging"},{textAlign:"right",textBaseline:"middle"}],n=(t=Math.floor((Q(e)- -3*Math.PI/4)/(Math.PI/2)),i=s.length,t>=0?Math.floor(t%i):Math.floor(t%i+i));return s[n]}getSectorFormat(e,t,i){var s,n,r,a,o;let l;let{angleKey:h,radiusKey:d,fills:u,strokes:c,formatter:p,id:g,ctx:{callbackCache:f,highlightManager:m}}=this,y=m.getActiveHighlight(),v=i&&(null==y?void 0:y.series)===this&&t===y.itemId,{fill:b,fillOpacity:x,stroke:S,strokeWidth:k,strokeOpacity:D}=iZ(v&&this.highlightStyle.item,{fill:u[t%u.length],fillOpacity:this.fillOpacity,stroke:c[t%c.length],strokeWidth:this.getStrokeWidth(this.strokeWidth),strokeOpacity:this.getOpacity()});return p&&(l=f.call(p,{datum:e,angleKey:h,radiusKey:d,fill:b,stroke:S,fills:u,strokes:c,strokeWidth:k,highlighted:v,seriesId:g})),{fill:null!==(s=null==l?void 0:l.fill)&&void 0!==s?s:b,fillOpacity:null!==(n=null==l?void 0:l.fillOpacity)&&void 0!==n?n:x,stroke:null!==(r=null==l?void 0:l.stroke)&&void 0!==r?r:S,strokeWidth:null!==(a=null==l?void 0:l.strokeWidth)&&void 0!==a?a:k,strokeOpacity:null!==(o=null==l?void 0:l.strokeOpacity)&&void 0!==o?o:D}}getInnerRadius(){let{radius:e,innerRadiusRatio:t,innerRadiusOffset:i}=this,s=e*t+i;return s===e||s<0?0:s}getOuterRadius(){return Math.max(this.radius*this.outerRadiusRatio+this.outerRadiusOffset,0)}updateRadiusScale(e){let t=[this.getInnerRadius(),this.getOuterRadius()];this.radiusScale.range=t,e&&(this.previousRadiusScale.range=t),this.nodeData=this.nodeData.map(e=>{var{radius:t}=e;return Object.assign(Object.assign({},y(e,["radius"])),{radius:t,innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(t),0)})})}getTitleTranslationY(){var e,t;let i=Math.max(0,this.radiusScale.range[1]);return 0===i?NaN:-i-(2+(null!==(t=null===(e=this.title)||void 0===e?void 0:e.spacing)&&void 0!==t?t:0))-Math.max(0,-i)}update({seriesRect:e}){return x(this,void 0,void 0,function*(){let{title:t}=this,i={seriesRectWidth:null==e?void 0:e.width,seriesRectHeight:null==e?void 0:e.height},s=null!=Y(this.nodeDataDependencies,i);if(s&&(this.nodeDataDependencies=i),yield this.maybeRefreshNodeData(),this.updateTitleNodes(),this.updateRadiusScale(s),this.contentGroup.translationX=this.centerX,this.contentGroup.translationY=this.centerY,this.highlightGroup.translationX=this.centerX,this.highlightGroup.translationY=this.centerY,this.backgroundGroup.translationX=this.centerX,this.backgroundGroup.translationY=this.centerY,this.labelGroup&&(this.labelGroup.translationX=this.centerX,this.labelGroup.translationY=this.centerY),t){let e=this.getTitleTranslationY(),i=t.node.computeBBox();t.node.visible=t.enabled&&isFinite(e)&&!this.bboxIntersectsSurroundingSeries(i,0,e),t.node.translationY=isFinite(e)?e:0}this.updateNodeMidPoint(),yield this.updateSelections(),yield this.updateNodes(e)})}updateTitleNodes(){var e,t;let{title:i,oldTitle:s}=this;s!==i&&(s&&(null===(e=this.labelGroup)||void 0===e||e.removeChild(s.node)),i&&(i.node.textBaseline="bottom",null===(t=this.labelGroup)||void 0===t||t.appendChild(i.node)),this.oldTitle=i)}updateNodeMidPoint(){this.nodeData.forEach(e=>{let t=e.innerRadius+(e.outerRadius-e.innerRadius)/2;e.midPoint={x:e.midCos*Math.max(0,t),y:e.midSin*Math.max(0,t)}})}updateSelections(){return x(this,void 0,void 0,function*(){yield this.updateGroupSelection(),this.updateInnerCircleSelection()})}updateGroupSelection(){return x(this,void 0,void 0,function*(){let{itemSelection:e,highlightSelection:t,calloutLabelSelection:i,sectorLabelSelection:s,innerLabelsSelection:n}=this,r=(e,t)=>{let i=this.nodeData;t&&(i=i.map(e=>Object.assign(Object.assign({},e),{sectorFormat:Object.assign({},e.sectorFormat)}))),e.update(i),this.ctx.animationManager.isSkipped()&&e.cleanup()};r(e,!1),r(t,!0),i.update(this.nodeData,e=>{let t=new iB;t.tag=tU.Callout,t.pointerEvents=tW.None,e.appendChild(t);let i=new tm;i.tag=tU.Label,i.pointerEvents=tW.None,e.appendChild(i)}),s.update(this.nodeData,e=>{e.pointerEvents=tW.None}),n.update(this.innerLabels,e=>{e.pointerEvents=tW.None})})}updateInnerCircleSelection(){let{innerCircle:e}=this,t=0,i=this.getInnerRadius();i>0&&(t=Math.ceil(2*Math.min(i,this.getOuterRadius())+1));let s=e?[{radius:t}]:[];this.innerCircleSelection.update(s)}updateNodes(e){return x(this,void 0,void 0,function*(){let t=this.ctx.highlightManager.getActiveHighlight(),i=this.seriesItemEnabled.indexOf(!0)>=0;this.rootGroup.visible=i,this.backgroundGroup.visible=i,this.contentGroup.visible=i,this.highlightGroup.visible=i&&(null==t?void 0:t.series)===this,this.labelGroup&&(this.labelGroup.visible=i),this.contentGroup.opacity=this.getOpacity(),this.innerCircleSelection.each((e,{radius:t})=>{var i,s;e.setProperties({fill:null===(i=this.innerCircle)||void 0===i?void 0:i.fill,opacity:null===(s=this.innerCircle)||void 0===s?void 0:s.fillOpacity,size:t})});let s=(e,t,i,s)=>{let n=this.getSectorFormat(t.datum,t.itemId,s);t.sectorFormat.fill=n.fill,t.sectorFormat.stroke=n.stroke;let r=this.ctx.animationManager.isSkipped();r&&(e.startAngle=t.startAngle,e.endAngle=t.endAngle,e.innerRadius=t.innerRadius,e.outerRadius=t.outerRadius),(s||r)&&(e.fill=n.fill,e.stroke=n.stroke),e.strokeWidth=n.strokeWidth,e.fillOpacity=n.fillOpacity,e.strokeOpacity=this.strokeOpacity,e.lineDash=this.lineDash,e.lineDashOffset=this.lineDashOffset,e.fillShadow=this.shadow,e.lineJoin="round"};this.itemSelection.each((e,t,i)=>s(e,t,i,!1)),this.highlightSelection.each((e,i,n)=>{let r=(null==t?void 0:t.series)===this&&e.datum.itemId===t.itemId;s(e,i,n,r),e.visible=r}),this.updateCalloutLineNodes(),this.updateCalloutLabelNodes(e),this.updateSectorLabelNodes(),this.updateInnerLabelNodes(),this.animationState.transition("update")})}updateCalloutLineNodes(){var e;let{calloutLine:t}=this,i=t.length,s=t.strokeWidth,n=null!==(e=t.colors)&&void 0!==e?e:this.strokes,{offset:r}=this.calloutLabel;this.calloutLabelSelection.selectByTag(tU.Callout).forEach((e,t)=>{let a=e.datum,{calloutLabel:o,outerRadius:l}=a;if((null==o?void 0:o.text)&&!o.hidden&&0!==l){e.visible=!0,e.strokeWidth=s,e.stroke=n[t%n.length],e.fill=void 0;let h=a.midCos*l,d=a.midSin*l,u=a.midCos*(l+i),c=a.midSin*(l+i);if((o.collisionTextAlign||0!==o.collisionOffsetY)&&null!=o.box){let e=o.box,t=u,i=c;u<e.x?t=e.x:u>e.x+e.width&&(t=e.x+e.width),c<e.y?i=e.y:c>e.y+e.height&&(i=e.y+e.height);let s=t-u,n=i-c,a=Math.sqrt(Math.pow(s,2)+Math.pow(n,2)),l=a-r;l>0&&(u+=s*l/a,c+=n*l/a)}e.x1=h,e.y1=d,e.x2=u,e.y2=c}else e.visible=!1})}getLabelOverflow(e,t,i){let s=i.x-this.centerX,n=i.x+i.width-this.centerX,r=i.y-this.centerY,a=i.y+i.height-this.centerY,o=1;t.x+1<s?o=(t.x+t.width-s)/t.width:t.x+t.width-1>n&&(o=(n-t.x)/t.width);let l=t.y+1<r||t.y+t.height-1>a;return{textLength:1===o?e.length:Math.floor(e.length*o)-1,hasVerticalOverflow:l,hasSurroundingSeriesOverflow:this.bboxIntersectsSurroundingSeries(t)}}bboxIntersectsSurroundingSeries(e,t=0,i=0){let{surroundingRadius:s}=this;if(null==s)return!1;let n=[{x:e.x+t,y:e.y+i},{x:e.x+e.width+t,y:e.y+i},{x:e.x+e.width+t,y:e.y+e.height+i},{x:e.x+t,y:e.y+e.height+i}],r=Math.pow(s,2);return n.some(e=>Math.pow(e.x,2)+Math.pow(e.y,2)>r)}computeCalloutLabelCollisionOffsets(){let{radiusScale:e,calloutLabel:t,calloutLine:i}=this,{offset:s,minSpacing:n}=t,r=e.convert(0),a=e=>!e.calloutLabel||0===e.outerRadius,o=this.nodeData,l=this.nodeData.filter(e=>!a(e));if(l.forEach(e=>{let t=e.calloutLabel;null!=t&&(t.hidden=!1,t.collisionTextAlign=void 0,t.collisionOffsetY=0)}),l.length<=1)return;let h=l.filter(e=>e.midCos<0).sort((e,t)=>e.midSin-t.midSin),d=l.filter(e=>e.midCos>=0).sort((e,t)=>e.midSin-t.midSin),u=l.filter(e=>{var t;return e.midSin<0&&(null===(t=e.calloutLabel)||void 0===t?void 0:t.textAlign)==="center"}).sort((e,t)=>e.midCos-t.midCos),c=l.filter(e=>{var t;return e.midSin>=0&&(null===(t=e.calloutLabel)||void 0===t?void 0:t.textAlign)==="center"}).sort((e,t)=>e.midCos-t.midCos),p=new tm,g=e=>{var t;let n=e.calloutLabel;if(null==n)return new ts(0,0,0,0);let r=e.outerRadius+i.length+s,a=e.midCos*r,o=e.midSin*r+n.collisionOffsetY;return p.text=n.text,p.x=a,p.y=o,p.setFont(this.calloutLabel),p.setAlign({textAlign:null!==(t=n.collisionTextAlign)&&void 0!==t?t:n.textAlign,textBaseline:n.textBaseline}),p.computeBBox()},f=(e,t,i)=>{let s=g(e).grow(n/2),r=g(t).grow(n/2);if(s.x<r.x+r.width&&s.x+s.width>r.x&&("to-top"===i?s.y<r.y+r.height:s.y+s.height>r.y)){let e="to-top"===i?s.y-r.y-r.height:s.y+s.height-r.y;t.calloutLabel.collisionOffsetY=e}},m=e=>{let t=e.slice().sort((e,t)=>Math.abs(e.midSin)-Math.abs(t.midSin))[0],i=e.indexOf(t);for(let t=i-1;t>=0;t--)f(e[t+1],e[t],"to-top");for(let t=i+1;t<e.length;t++)f(e[t-1],e[t],"to-bottom")},y=e=>{let t=l.some(e=>0!==e.calloutLabel.collisionOffsetY),i=e.map(e=>g(e)),s=i.map(e=>e.clone().grow(n/2)),a=!1;for(let t=0;t<s.length&&!a;t++){let i=s[t];for(let n=t+1;n<e.length;n++){let e=s[n];if(i.collidesBBox(e)){a=!0;break}}}let h=o.map(e=>{let{startAngle:t,endAngle:i,outerRadius:s}=e;return{startAngle:t,endAngle:i,innerRadius:r,outerRadius:s}}),d=i.some(e=>h.some(t=>(function(e,t){let i={x:e.x,y:e.y},s={x:e.x+e.width,y:e.y},n={x:e.x,y:e.y+e.height},r={x:e.x+e.width,y:e.y+e.height};return iW({start:i,end:s},t)||iW({start:n,end:r},t)})(e,t)));(a||t||d)&&e.filter(e=>"center"===e.calloutLabel.textAlign).forEach(e=>{let t=e.calloutLabel;e.midCos<0?t.collisionTextAlign="right":e.midCos>0?t.collisionTextAlign="left":t.collisionTextAlign="center"})};m(h),m(d),y(u),y(c)}updateCalloutLabelNodes(e){let{radiusScale:t,calloutLabel:i,calloutLine:s}=this,n=s.length,{offset:r,color:a}=i,o=new tm;this.calloutLabelSelection.selectByTag(tU.Label).forEach(s=>{var l;let{datum:h}=s,d=h.calloutLabel,u=Math.max(0,t.convert(h.radius));if(!(null==d?void 0:d.text)||0===u||d.hidden){s.visible=!1;return}let c=u+n+r,p=h.midCos*c,g=h.midSin*c+d.collisionOffsetY,f={textAlign:null!==(l=d.collisionTextAlign)&&void 0!==l?l:d.textAlign,textBaseline:d.textBaseline};o.text=d.text,o.x=p,o.y=g,o.setFont(this.calloutLabel),o.setAlign(f);let m=o.computeBBox(),y=d.text,v=!0;if(i.avoidCollisions){let{textLength:t,hasVerticalOverflow:i}=this.getLabelOverflow(d.text,m,e);y=d.text.length===t?d.text:`${d.text.substring(0,t)}`,v=!i}s.text=y,s.x=p,s.y=g,s.setFont(this.calloutLabel),s.setAlign(f),s.fill=a,s.visible=v})}computeLabelsBBox(e,t){var i;return x(this,void 0,void 0,function*(){let s;let{calloutLabel:n,calloutLine:r}=this,a=r.length,{offset:o,maxCollisionOffset:l,minSpacing:h}=n;if(!n.avoidCollisions)return null;yield this.maybeRefreshNodeData(),this.updateRadiusScale(!1),this.computeCalloutLabelCollisionOffsets();let d=[],u=new tm;if((null===(i=this.title)||void 0===i?void 0:i.text)&&this.title.enabled){let e=this.getTitleTranslationY();isFinite(e)&&(u.text=this.title.text,u.x=0,u.y=e,u.setFont(this.title),u.setAlign({textBaseline:"bottom",textAlign:"center"}),s=u.computeBBox(),d.push(s))}return(this.nodeData.forEach(i=>{var n;let r=i.calloutLabel;if(!r||0===i.outerRadius)return null;let c=i.outerRadius+a+o,p=i.midCos*c,g=i.midSin*c+r.collisionOffsetY;u.text=r.text,u.x=p,u.y=g,u.setFont(this.calloutLabel),u.setAlign({textAlign:null!==(n=r.collisionTextAlign)&&void 0!==n?n:r.textAlign,textBaseline:r.textBaseline});let f=u.computeBBox();if(r.box=f,Math.abs(r.collisionOffsetY)>l){r.hidden=!0;return}if(s){let e=t.y-this.centerY,i=new ts(s.x-h,e,s.width+2*h,s.y+s.height+h-e);if(f.collidesBBox(i)){r.hidden=!0;return}}if(e.hideWhenNecessary){let{textLength:e,hasVerticalOverflow:i,hasSurroundingSeriesOverflow:s}=this.getLabelOverflow(r.text,f,t),n=r.text.length>2&&e<2;if(i||n||s){r.hidden=!0;return}}r.hidden=!1,d.push(f)}),0===d.length)?null:ts.merge(d)})}updateSectorLabelNodes(){let{radiusScale:e}=this,t=e.convert(0),{fontSize:i,fontStyle:s,fontWeight:n,fontFamily:r,positionOffset:a,positionRatio:o,color:l}=this.sectorLabel,h=t>0,d=1===this.seriesItemEnabled.filter(Boolean).length;this.sectorLabelSelection.each((e,u)=>{let{sectorLabel:c,outerRadius:p}=u,g=!1;if(c&&0!==p){let f=t*(1-o)+p*o+a;e.fill=l,e.fontStyle=s,e.fontWeight=n,e.fontSize=i,e.fontFamily=r,e.text=c.text,!h&&d?(e.x=0,e.y=0):(e.x=u.midCos*f,e.y=u.midSin*f),e.textAlign="center",e.textBaseline="middle";let m=e.computeBBox(),y=[[m.x,m.y],[m.x+m.width,m.y],[m.x+m.width,m.y+m.height],[m.x,m.y+m.height]],{startAngle:v,endAngle:b}=u,x={startAngle:v,endAngle:b,innerRadius:t,outerRadius:p};y.every(([e,t])=>iz(e,t,x))&&(g=!0)}e.visible=g})}updateInnerLabelNodes(){let e=[],t=[];this.innerLabelsSelection.each((i,s)=>{let{fontStyle:n,fontWeight:r,fontSize:a,fontFamily:o,color:l}=s;i.fontStyle=n,i.fontWeight=r,i.fontSize=a,i.fontFamily=o,i.text=s.text,i.x=0,i.y=0,i.fill=l,i.textAlign="center",i.textBaseline="alphabetic",e.push(i.computeBBox()),t.push(s.margin)});let i=e=>0===e?0:t[e],s=e=>e===t.length-1?0:t[e],n=e.reduce((e,t,n)=>e+t.height+i(n)+s(n),0),r=Math.max(...e.map(e=>e.width)),a=this.getInnerRadius(),o=Math.sqrt(Math.pow(r/2,2)+Math.pow(n/2,2))<=(a>0?a:this.getOuterRadius()),l=[];for(let t=0,r=-n/2;t<e.length;t++){let n=e[t].height+r+i(t);l.push(n),r=n+s(t)}this.innerLabelsSelection.each((e,t,i)=>{e.y=l[i],e.visible=o})}getDatumLegendName(e){let{angleKey:t,calloutLabelKey:i,sectorLabelKey:s,legendItemKey:n}=this,{sectorLabel:r,calloutLabel:a,legendItem:o}=e;return n&&void 0!==o?o.text:i&&i!==t&&(null==a?void 0:a.text)!==void 0?a.text:s&&s!==t&&(null==r?void 0:r.text)!==void 0?r.text:void 0}getTooltipHtml(e){var t;if(!this.angleKey)return"";let{datum:i,angleValue:s,sectorFormat:{fill:n}}=e,r=iQ(null===(t=this.title)||void 0===t?void 0:t.text),a=i3(s)?function(e,t=2){let i=Math.floor(Math.log(Math.abs(e))/Math.LN10);return i>=0||!isFinite(i)?e.toFixed(t):e.toFixed(Math.abs(i)-1+t)}(s):String(s),o=this.getDatumLegendName(e);return this.tooltip.toTooltipHtml({title:null!=r?r:o,content:r&&o?`${o}: ${a}`:a,backgroundColor:n},{datum:i,title:r,color:n,seriesId:this.id,angleKey:this.angleKey,angleName:this.angleName,radiusKey:this.radiusKey,radiusName:this.radiusName,calloutLabelKey:this.calloutLabelKey,calloutLabelName:this.calloutLabelName,sectorLabelKey:this.sectorLabelKey,sectorLabelName:this.sectorLabelName})}getLegendData(e){var t,i,s,n,r;let{processedData:a,angleKey:o,calloutLabelKey:l,sectorLabelKey:h,legendItemKey:d,id:u,dataModel:c}=this;if(!c||!a||0===a.data.length||"category"!==e||!d&&(!l||l===o)&&(!h||h===o))return[];let{calloutLabelIdx:p,sectorLabelIdx:g,legendItemIdx:f}=this.getProcessedDataIndexes(c),m=(null===(t=this.title)||void 0===t?void 0:t.showInLegend)&&this.title.text,y=[];for(let e=0;e<a.data.length;e++){let{datum:t,values:c}=a.data[e],v=[];m&&v.push(m);let b=this.getLabels(t,2*Math.PI,2*Math.PI,!1,c[p],c[g],c[f]);if(d&&void 0!==b.legendItem?v.push(b.legendItem.text):l&&l!==o&&(null===(i=b.calloutLabel)||void 0===i?void 0:i.text)!==void 0?v.push(null===(s=b.calloutLabel)||void 0===s?void 0:s.text):h&&h!==o&&(null===(n=b.sectorLabel)||void 0===n?void 0:n.text)!==void 0&&v.push(null===(r=b.sectorLabel)||void 0===r?void 0:r.text),0===v.length)continue;let x=this.getSectorFormat(t,e,!1);y.push({legendType:"category",id:u,itemId:e,seriesId:u,enabled:this.seriesItemEnabled[e],label:{text:v.join(" - ")},marker:{fill:x.fill,stroke:x.stroke,fillOpacity:this.fillOpacity,strokeOpacity:this.strokeOpacity,strokeWidth:this.strokeWidth}})}return y}onLegendItemClick(e){let{enabled:t,itemId:i,series:s}=e;s.id===this.id?this.toggleSeriesItem(i,t):"pie"===s.type&&this.toggleOtherSeriesItems(s,i,t)}toggleSeriesItem(e,t){this.seriesItemEnabled[e]=t,this.nodeDataRefresh=!0}toggleOtherSeriesItems(e,t,i){var s,n;let{legendItemKey:r,dataModel:a}=this;if(!r||!a)return;let o=e.legendItemKey&&(null===(s=e.data)||void 0===s?void 0:s.find((e,i)=>i===t)[e.legendItemKey]);if(!o)return;let l=a.resolveProcessedDataIndexById(this,"legendItemValue").index;null===(n=this.processedData)||void 0===n||n.data.forEach(({values:e},t)=>{e[l]===o&&this.toggleSeriesItem(t,i)})}animateEmptyUpdateReady(e){let{animationManager:t}=this.ctx,i=s1(!0,this.rotation,this.radiusScale,this.previousRadiusScale);t_(this.id,"nodes",t,[this.itemSelection,this.highlightSelection],i.nodes),t_(this.id,"innerCircle",t,[this.innerCircleSelection],i.innerCircle),sT(this,"callout",t,[this.calloutLabelSelection]),sT(this,"sector",t,[this.sectorLabelSelection]),sT(this,"inner",t,[this.innerLabelsSelection]),this.previousRadiusScale.range=this.radiusScale.range}animateWaitingUpdateReady(){var e,t,i,s,n,r;let{itemSelection:a,highlightSelection:o,processedData:l,radiusScale:h,previousRadiusScale:d}=this,{animationManager:u}=this.ctx,c=null===(e=null==l?void 0:l.reduced)||void 0===e?void 0:e.diff;this.ctx.animationManager.stopByAnimationGroupId(this.id);let p=(null!==(t=null==c?void 0:c.moved.length)&&void 0!==t?t:0)===0&&(null==c?void 0:c.addedIndices.every(e=>!c.removedIndices.includes(e))),g=(null!==(i=null==l?void 0:l.defs.keys.length)&&void 0!==i?i:0)>0,f=null===(r=null===(n=null===(s=null==l?void 0:l.reduced)||void 0===s?void 0:s.animationValidation)||void 0===n?void 0:n.uniqueKeys)||void 0===r||r;p&&g&&f||this.ctx.animationManager.skipCurrentBatch();let m=s1(!1,this.rotation,h,d);t_(this.id,"nodes",u,[a,o],m.nodes,(e,t)=>this.getDatumId(t),c),t_(this.id,"innerCircle",u,[this.innerCircleSelection],m.innerCircle),sT(this,"callout",this.ctx.animationManager,[this.calloutLabelSelection]),sT(this,"sector",this.ctx.animationManager,[this.sectorLabelSelection]),sT(this,"inner",this.ctx.animationManager,[this.innerLabelsSelection]),this.previousRadiusScale.range=this.radiusScale.range}animateClearingUpdateEmpty(){let{itemSelection:e,highlightSelection:t,radiusScale:i,previousRadiusScale:s}=this,{animationManager:n}=this.ctx,r=s1(!1,this.rotation,i,s);t_(this.id,"nodes",n,[e,t],r.nodes),t_(this.id,"innerCircle",n,[this.innerCircleSelection],r.innerCircle),sI(this,"callout",this.ctx.animationManager,[this.calloutLabelSelection]),sI(this,"sector",this.ctx.animationManager,[this.sectorLabelSelection]),sI(this,"inner",this.ctx.animationManager,[this.innerLabelsSelection]),this.previousRadiusScale.range=this.radiusScale.range}getDatumIdFromData(e){var t,i,s;let{calloutLabelKey:n,sectorLabelKey:r,legendItemKey:a}=this;if(null===(s=null===(i=null===(t=this.processedData)||void 0===t?void 0:t.reduced)||void 0===i?void 0:i.animationValidation)||void 0===s?void 0:s.uniqueKeys){if(a)return e[a];if(n)return e[n];if(r)return e[r]}}getDatumId(e){var t;let{index:i}=e;return null!==(t=this.getDatumIdFromData(e.datum))&&void 0!==t?t:`${i}`}onDataChange(){this.processSeriesItemEnabled()}}nr.className="PieSeries",nr.type="pie",v([ea(ex),b("design:type",Object)],nr.prototype,"angleKey",void 0),v([ea(ex),b("design:type",Object)],nr.prototype,"angleName",void 0),v([ea(eS),b("design:type",String)],nr.prototype,"radiusKey",void 0),v([ea(eS),b("design:type",String)],nr.prototype,"radiusName",void 0),v([ea(eT(0)),b("design:type",Number)],nr.prototype,"radiusMin",void 0),v([ea(eT(0)),b("design:type",Number)],nr.prototype,"radiusMax",void 0),v([ea(eS),b("design:type",String)],nr.prototype,"calloutLabelKey",void 0),v([ea(eS),b("design:type",String)],nr.prototype,"calloutLabelName",void 0),v([ea(eS),b("design:type",String)],nr.prototype,"sectorLabelKey",void 0),v([ea(eS),b("design:type",String)],nr.prototype,"sectorLabelName",void 0),v([ea(eS),b("design:type",String)],nr.prototype,"legendItemKey",void 0),v([ea(eC),b("design:type",Array)],nr.prototype,"fills",void 0),v([ea(eC),b("design:type",Array)],nr.prototype,"strokes",void 0),v([ea(eR(0,1)),b("design:type",Object)],nr.prototype,"fillOpacity",void 0),v([ea(eR(0,1)),b("design:type",Object)],nr.prototype,"strokeOpacity",void 0),v([ea(eX),b("design:type",Array)],nr.prototype,"lineDash",void 0),v([ea(eR(0)),b("design:type",Number)],nr.prototype,"lineDashOffset",void 0),v([ea(ey),b("design:type",Function)],nr.prototype,"formatter",void 0),v([ea(eR(-360,360)),b("design:type",Object)],nr.prototype,"rotation",void 0),v([ea(eR()),b("design:type",Object)],nr.prototype,"outerRadiusOffset",void 0),v([ea(eR(0)),b("design:type",Object)],nr.prototype,"outerRadiusRatio",void 0),v([ea(eR()),b("design:type",Object)],nr.prototype,"innerRadiusOffset",void 0),v([ea(eR(0)),b("design:type",Object)],nr.prototype,"innerRadiusRatio",void 0),v([ea(eR(0)),b("design:type",Object)],nr.prototype,"strokeWidth",void 0);let na={constructors:{},constructedArrays:new WeakMap},no={constructors:{title:tw,subtitle:tw,footnote:tw,shadow:to,innerCircle:nn,"axes[].title":tO,"series[].innerLabels[]":ns},allowedTypes:{"legend.pagination.marker.shape":["primitive","function"],"series[].marker.shape":["primitive","function"],"axis[].tick.count":["primitive","class-instance"]}};function nl(){return{constructors:Object.assign(Object.assign({},no.constructors),na.constructors),constructedArrays:na.constructedArrays,allowedTypes:Object.assign({},no.allowedTypes)}}class nh extends tg{constructor(e={}){super(e),this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.startLine=!1,this.endLine=!1,this.isRange=!1,this.restoreOwnStyles()}computeBBox(){return new ts(this.x1,this.y1,this.x2-this.x1,this.y2-this.y1)}isPointInPath(e,t){return!1}render(e){var t;let{ctx:i,forceRender:s,stats:n}=e;if(this.dirty===tz.NONE&&!s){n&&(n.nodesSkipped+=this.nodeCount.count);return}this.computeTransformMatrix(),this.matrix.toContext(i);let{x1:r,y1:a,x2:o,y2:l}=this;r=this.align(r),a=this.align(a),o=this.align(o),l=this.align(l);let{fill:h,opacity:d,isRange:u}=this;if(u&&h){let{fillOpacity:e}=this;i.fillStyle=h,i.globalAlpha=d*e,i.beginPath(),i.moveTo(r,a),i.lineTo(o,a),i.lineTo(o,l),i.lineTo(r,l),i.closePath(),i.fill()}let{stroke:c,strokeWidth:p,startLine:g,endLine:f}=this;if((g||f)&&c&&p){let{strokeOpacity:e,lineDash:t,lineDashOffset:s,lineCap:n,lineJoin:h}=this;i.strokeStyle=c,i.globalAlpha=d*e,i.lineWidth=p,t&&i.setLineDash(t),s&&(i.lineDashOffset=s),n&&(i.lineCap=n),h&&(i.lineJoin=h),i.beginPath(),g&&(i.moveTo(r,a),i.lineTo(o,a)),f&&(i.moveTo(o,l),i.lineTo(r,l)),i.stroke()}null===(t=this.fillShadow)||void 0===t||t.markClean(),super.render(e)}}nh.className="Range",nh.defaultStyles=Object.assign(Object.assign({},tg.defaultStyles),{strokeWidth:1}),v([e7({redraw:tz.MINOR}),b("design:type",Number)],nh.prototype,"x1",void 0),v([e7({redraw:tz.MINOR}),b("design:type",Number)],nh.prototype,"y1",void 0),v([e7({redraw:tz.MINOR}),b("design:type",Number)],nh.prototype,"x2",void 0),v([e7({redraw:tz.MINOR}),b("design:type",Number)],nh.prototype,"y2",void 0),v([e7({redraw:tz.MINOR}),b("design:type",Boolean)],nh.prototype,"startLine",void 0),v([e7({redraw:tz.MINOR}),b("design:type",Boolean)],nh.prototype,"endLine",void 0),v([e7({redraw:tz.MINOR}),b("design:type",Boolean)],nh.prototype,"isRange",void 0);let nd={top:{xTranslationDirection:0,yTranslationDirection:-1},bottom:{xTranslationDirection:0,yTranslationDirection:1},left:{xTranslationDirection:-1,yTranslationDirection:0},right:{xTranslationDirection:1,yTranslationDirection:0},topLeft:{xTranslationDirection:1,yTranslationDirection:-1},topRight:{xTranslationDirection:-1,yTranslationDirection:-1},bottomLeft:{xTranslationDirection:1,yTranslationDirection:1},bottomRight:{xTranslationDirection:-1,yTranslationDirection:1},inside:{xTranslationDirection:0,yTranslationDirection:0},insideLeft:{xTranslationDirection:1,yTranslationDirection:0},insideRight:{xTranslationDirection:-1,yTranslationDirection:0},insideTop:{xTranslationDirection:0,yTranslationDirection:1},insideBottom:{xTranslationDirection:0,yTranslationDirection:-1},insideTopLeft:{xTranslationDirection:1,yTranslationDirection:1},insideBottomLeft:{xTranslationDirection:1,yTranslationDirection:-1},insideTopRight:{xTranslationDirection:-1,yTranslationDirection:1},insideBottomRight:{xTranslationDirection:-1,yTranslationDirection:-1}},nu={top:{xTranslationDirection:1,yTranslationDirection:0},bottom:{xTranslationDirection:-1,yTranslationDirection:0},left:{xTranslationDirection:0,yTranslationDirection:-1},right:{xTranslationDirection:0,yTranslationDirection:1},topLeft:{xTranslationDirection:-1,yTranslationDirection:-1},topRight:{xTranslationDirection:-1,yTranslationDirection:1},bottomLeft:{xTranslationDirection:1,yTranslationDirection:-1},bottomRight:{xTranslationDirection:1,yTranslationDirection:1},inside:{xTranslationDirection:0,yTranslationDirection:0},insideLeft:{xTranslationDirection:0,yTranslationDirection:1},insideRight:{xTranslationDirection:0,yTranslationDirection:-1},insideTop:{xTranslationDirection:-1,yTranslationDirection:0},insideBottom:{xTranslationDirection:1,yTranslationDirection:0},insideTopLeft:{xTranslationDirection:-1,yTranslationDirection:1},insideBottomLeft:{xTranslationDirection:1,yTranslationDirection:1},insideTopRight:{xTranslationDirection:-1,yTranslationDirection:-1},insideBottomRight:{xTranslationDirection:1,yTranslationDirection:-1}};function nc({yDirection:e,padding:t=0,position:i="top",bbox:s}){let{xTranslationDirection:n,yTranslationDirection:r}=(e?nd:nu)[i];return{xTranslation:n*(t+(e?s.width:s.height)/2),yTranslation:r*(t+(e?s.height:s.width)/2)}}let np=({yDirection:e,xEnd:t,yStart:i,yEnd:s})=>e?{x:t/2,y:i}:{x:t,y:isNaN(s)?i:(i+s)/2},ng=({yDirection:e,xStart:t,xEnd:i,yStart:s,yEnd:n})=>e?{x:t,y:isNaN(n)?s:(s+n)/2}:{x:i/2,y:s},nf=({yDirection:e,xEnd:t,yStart:i,yEnd:s})=>e?{x:t,y:isNaN(s)?i:(i+s)/2}:{x:t/2,y:isNaN(s)?i:s},nm=({yDirection:e,xStart:t,xEnd:i,yStart:s,yEnd:n})=>e?{x:i/2,y:isNaN(n)?s:n}:{x:t,y:isNaN(n)?s:(s+n)/2},ny=({yDirection:e,xStart:t,xEnd:i,yStart:s})=>e?{x:t/2,y:s}:{x:i,y:s},nv=({yDirection:e,xStart:t,yStart:i,yEnd:s})=>e?{x:t,y:isNaN(s)?i:s}:{x:t,y:i},nb=({yDirection:e,xEnd:t,yStart:i,yEnd:s})=>e?{x:t,y:i}:{x:t,y:isNaN(s)?i:s},nx=({yDirection:e,xStart:t,xEnd:i,yStart:s,yEnd:n})=>e?{x:i,y:isNaN(n)?s:n}:{x:t,y:isNaN(n)?s:n},nS={top:{c:np},bottom:{c:nm},left:{c:ng},right:{c:nf},topLeft:{c:ny},topRight:{c:nb},bottomLeft:{c:nv},bottomRight:{c:nx},inside:{c:({xEnd:e,yStart:t,yEnd:i})=>({x:e/2,y:isNaN(i)?t:(t+i)/2})},insideLeft:{c:ng},insideRight:{c:nf},insideTop:{c:np},insideBottom:{c:nm},insideTopLeft:{c:ny},insideBottomLeft:{c:nv},insideTopRight:{c:nb},insideBottomRight:{c:nx}},nk=["top","left","right","bottom","topLeft","topRight","bottomLeft","bottomRight","inside","insideLeft","insideRight","insideTop","insideBottom","insideTopLeft","insideBottomLeft","insideTopRight","insideBottomRight"],nD=el((e,t)=>eh(e,t,e=>nk.includes(e)),"expecting an optional crossLine label position keyword such as 'topLeft', 'topRight' or 'inside'"),nw=el((e,t)=>eh(e,t,e=>"range"===e||"line"===e),"expecting a crossLine type keyword such as 'range' or 'line'");class nO{constructor(){this.enabled=void 0,this.text=void 0,this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=14,this.fontFamily="Verdana, sans-serif",this.padding=5,this.color="rgba(87, 87, 87, 1)",this.position=void 0,this.rotation=void 0,this.parallel=void 0}}v([ea(eb),b("design:type",Boolean)],nO.prototype,"enabled",void 0),v([ea(eS),b("design:type",String)],nO.prototype,"text",void 0),v([ea(eW),b("design:type",String)],nO.prototype,"fontStyle",void 0),v([ea(eV),b("design:type",String)],nO.prototype,"fontWeight",void 0),v([ea(eR(0)),b("design:type",Number)],nO.prototype,"fontSize",void 0),v([ea(ex),b("design:type",String)],nO.prototype,"fontFamily",void 0),v([ea(eR()),b("design:type",Number)],nO.prototype,"padding",void 0),v([ea(eE),b("design:type",String)],nO.prototype,"color",void 0),v([ea(nD),b("design:type",String)],nO.prototype,"position",void 0),v([ea(eT(-360,360)),b("design:type",Number)],nO.prototype,"rotation",void 0),v([ea(eb),b("design:type",Boolean)],nO.prototype,"parallel",void 0);class nM{constructor(){this.id=ti(this),this.enabled=void 0,this.type=void 0,this.range=void 0,this.value=void 0,this.fill=void 0,this.fillOpacity=void 0,this.stroke=void 0,this.strokeWidth=void 0,this.strokeOpacity=void 0,this.lineDash=void 0,this.label=new nO,this.scale=void 0,this.clippedRange=[-1/0,1/0],this.gridLength=0,this.sideFlag=-1,this.parallelFlipRotation=0,this.regularFlipRotation=0,this.direction=tG.X,this.group=new i_({name:`${this.id}`,layer:!0,zIndex:nM.LINE_LAYER_ZINDEX}),this.crossLineRange=new nh,this.crossLineLabel=new tm,this.labelPoint=void 0,this.data=[],this.startLine=!1,this.endLine=!1,this.isRange=!1;let{group:e,crossLineRange:t,crossLineLabel:i}=this;e.append([t,i]),t.pointerEvents=tW.None}update(e){if(!this.enabled||!e||0===this.data.length){this.group.visible=!1;return}this.group.visible=!0,this.group.zIndex=this.getZIndex(this.isRange),this.updateNodes()}calculateLayout(e){if(!e||!this.createNodeData())return;let{sideFlag:t,gridLength:i,data:s}=this,n=[],r=t*i,a=s[0],o=s[1],l=new ts(Math.min(0,r),Math.min(a,o),Math.abs(0-r),Math.abs(a-o));n.push(l);let h=this.computeLabelBBox();return h&&n.push(h),ts.merge(n)}updateNodes(){this.updateRangeNode(),this.label.enabled&&(this.updateLabel(),this.positionLabel())}createNodeData(){var e,t;let{scale:i,gridLength:s,sideFlag:n,direction:r,label:{position:a="top"},clippedRange:o,strokeWidth:l=0}=this;if(this.data=[],!i)return!1;let h=null!==(e=i.bandwidth)&&void 0!==e?e:0,d=e=>Math.max(Math.min(...o),Math.min(Math.max(...o),e)),[u,c]=[0,n*s],[p,g]=this.getRange(),[f,m]=[Number(i.convert(p,{clampMode:"clamped"})),i.convert(g,{clampMode:"clamped"})+h];f=d(f),m=d(m),[p,g]=[Number(i.convert(p)),i.convert(g)+h];let y=!isNaN(f)&&!isNaN(m)&&(p===f||g===m||f!==m)&&Math.abs(m-f)>0;if(y&&f!==Math.min(f,m)&&([f,m]=[Math.min(f,m),Math.max(f,m)],[p,g]=[g,p]),this.isRange=y,this.startLine=!isNaN(p)&&l>0&&p===f,this.endLine=!isNaN(g)&&l>0&&g===m,!y&&!this.startLine&&!this.endLine)return!1;if(this.data=[f,m],this.label.enabled){let e=r===tG.Y,{c:i=np}=null!==(t=nS[a])&&void 0!==t?t:{},{x:s,y:n}=i({yDirection:e,xStart:u,xEnd:c,yStart:f,yEnd:m});this.labelPoint={x:s,y:n}}return!0}updateRangeNode(){var e;let{crossLineRange:t,sideFlag:i,gridLength:s,data:n,startLine:r,endLine:a,isRange:o,fill:l,fillOpacity:h,stroke:d,strokeWidth:u,lineDash:c}=this;t.x1=0,t.x2=i*s,t.y1=n[0],t.y2=n[1],t.startLine=r,t.endLine=a,t.isRange=o,t.fill=l,t.fillOpacity=null!=h?h:1,t.stroke=d,t.strokeWidth=null!=u?u:1,t.strokeOpacity=null!==(e=this.strokeOpacity)&&void 0!==e?e:1,t.lineDash=c}updateLabel(){let{crossLineLabel:e,label:t}=this;t.text&&(e.fontStyle=t.fontStyle,e.fontWeight=t.fontWeight,e.fontSize=t.fontSize,e.fontFamily=t.fontFamily,e.fill=t.color,e.text=t.text)}positionLabel(){let{crossLineLabel:e,labelPoint:{x:t,y:i}={},label:{parallel:s,rotation:n,position:r="top",padding:a=0},direction:o,parallelFlipRotation:l,regularFlipRotation:h}=this;if(void 0===t||void 0===i)return;let{defaultRotation:d,configuredRotation:u}=sh({rotation:n,parallel:s,regularFlipRotation:h,parallelFlipRotation:l});e.rotation=d+u,e.textBaseline="middle",e.textAlign="center";let c=e.computeTransformedBBox();if(!c)return;let{xTranslation:p,yTranslation:g}=nc({yDirection:o===tG.Y,padding:a,position:r,bbox:c});e.translationX=t+p,e.translationY=i+g}getZIndex(e=!1){return e?nM.RANGE_LAYER_ZINDEX:nM.LINE_LAYER_ZINDEX}getRange(){let{value:e,range:t,scale:i}=this,s=iL.is(i),[n,r]=null!=t?t:[e,void 0];return s||void 0!==r||(r=n),n=null!=i5(n,s)?n:void 0,r=null!=i5(r,s)?r:void 0,s&&n===r&&(r=void 0),void 0===n&&void 0!==r&&(n=r,r=void 0),[n,r]}computeLabelBBox(){let{label:e}=this;if(!e.enabled)return;let t=new tm;t.fontFamily=e.fontFamily,t.fontSize=e.fontSize,t.fontStyle=e.fontStyle,t.fontWeight=e.fontWeight,t.text=e.text;let{labelPoint:{x:i,y:s}={},label:{parallel:n,rotation:r,position:a="top",padding:o=0},direction:l,parallelFlipRotation:h,regularFlipRotation:d}=this;if(void 0===i||void 0===s)return;let{configuredRotation:u}=sh({rotation:r,parallel:n,regularFlipRotation:d,parallelFlipRotation:h});t.rotation=u,t.textBaseline="middle",t.textAlign="center";let c=t.computeTransformedBBox();if(!c)return;let{xTranslation:p,yTranslation:g}=nc({yDirection:l===tG.Y,padding:o,position:a,bbox:c});return t.translationX=i+p,t.translationY=s+g,t.computeTransformedBBox()}calculatePadding(e){var t,i,s,n,r,a,o,l;let{isRange:h,startLine:d,endLine:u,direction:c,label:{padding:p=0,position:g="top"}}=this;if(!h&&!d&&!u)return;let f=this.computeLabelBBox(),m=null==f?void 0:f.x,y=null==f?void 0:f.y;if(!f||void 0==m||void 0==y)return;let v=function({yDirection:e,bbox:t,padding:i=0,position:s="top"}){let n={};return s.startsWith("inside")||("top"!==s||e?"bottom"!==s||e?"left"===s&&e?n.left=i+t.width:"right"===s&&e&&(n.right=i+t.width):n.bottom=i+t.height:n.top=i+t.height),n}({yDirection:c===tG.Y,padding:p,position:g,bbox:f});e.left=Math.max(null!==(t=e.left)&&void 0!==t?t:0,null!==(i=v.left)&&void 0!==i?i:0),e.right=Math.max(null!==(s=e.right)&&void 0!==s?s:0,null!==(n=v.right)&&void 0!==n?n:0),e.top=Math.max(null!==(r=e.top)&&void 0!==r?r:0,null!==(a=v.top)&&void 0!==a?a:0),e.bottom=Math.max(null!==(o=e.bottom)&&void 0!==o?o:0,null!==(l=v.bottom)&&void 0!==l?l:0)}}nM.LINE_LAYER_ZINDEX=t$.SERIES_CROSSLINE_LINE_ZINDEX,nM.RANGE_LAYER_ZINDEX=t$.SERIES_CROSSLINE_RANGE_ZINDEX,nM.className="CrossLine",v([ea(eb),b("design:type",Boolean)],nM.prototype,"enabled",void 0),v([ea(nw),b("design:type",String)],nM.prototype,"type",void 0),v([ea(eu(2)),b("design:type",Array)],nM.prototype,"range",void 0),v([ea(eE),b("design:type",String)],nM.prototype,"fill",void 0),v([ea(eT(0,1)),b("design:type",Number)],nM.prototype,"fillOpacity",void 0),v([ea(eE),b("design:type",String)],nM.prototype,"stroke",void 0),v([ea(eT()),b("design:type",Number)],nM.prototype,"strokeWidth",void 0),v([ea(eT(0,1)),b("design:type",Number)],nM.prototype,"strokeOpacity",void 0),v([ea(eX),b("design:type",Array)],nM.prototype,"lineDash",void 0);let nN=e=>e;class nE extends iL{constructor(){super([1,10],[0,1]),this.type="log",this.base=10,this.cacheProps=["domain","range","nice","tickCount","base"],this.baseLog=nN,this.basePow=nN,this.log=e=>this.domain[0]>=0?this.baseLog(e):-this.baseLog(-e),this.pow=e=>this.domain[0]>=0?this.basePow(e):-this.basePow(-e),this.defaultClampMode="clamped"}toDomain(e){return e}transform(e){return this.domain[0]>=0?Math.log(e):-Math.log(-e)}transformInvert(e){return this.domain[0]>=0?Math.exp(e):-Math.exp(-e)}update(){this.domain&&!(this.domain.length<2)&&(this.updateLogFn(),this.updatePowFn(),this.nice&&this.updateNiceDomain())}updateLogFn(){let e;let{base:t}=this;if(10===t)e=Math.log10;else if(t===Math.E)e=Math.log;else if(2===t)e=Math.log2;else{let i=Math.log(t);e=e=>Math.log(e)/i}this.baseLog=e}updatePowFn(){let e;let{base:t}=this;e=10===t?nE.pow10:t===Math.E?Math.exp:e=>Math.pow(t,e),this.basePow=e}updateNiceDomain(){let[e,t]=this.domain,i=this.pow(Math.floor(this.log(e))),s=this.pow(Math.ceil(this.log(t)));this.niceDomain=[i,s]}static pow10(e){return e>=0?Math.pow(10,e):1/Math.pow(10,-e)}ticks(){var e;let t=null!==(e=this.tickCount)&&void 0!==e?e:10;if(!this.domain||this.domain.length<2||t<1)return[];this.refresh();let i=this.base,[s,n]=this.getDomain(),r=this.log(s),a=this.log(n);if(this.interval){let e=Math.abs(this.interval),t=Math.abs(a-r),i=iA(r,a,Math.min(t,e)).map(e=>this.pow(e)).filter(e=>e>=s&&e<=n);if(!this.isDenseInterval({start:s,stop:n,interval:e,count:i.length}))return i}let o=a-r>=t;if(i%1!=0||o)return iM(r,a,Math.min(a-r,t)).map(e=>this.pow(e));let l=[],h=s>0;r=Math.floor(r)-1,a=Math.round(a)+1;let d=Math.min(...this.range),u=(Math.max(...this.range)-d)/t,c=1/0;for(let e=r;e<=a;e++){let t=this.convert(this.pow(e+1));for(let r=1;r<i;r++){let a=h?r:i-r+1,o=this.pow(e)*a,d=this.convert(o),p=Math.abs(c-d),g=Math.abs(d-t),f=p>=u&&g>=u;o>=s&&o<=n&&(1===r||f)&&(l.push(o),c=d)}}return l}tickFormat({count:e,ticks:t,specifier:i}){let{base:s}=this;return(null==i&&(i=10===s?".0e":","),"string"==typeof i&&(i=iv(i)),e===1/0)?i:(null==t&&this.ticks(),e=>i(e))}}v([ea(eR(0)),b("design:type",Object)],nE.prototype,"base",void 0),(ie=tK||(tK={}))[ie.MILLISECOND=0]="MILLISECOND",ie[ie.SECOND=1]="SECOND",ie[ie.MINUTE=2]="MINUTE",ie[ie.HOUR=3]="HOUR",ie[ie.WEEK_DAY=4]="WEEK_DAY",ie[ie.SHORT_MONTH=5]="SHORT_MONTH",ie[ie.MONTH=6]="MONTH",ie[ie.SHORT_YEAR=7]="SHORT_YEAR",ie[ie.YEAR=8]="YEAR";let nC={[tK.MILLISECOND]:".%L",[tK.SECOND]:":%S",[tK.MINUTE]:"%I:%M",[tK.HOUR]:"%I %p",[tK.WEEK_DAY]:"%a",[tK.SHORT_MONTH]:"%b %d",[tK.MONTH]:"%B",[tK.SHORT_YEAR]:"%y",[tK.YEAR]:"%Y"};function nA(e){return e instanceof Date?e.getTime():e}class nL extends iL{constructor(){super([new Date(2022,11,7),new Date(2022,11,8)],[0,1]),this.type="time",this.cacheProps=["domain","range","nice","tickCount","interval","minTickCount","maxTickCount"],this.year=m,this.month=f,this.week=g,this.day=c,this.hour=u,this.minute=h,this.second=o,this.millisecond=r,this.tickIntervals=[[this.second,1,1e3],[this.second,5,5e3],[this.second,15,15e3],[this.second,30,3e4],[this.minute,1,6e4],[this.minute,5,3e5],[this.minute,15,9e5],[this.minute,30,18e5],[this.hour,1,36e5],[this.hour,3,108e5],[this.hour,6,216e5],[this.hour,12,432e5],[this.day,1,864e5],[this.day,2,1728e5],[this.week,1,6048e5],[this.week,2,12096e5],[this.week,3,18144e5],[this.month,1,2592e6],[this.month,2,5184e6],[this.month,3,7776e6],[this.month,4,10368e6],[this.month,6,15552e6],[this.year,1,31536e6]]}toDomain(e){return new Date(e)}calculateDefaultTickFormat(e=[]){let t=tK.YEAR,i=e=>{e<t&&(t=e)};for(let t of e)i(this.getLowestGranularityFormat(t));let s=nA(e[0]),n=nA(e[e.length-1]),r=new Date(s).getFullYear(),a=new Date(n).getFullYear();return this.buildFormatString(t,a-r>0)}buildFormatString(e,t){let i=[nC[e]],s=0,n=this.getDomain(),r=Math.min(...n.map(nA)),a=Math.max(...n.map(nA))-r;switch(e){case tK.SECOND:a/6e4>1&&i.push(nC[tK.MINUTE]);case tK.MINUTE:a/36e5>1&&i.push(nC[tK.HOUR]);case tK.HOUR:s=i.length,a/864e5>1&&i.push(nC[tK.WEEK_DAY]);case tK.WEEK_DAY:if(a/6048e5>1||t){let e=i.indexOf(nC[tK.WEEK_DAY]);e>-1&&i.splice(e,1,nC[tK.SHORT_MONTH])}case tK.SHORT_MONTH:case tK.MONTH:(a/31536e6>1||t)&&i.push(nC[tK.YEAR])}return s<i.length&&(i=[...i.slice(0,s),i.slice(s).join(" ")]),s>0&&(i=[...i.slice(0,s).reverse(),...i.slice(s)],s<i.length&&i.splice(s,0," ")),i.join("")}getLowestGranularityFormat(e){return this.second.floor(e)<e?tK.MILLISECOND:this.minute.floor(e)<e?tK.SECOND:this.hour.floor(e)<e?tK.MINUTE:this.day.floor(e)<e?tK.HOUR:this.month.floor(e)<e?this.week.floor(e)<e?tK.WEEK_DAY:tK.SHORT_MONTH:this.year.floor(e)<e?tK.MONTH:tK.YEAR}defaultTickFormat(e){let t=this.calculateDefaultTickFormat(e);return e=>sW(t)(e)}getTickInterval({start:e,stop:t,count:i,minCount:s,maxCount:n}){let r,a;let{tickIntervals:o}=this,l=null!=i?i:iL.defaultTickCount,h=Math.abs(t-e)/Math.max(l,1),d=0;for(;d<o.length&&h>o[d][2];)d++;if(0===d)a=Math.max(iE(e,t,l,s,n),1),r=this.millisecond;else if(d===o.length)a=iE(e/31536e6,t/31536e6,l,s,n),r=this.year;else{let e=h-o[d-1][2]<o[d][2]-h?d-1:d;[r,a]=o[e]}return r.every(a)}invert(e){return new Date(super.invert(e))}ticks(){if(!this.domain||this.domain.length<2)return[];this.refresh();let[e,t]=this.getDomain().map(nA);if(void 0!==this.interval)return this.getTicksForInterval({start:e,stop:t});if(this.nice){let{tickCount:e}=this;if(2===e)return this.niceDomain;if(1===e)return this.niceDomain.slice(0,1)}return this.getDefaultTicks({start:e,stop:t})}getDefaultTicks({start:e,stop:t}){let i=this.getTickInterval({start:e,stop:t,count:this.tickCount,minCount:this.minTickCount,maxCount:this.maxTickCount});return i?i.range(new Date(e),new Date(t)):[]}getTicksForInterval({start:e,stop:t}){let{interval:i,tickIntervals:n}=this;if(!i)return[];if(i instanceof s){let s=i.range(new Date(e),new Date(t));return this.isDenseInterval({start:e,stop:t,interval:i,count:s.length})?this.getDefaultTicks({start:e,stop:t}):s}let r=Math.abs(i);if(this.isDenseInterval({start:e,stop:t,interval:r}))return this.getDefaultTicks({start:e,stop:t});let a=[...n];a.reverse();let o=a.find(e=>r%e[2]==0);if(o)return o[0].every(r/(o[2]/o[1])).range(new Date(e),new Date(t));let l=new Date(e),h=new Date(t),d=[];for(;l<=h;)d.push(l),(l=new Date(l)).setMilliseconds(l.getMilliseconds()+r);return d}tickFormat({ticks:e,specifier:t}){return void 0==t?this.defaultTickFormat(e):sW(t)}update(){this.domain&&!(this.domain.length<2)&&this.nice&&this.updateNiceDomain()}updateNiceDomain(){let[e,t]=this.domain;for(let i=0;i<4;i++){this.updateNiceDomainIteration(e,t);let[i,s]=this.niceDomain;if(nA(e)===nA(i)&&nA(t)===nA(s))break;e=i,t=s}}updateNiceDomainIteration(e,t){let i;let n=nA(e),r=nA(t),{interval:a}=this;if(a instanceof s)i=a;else{let e="number"==typeof a?(r-n)/Math.max(a,1):this.tickCount;i=this.getTickInterval({start:n,stop:r,count:e,minCount:this.minTickCount,maxCount:this.maxTickCount})}if(i){let s=i.range(e,t,!0),n=s[0],r=s[s.length-1];this.niceDomain=[n,r]}}}class nR{constructor(e=0,t=e,i=e,s=t){this.top=e,this.right=t,this.bottom=i,this.left=s}clear(){this.top=this.right=this.bottom=this.left=0}}function nT(e,t,i,s,n){let r=e.x+e.width>t&&e.x<t+s,a=e.y+e.height>i&&e.y<i+n;return r&&a}v([ea(eR(0)),b("design:type",Number)],nR.prototype,"top",void 0),v([ea(eR(0)),b("design:type",Number)],nR.prototype,"right",void 0),v([ea(eR(0)),b("design:type",Number)],nR.prototype,"bottom",void 0),v([ea(eR(0)),b("design:type",Number)],nR.prototype,"left",void 0);let nI=["stroke","lineDash"],n_=el(ed(void 0,e=>{for(let t in e)if(!nI.includes(t))return!1;return!0}),"expecting an Array of objects with gridline style properties such as 'stroke' and 'lineDash'");class nP{constructor(){this.enabled=!0,this.width=1,this.style=[{stroke:void 0,lineDash:[]}]}}function nB(e,t=[void 0]){return G((i,s,n)=>t.includes(n)?e:n)}v([ea(ev),b("design:type",Object)],nP.prototype,"enabled",void 0),v([ea(eR(0)),b("design:type",Number)],nP.prototype,"width",void 0),v([ea(n_),b("design:type",Array)],nP.prototype,"style",void 0);class nF{constructor(){this.enabled=!0,this.autoWrap=!1,this.maxWidth=void 0,this.maxHeight=void 0,this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=12,this.fontFamily="Verdana, sans-serif",this.padding=5,this.minSpacing=NaN,this.color="rgba(87, 87, 87, 1)",this.rotation=void 0,this.avoidCollisions=!0,this.mirrored=!1,this.parallel=!1,this.formatter=void 0}getSideFlag(){return this.mirrored?1:-1}getFont(){return ty(this)}}v([ea(ev),b("design:type",Object)],nF.prototype,"enabled",void 0),v([ea(eb),b("design:type",Boolean)],nF.prototype,"autoWrap",void 0),v([ea(eT(0)),b("design:type",Number)],nF.prototype,"maxWidth",void 0),v([ea(eT(0)),b("design:type",Number)],nF.prototype,"maxHeight",void 0),v([ea(eW),b("design:type",String)],nF.prototype,"fontStyle",void 0),v([ea(eV),b("design:type",String)],nF.prototype,"fontWeight",void 0),v([ea(eR(1)),b("design:type",Number)],nF.prototype,"fontSize",void 0),v([ea(ex),b("design:type",String)],nF.prototype,"fontFamily",void 0),v([ea(eR(0)),b("design:type",Number)],nF.prototype,"padding",void 0),v([ea(eI()),nB(NaN),b("design:type",Number)],nF.prototype,"minSpacing",void 0),v([ea(eE),b("design:type",String)],nF.prototype,"color",void 0),v([ea(eT(-360,360)),b("design:type",Number)],nF.prototype,"rotation",void 0),v([ea(ev),b("design:type",Boolean)],nF.prototype,"avoidCollisions",void 0),v([ea(ev),b("design:type",Boolean)],nF.prototype,"mirrored",void 0),v([ea(ev),b("design:type",Boolean)],nF.prototype,"parallel",void 0),v([ea(eS),b("design:type",String)],nF.prototype,"format",void 0);class nj{constructor(){this.enabled=!0,this.width=1,this.color=void 0}}v([ea(ev),b("design:type",Object)],nj.prototype,"enabled",void 0),v([ea(eR(0)),b("design:type",Number)],nj.prototype,"width",void 0),v([ea(eE),b("design:type",String)],nj.prototype,"color",void 0);let nG=el((e,t)=>eh(e,t,(e,t)=>0!==e&&eR(0)(e,t)||e instanceof s),"expecting an optional non-zero positive Number value or, for a time axis, a Time Interval such as 'agCharts.time.month'");class nz{constructor(){this.enabled=!0,this.width=1,this.size=6,this.color=void 0,this.interval=void 0,this.values=void 0,this.minSpacing=NaN}}function nW(e){let t=Math.min(...e.range),i=Math.max(...e.range),s=Math.floor(t),n=Math.ceil(i);return{min:s,max:n,visible:s!==n}}v([ea(ev),b("design:type",Object)],nz.prototype,"enabled",void 0),v([ea(eR(0)),b("design:type",Number)],nz.prototype,"width",void 0),v([ea(eR(0)),b("design:type",Number)],nz.prototype,"size",void 0),v([ea(eE),b("design:type",String)],nz.prototype,"color",void 0),v([ea(nG),b("design:type",Object)],nz.prototype,"interval",void 0),v([ea(eu()),b("design:type",Array)],nz.prototype,"values",void 0),v([ea(ec(eI(1),eg("maxSpacing"))),nB(NaN),b("design:type",Number)],nz.prototype,"minSpacing",void 0);let nY=2*Math.PI,nV=nY/2;(it=tq||(tq={}))[it.TickLine=0]="TickLine",it[it.TickLabel=1]="TickLabel",it[it.GridLine=2]="GridLine",it[it.GridArc=3]="GridArc",it[it.AxisLine=4]="AxisLine",(ii=tZ||(tZ={}))[ii.CREATE=0]="CREATE",ii[ii.CREATE_SECONDARY=1]="CREATE_SECONDARY",ii[ii.FILTER=2]="FILTER",ii[ii.VALUES=3]="VALUES";class n${get type(){var e;return null!==(e=this.constructor.type)&&void 0!==e?e:""}set crossLines(e){var t,i;null===(t=this._crossLines)||void 0===t||t.forEach(e=>this.detachCrossLine(e)),e&&this.assignCrossLineArrayConstructor(e),this._crossLines=e,null===(i=this._crossLines)||void 0===i||i.forEach(e=>{this.attachCrossLine(e),this.initCrossLine(e)})}get crossLines(){return this._crossLines}constructor(e,t){let i;this.moduleCtx=e,this.scale=t,this.id=ti(this),this.nice=!0,this.dataDomain={domain:[],clipped:!1},this.keys=[],this.boundSeries=[],this.includeInvisibleDomains=!1,this.axisGroup=new i_({name:`${this.id}-axis`,zIndex:t$.AXIS_ZINDEX}),this.lineNode=this.axisGroup.appendChild(new iB),this.tickLineGroup=this.axisGroup.appendChild(new i_({name:`${this.id}-Axis-tick-lines`,zIndex:t$.AXIS_ZINDEX})),this.tickLabelGroup=this.axisGroup.appendChild(new i_({name:`${this.id}-Axis-tick-labels`,zIndex:t$.AXIS_ZINDEX})),this.crossLineGroup=new i_({name:`${this.id}-CrossLines`}),this.gridGroup=new i_({name:`${this.id}-Axis-grid`}),this.gridLineGroup=this.gridGroup.appendChild(new i_({name:`${this.id}-gridLines`,zIndex:t$.AXIS_GRID_ZINDEX})),this.tickLineGroupSelection=iP.select(this.tickLineGroup,iB,!1),this.tickLabelGroupSelection=iP.select(this.tickLabelGroup,tm,!1),this.gridLineGroupSelection=iP.select(this.gridLineGroup,iB,!1),this.line=new nj,this.tick=this.createTick(),this.gridLine=new nP,this.label=this.createLabel(),this.defaultTickMinSpacing=n$.defaultTickMinSpacing,this.translation={x:0,y:0},this.rotation=0,this.layout={label:{fractionDigits:0,padding:this.label.padding,format:this.label.format}},this.destroyFns=[],this.range=[0,1],this.visibleRange=[0,1],this.title=void 0,this._titleCaption=new tw,this._gridLength=0,this.fractionDigits=0,this.gridPadding=0,this.seriesAreaPadding=0,this.tickGenerationResult=void 0,this.maxThickness=1/0,this.moduleMap=new sf(this),this.refreshScale(),this._titleCaption.node.rotation=-Math.PI/2,this.axisGroup.appendChild(this._titleCaption.node),this.destroyFns.push(e.interactionManager.addListener("hover",e=>this.checkAxisHover(e))),this.animationManager=e.animationManager,this.animationState=new s4("empty",{empty:{update:{target:"ready",action:()=>this.resetSelectionNodes()}},ready:{update:e=>this.animateReadyUpdate(e),resize:()=>this.resetSelectionNodes()}}),this._crossLines=[],this.assignCrossLineArrayConstructor(this._crossLines),this.destroyFns.push(e.layoutService.addListener("layout-complete",e=>{null!=i&&null!=Y(e.chart,i)&&this.animationState.transition("resize"),i=Object.assign({},e.chart)})),this.destroyFns.push(e.updateService.addListener("update-complete",e=>{this.minRect=e.minRect}))}attachCrossLine(e){this.crossLineGroup.appendChild(e.group)}detachCrossLine(e){this.crossLineGroup.removeChild(e.group)}destroy(){this.moduleMap.destroy(),this.destroyFns.forEach(e=>e())}refreshScale(){var e;this.range=this.scale.range.slice(),null===(e=this.crossLines)||void 0===e||e.forEach(e=>{this.initCrossLine(e)})}updateRange(){var e;let{range:t,visibleRange:i,scale:s}=this,n=(t[1]-t[0])/(i[1]-i[0]),r=n*i[0],a=t[0]-r;s.range=[a,a+n],null===(e=this.crossLines)||void 0===e||e.forEach(e=>{e.clippedRange=[t[0],t[1]]})}setCrossLinesVisible(e){this.crossLineGroup.visible=e}attachAxis(e,t){t.appendChild(this.gridGroup),e.appendChild(this.axisGroup),e.appendChild(this.crossLineGroup)}detachAxis(e,t){t.removeChild(this.gridGroup),e.removeChild(this.axisGroup),e.removeChild(this.crossLineGroup)}inRange(e,t=0,i=0){let s=Math.min(...this.range),n=Math.max(...this.range);return e+t>=s-i&&e<=n+i}onLabelFormatChange(e,t){let{scale:i,fractionDigits:s}=this,n=i instanceof nE||!(s>0)?e=>String(e):e=>"number"==typeof e?e.toFixed(s):String(e);if(t&&i&&i.tickFormat)try{this.labelFormatter=i.tickFormat({ticks:e,specifier:t})}catch(e){this.labelFormatter=n,T.warnOnce(`the axis label format string ${t} is invalid. No formatting will be applied`)}else this.labelFormatter=n}setDomain(){var e;let{scale:t,dataDomain:{domain:i},tick:{values:s}}=this;if(s&&iL.is(t)){let[n,r]=null!==(e=N(s))&&void 0!==e?e:[1/0,-1/0],a=Math.min(t.fromDomain(i[0]),n),o=Math.max(t.fromDomain(i[1]),r);t.domain=[t.toDomain(a),t.toDomain(o)]}else t.domain=i}setTickInterval(e){var t;this.scale.interval=null!==(t=this.tick.interval)&&void 0!==t?t:e}setTickCount(e,t,i){let{scale:s}=this;if(e&&iL.is(s)){if("number"==typeof e){s.tickCount=e,s.minTickCount=null!=t?t:0,s.maxTickCount=null!=i?i:1/0;return}s instanceof nL&&this.setTickInterval(e)}}set gridLength(e){var t;(this._gridLength&&!e||!this._gridLength&&e)&&this.gridLineGroupSelection.clear(),this._gridLength=e,null===(t=this.crossLines)||void 0===t||t.forEach(e=>{this.initCrossLine(e)})}get gridLength(){return this._gridLength}createTick(){return new nz}createLabel(){return new nF}checkAxisHover(e){this.computeBBox().containsPoint(e.offsetX,e.offsetY)&&this.moduleCtx.chartEventManager.axisHover(this.id,this.direction)}update(e){if(!this.tickGenerationResult)return;let{rotation:t,parallelFlipRotation:i,regularFlipRotation:s}=this.calculateRotations(),n=this.label.getSideFlag();this.updatePosition();let r=this.getAxisLineCoordinates(),a=this.tickGenerationResult,{tickData:o,combinedRotation:l,textBaseline:h,textAlign:d}=a,u=y(a,["tickData","combinedRotation","textBaseline","textAlign"]),c=this.tickLabelGroupSelection.nodes().map(e=>e.datum.tickId);if(this.updateSelections(r,o.ticks,{combinedRotation:l,textAlign:d,textBaseline:h,range:this.scale.range}),this.animationManager.isSkipped())this.resetSelectionNodes();else{let e=this.calculateUpdateDiff(c,o);this.animationState.transition("update",e)}return this.updateAxisLine(),this.updateLabels(),this.updateVisibility(),this.updateGridLines(n),this.updateTickLines(),this.updateTitle({anyTickVisible:o.ticks.length>0}),this.updateCrossLines({rotation:t,parallelFlipRotation:i,regularFlipRotation:s}),this.updateLayoutState(),u.primaryTickCount}getAxisLineCoordinates(){let{range:[e,t]}=this;return{x:0,y1:Math.min(e,t),y2:Math.max(e,t)}}getTickLineCoordinates(e){let{tick:t,label:i}=this,s=i.getSideFlag()*t.size,n=Math.min(0,s);return{x1:n,x2:n+Math.abs(s),y:Math.round(e.translationY)}}getTickLabelProps(e,t){let{label:i}=this,{combinedRotation:s,textBaseline:n,textAlign:r,range:a}=t,o=e.tickLabel,l=i.getSideFlag()*(this.tick.size+i.padding+this.seriesAreaPadding);return{tickId:e.tickId,translationY:e.translationY,fill:i.color,fontFamily:i.fontFamily,fontSize:i.fontSize,fontStyle:i.fontStyle,fontWeight:i.fontWeight,rotation:s,rotationCenterX:l,text:o,textAlign:r,textBaseline:n,visible:""!==o&&void 0!=o,x:l,y:0,range:a}}setTitleProps(e,t){var i;let{title:s}=this;if(!s){e.enabled=!1;return}if(e.color=s.color,e.fontFamily=s.fontFamily,e.fontSize=s.fontSize,e.fontStyle=s.fontStyle,e.fontWeight=s.fontWeight,e.enabled=s.enabled,e.wrapping=s.wrapping,s.enabled){let n=e.node,{tickSpace:r}=t,a=(null!==(i=s.spacing)&&void 0!==i?i:0)+r,o=this.label.getSideFlag(),l=J(this.rotation),h=-1===o&&l>Math.PI&&l<2*Math.PI?-1:1,{range:d}=this,u=Math.floor(h*o*(d[0]+d[1])/2),{callbackCache:c}=this.moduleCtx,{formatter:p=e=>e.defaultValue}=s,g=c.call(p,this.getTitleFormatterParams());n.setProperties({rotation:h*o*Math.PI/2,text:g,textBaseline:1===h?"bottom":"top",visible:!0,x:u,y:-1===o?Math.floor(-(h*a)):Math.floor(-a)})}}calculateLayout(e){var t;let{rotation:i,parallelFlipRotation:s,regularFlipRotation:n}=this.calculateRotations(),r=this.label.getSideFlag(),a=r*(this.tick.size+this.label.padding+this.seriesAreaPadding);this.updateScale(),this.tickGenerationResult=this.generateTicks({primaryTickCount:e,parallelFlipRotation:s,regularFlipRotation:n,labelX:a,sideFlag:r});let o=this.tickGenerationResult,{tickData:l,combinedRotation:h,textBaseline:d,textAlign:u}=o,c=y(o,["tickData","combinedRotation","textBaseline","textAlign"]),p=[],{x:g,y1:f,y2:m}=this.getAxisLineCoordinates(),v=new ts(g,f,0,m-f);p.push(v);let{tick:b}=this;b.enabled&&l.ticks.forEach(e=>{let{x1:t,x2:i,y:s}=this.getTickLineCoordinates(e),n=new ts(t,s,i-t,0);p.push(n)});let{label:x}=this;if(x.enabled){let e=new tm;l.ticks.forEach(t=>{let i=this.getTickLabelProps(t,{combinedRotation:h,textAlign:u,textBaseline:d,range:this.scale.range});if(!i.visible)return;e.setProperties(Object.assign(Object.assign({},i),{translationY:Math.round(t.translationY)}));let s=e.computeTransformedBBox();s&&p.push(s)})}let{title:S}=this;if(null==S?void 0:S.enabled){let e=new tw,t=0;if(l.ticks.length>0){let e=ts.merge(p).width;isFinite(e)&&(t+=e)}this.setTitleProps(e,{tickSpace:t});let i=e.node.computeTransformedBBox();i&&p.push(i)}let k=(e=>{let t=new tn,{rotation:i,translationX:s,translationY:n,rotationCenterX:r,rotationCenterY:a}=this.getAxisTransform();return tn.updateTransformMatrix(t,1,1,i,s,n,{scalingCenterX:0,scalingCenterY:0,rotationCenterX:r,rotationCenterY:a}),t.transformBBox(e)})(ts.merge(p)),D=this.isAnySeriesActive();return null===(t=this.crossLines)||void 0===t||t.forEach(e=>{var t;e.sideFlag=-r,e.direction=i===-Math.PI/2?tG.X:tG.Y,e instanceof nM&&(e.label.parallel=null!==(t=e.label.parallel)&&void 0!==t?t:this.label.parallel),e.parallelFlipRotation=s,e.regularFlipRotation=n,e.calculateLayout(D)}),this.updateLayoutState(),{primaryTickCount:e=c.primaryTickCount,bbox:k}}updateLayoutState(){this.layout.label={fractionDigits:this.fractionDigits,padding:this.label.padding,format:this.label.format}}updateScale(){this.updateRange(),this.calculateDomain(),this.setDomain(),this.setTickInterval(this.tick.interval);let{scale:e,nice:t}=this;iL.is(e)&&(e.nice=t,e.update())}calculateRotations(){let e=ee(this.rotation),t=J(e),i=J(e-Math.PI/2);return{rotation:e,parallelFlipRotation:t,regularFlipRotation:i}}generateTicks({primaryTickCount:e,parallelFlipRotation:t,regularFlipRotation:i,labelX:s,sideFlag:n}){var r;let{scale:a,tick:o,label:{parallel:l,rotation:h,fontFamily:d,fontSize:u,fontStyle:c,fontWeight:p}}=this,g=void 0!==e,{defaultRotation:f,configuredRotation:m,parallelFlipFlag:y,regularFlipFlag:v}=sh({rotation:h,parallel:l,regularFlipRotation:i,parallelFlipRotation:t}),b=m+f,x=new tn,{maxTickCount:S}=this.estimateTickCount({minSpacing:o.minSpacing,maxSpacing:null!==(r=o.maxSpacing)&&void 0!==r?r:NaN}),k=!iL.is(a)||isNaN(S)?10:S,D=sd(l,m,0,n,v),w=l&&!m?n*y==-1?"hanging":"bottom":"middle",O={fontFamily:d,fontSize:u,fontStyle:c,fontWeight:p,textBaseline:w,textAlign:D},M={rawTicks:[],ticks:[],labelCount:0},N=0,E=0,C=!0,A=!1;for(;C&&N<=k&&!A;)for(let t of(E=0,D=sd(l,m,0,n,v),this.getTickStrategies({secondaryAxis:g,index:N}))){({tickData:M,index:N,autoRotation:E,terminate:A}=t({index:N,tickData:M,textProps:O,labelOverlap:C,terminate:A,primaryTickCount:e}));let i=0!==m||0!==E,r=b+E;D=sd(l,m,E,n,v),C=this.checkLabelOverlap(r,i,x,M.ticks,s,Object.assign(Object.assign({},O),{textAlign:D}))}let L=f+m+E;return!g&&M.rawTicks.length>0&&(e=M.rawTicks.length),{tickData:M,primaryTickCount:e,combinedRotation:L,textBaseline:w,textAlign:D}}getTickStrategies({index:e,secondaryAxis:t}){let i;let{scale:s,label:n,tick:r}=this,a=iL.is(s),o=n.enabled&&n.avoidCollisions,l=!0===n.autoRotate&&void 0===n.rotation,h=[];return i=this.tick.values?tZ.VALUES:t?tZ.CREATE_SECONDARY:!a&&0!==e&&o?tZ.FILTER:tZ.CREATE,h.push(({index:e,tickData:t,primaryTickCount:s,terminate:n})=>this.createTickData(i,e,t,n,s)),a||isNaN(r.minSpacing)||h.push(({index:e,tickData:t,primaryTickCount:i,terminate:s})=>this.createTickData(tZ.FILTER,e,t,s,i)),o&&(n.autoWrap?h.push(({index:e,tickData:t,textProps:i})=>this.wrapLabels(t,e,i)):l&&h.push(({index:e,tickData:t,labelOverlap:i,terminate:s})=>({index:e,tickData:t,autoRotation:this.getAutoRotation(i),terminate:s}))),h}createTickData(e,t,i,s,n){var r;let{scale:a,tick:o}=this,{maxTickCount:l,minTickCount:h,defaultTickCount:d}=this.estimateTickCount({minSpacing:o.minSpacing,maxSpacing:null!==(r=o.maxSpacing)&&void 0!==r?r:NaN}),u=iL.is(a),c=!u||isNaN(l)?10:l,p=u?Math.max(d-t,h):l,g=void 0===o.interval&&void 0===o.values&&p>h&&(u||e===tZ.FILTER),f=!0;for(;f&&t<=c;){let s=i.rawTicks;p=u?Math.max(d-t,h):l;let{rawTicks:r,ticks:a,labelCount:o}=this.getTicks({tickGenerationType:e,previousTicks:s,tickCount:p,minTickCount:h,maxTickCount:l,primaryTickCount:n});i.rawTicks=r,i.ticks=a,i.labelCount=o,f=!!g&&function(e,t){return e.length===t.length&&e.every((e,i)=>Number(e)===Number(t[i]))}(r,s),t++}let m=void 0!==o.interval||void 0!==o.values;return s||(s=m),{tickData:i,index:t,autoRotation:0,terminate:s}}checkLabelOverlap(e,t,i,s,n,r){var a;return tn.updateTransformMatrix(i,1,1,e,0,0),function(e,t){let i=[];for(let s=0;s<e.length;s++){let n=e[s],{point:{x:r,y:a},label:{text:o}}=n,{label:{width:l,height:h}}=n;if(l+=null!=t?t:0,h+=null!=t?t:0,i.some(e=>nT(e,r,a,l,h)))return!0;i.push({index:s,text:o,x:r,y:a,width:l,height:h,datum:n})}return!1}(this.createLabelData(s,n,r,i),isNaN(a=this.label.minSpacing)?t?0:10:a)}createLabelData(e,t,i,s){let n=[];for(let a of e){var r;let{tickLabel:e,translationY:o}=a;if(""===e||void 0==e)continue;let{width:l,height:h}=(r=tS(e),td.has.textMetrics?tv(r,t,o,i):tb(r,t,o,i)),d=function(e,t,i,s,n){let{width:r,height:a}=t,o=new ts(i,s,0,0);n.transformBBox(o,t);let{x:l=0,y:h=0}=t;return t.width=r,t.height=a,{point:{x:l,y:h,size:0},label:{width:r,height:a,text:e}}}(e,new ts(t,o,l,h),t,o,s);n.push(d)}return n}getAutoRotation(e){var t;return e?J(ee(null!==(t=this.label.autoRotateAngle)&&void 0!==t?t:0)):0}getTicks({tickGenerationType:e,previousTicks:t,tickCount:i,minTickCount:s,maxTickCount:n,primaryTickCount:r}){var a;let{range:o,scale:l,visibleRange:h}=this,d=[];switch(e){case tZ.VALUES:d=this.tick.values;break;case tZ.CREATE_SECONDARY:d=this.updateSecondaryAxisTicks(r);break;case tZ.FILTER:d=this.filterTicks(t,i);break;default:d=this.createTicks(i,s,n)}this.onLabelFormatChange(d,this.label.format),this.fractionDigits=d.fractionDigits>=0?d.fractionDigits:0;let u=(null!==(a=l.bandwidth)&&void 0!==a?a:0)/2,c=[],p=0,g=new Map,f=Math.max(0,Math.floor(h[0]*d.length)),m=Math.min(d.length,Math.ceil(h[1]*d.length));for(let e=f;e<m;e++){let t=d[e],i=l.convert(t)+u;if(o.length>0&&!this.inRange(i,0,.001))continue;let s=this.formatTick(t,e),n=s;if(g.has(n)){let e=g.get(n);g.set(n,e+1),n=`${n}_${e}`}else g.set(n,1);c.push({tick:t,tickId:n,tickLabel:s,translationY:i}),""!==s&&void 0!=s&&p++}return{rawTicks:d,ticks:c,labelCount:p}}filterTicks(e,t){var i;let s=isNaN(this.tick.minSpacing)&&isNaN(null!==(i=this.tick.maxSpacing)&&void 0!==i?i:NaN)?2:Math.ceil(e.length/t);return e.filter((e,t)=>t%s==0)}createTicks(e,t,i){var s,n,r;return this.setTickCount(e,t,i),null!==(r=null===(n=(s=this.scale).ticks)||void 0===n?void 0:n.call(s))&&void 0!==r?r:[]}estimateTickCount({minSpacing:e,maxSpacing:t}){let{minRect:i}=this,s=this.calculateRangeWithBleed(),n=Math.max(this.defaultTickMinSpacing,s/iL.defaultMaxTickCount),r=!isNaN(t);isNaN(e)&&(e=n),isNaN(t)&&(t=s),e>t&&(e===n?e=t:t=e);let a=i?this.direction===tG.X?i.width:i.height:1;r&&(r=a<n);let o=es(1,Math.floor(s/e),r?Math.floor(s/a):1/0),l=Math.min(o,Math.ceil(s/t)),h=es(l,iL.defaultTickCount,o);return{minTickCount:l,maxTickCount:o,defaultTickCount:h}}updateVisibility(){this.moduleCtx.animationManager.isSkipped()&&this.resetSelectionNodes(),this.tickLineGroup.visible=this.tick.enabled,this.gridLineGroup.visible=this.gridLine.enabled,this.tickLabelGroup.visible=this.label.enabled}updateCrossLines({rotation:e,parallelFlipRotation:t,regularFlipRotation:i}){var s;let n=this.label.getSideFlag(),r=this.isAnySeriesActive();null===(s=this.crossLines)||void 0===s||s.forEach(s=>{var a;s.sideFlag=-n,s.direction=e===-Math.PI/2?tG.X:tG.Y,s instanceof nM&&(s.label.parallel=null!==(a=s.label.parallel)&&void 0!==a?a:this.label.parallel),s.parallelFlipRotation=t,s.regularFlipRotation=i,s.update(r)})}updateTickLines(){let{tick:e,label:t}=this,i=t.getSideFlag();this.tickLineGroupSelection.each(t=>{t.strokeWidth=e.width,t.stroke=e.color,t.x1=i*e.size,t.x2=0,t.y1=0,t.y2=0})}calculateAvailableRange(){let{range:e}=this;return Math.max(...e)-Math.min(...e)}calculateRangeWithBleed(){let{visibleRange:e}=this,t=1/(e[1]-e[0]);return function(e,t=2){let i=Math.pow(10,t);return Math.round(e*i)/i}(this.calculateAvailableRange()*t,2)}calculateDomain(){if(this.linkedTo)this.dataDomain=this.linkedTo.dataDomain;else{let e=this.boundSeries.filter(e=>this.includeInvisibleDomains||e.isEnabled()).flatMap(e=>e.getDomain(this.direction));this.dataDomain=this.normaliseDataDomain(e)}}getAxisTransform(){return{rotation:ee(this.rotation),rotationCenterX:0,rotationCenterY:0,translationX:this.translation.x,translationY:this.translation.y}}updatePosition(){let{crossLineGroup:e,axisGroup:t,gridGroup:i,translation:s,gridLineGroupSelection:n,gridPadding:r,gridLength:a}=this,{rotation:o}=this.calculateRotations(),l=this.label.getSideFlag(),h=Math.floor(s.x),d=Math.floor(s.y);e.setProperties({rotation:o,translationX:h,translationY:d}),t.datum=this.getAxisTransform(),i.setProperties({rotation:o,translationX:h,translationY:d}),n.each(e=>{e.x1=r,e.x2=-l*a+r,e.y=0})}updateSecondaryAxisTicks(e){throw Error("AG Charts - unexpected call to updateSecondaryAxisTicks() - check axes configuration.")}updateSelections(e,t,i){this.lineNode.datum=e,this.gridLineGroupSelection.update(this.gridLength?t:[],e=>e.append(new iB({tag:tq.GridLine})),e=>e.tickId),this.tickLineGroupSelection.update(t,e=>e.appendChild(new iB({tag:tq.TickLine})),e=>e.tickId),this.tickLabelGroupSelection.update(t.map(e=>this.getTickLabelProps(e,i)),e=>e.appendChild(new tm({tag:tq.TickLabel})),e=>e.tickId)}updateAxisLine(){let{line:e}=this,t=e.enabled?e.width:0;this.lineNode.setProperties({stroke:e.color,strokeWidth:t})}updateGridLines(e){let{gridLine:{style:t,width:i},gridPadding:s,gridLength:n}=this;0!==n&&0!==t.length&&this.gridLineGroupSelection.each((r,a,o)=>{let{stroke:l,lineDash:h}=t[o%t.length];r.setProperties({x1:s,x2:-e*n+s,y:0,fill:void 0,stroke:l,strokeWidth:i,lineDash:h})})}updateLabels(){let{label:e}=this;e.enabled&&this.tickLabelGroupSelection.each((e,t)=>{e.setProperties(t,["fill","fontFamily","fontSize","fontStyle","fontWeight","text","textAlign","textBaseline"])})}wrapLabels(e,t,i){let{parallel:s,maxWidth:n,maxHeight:r}=this.label,a=this.maxThickness,o=Math.round(this.calculateAvailableRange()/e.labelCount);return s&&([a,o]=[o,a]),e.ticks.forEach(e=>{e.tickLabel=tm.wrap(e.tickLabel,null!=n?n:a,null!=r?r:o,i,"hyphenate")}),{tickData:e,index:t,autoRotation:0,terminate:!0}}updateTitle(e){let{rotation:t,title:i,_titleCaption:s,lineNode:n,tickLineGroup:r,tickLabelGroup:a}=this;if(!i){s.enabled=!1;return}let o=0,{anyTickVisible:l}=e;if(i.enabled&&l){let e=i_.computeBBox([r,a,n]),i=0===t?e.width:e.height;Math.abs(i)<1/0&&(o+=i)}this.setTitleProps(s,{tickSpace:o})}formatTick(e,t){var i,s;let{label:n,labelFormatter:r,fractionDigits:a,moduleCtx:{callbackCache:o}}=this;if(n.formatter){let s=a>0?e:String(e);return null!==(i=o.call(n.formatter,{value:s,index:t,fractionDigits:a,formatter:r}))&&void 0!==i?i:s}return r&&null!==(s=o.call(r,e))&&void 0!==s?s:String(e)}formatDatum(e){return String(e)}computeBBox(){return this.axisGroup.computeBBox()}initCrossLine(e){e.scale=this.scale,e.gridLength=this.gridLength}isAnySeriesActive(){return this.boundSeries.some(e=>this.includeInvisibleDomains||e.isEnabled())}clipTickLines(e,t,i,s){this.tickLineGroup.setClipRectInGroupCoordinateSpace(new ts(e,t,i,s))}clipGrid(e,t,i,s){this.gridGroup.setClipRectInGroupCoordinateSpace(new ts(e,t,i,s))}calculatePadding(e,t){return[Math.abs(.01*e),Math.abs(.01*e)]}getTitleFormatterParams(){var e;let t=this.boundSeries.reduce((e,t)=>{let i=t.getKeys(this.direction),s=t.getNames(this.direction);for(let t=0;t<i.length;t++)e.push({key:i[t],name:s[t]});return e},[]);return{direction:this.direction,boundSeries:t,defaultValue:null===(e=this.title)||void 0===e?void 0:e.text}}normaliseDataDomain(e){return{domain:e,clipped:!1}}getLayoutState(){return Object.assign({rect:this.computeBBox(),gridPadding:this.gridPadding,seriesAreaPadding:this.seriesAreaPadding,tickSize:this.tick.size},this.layout)}getModuleMap(){return this.moduleMap}createModuleContext(){var e;return null!==(e=this.axisContext)&&void 0!==e||(this.axisContext=this.createAxisContext()),Object.assign(Object.assign({},this.moduleCtx),{parent:this.axisContext})}createAxisContext(){return{axisId:this.id,direction:this.direction,continuous:iL.is(this.scale),keys:()=>this.boundSeries.flatMap(e=>e.getKeys(this.direction)),scaleValueFormatter:e=>{var t,i;return null===(i=(t=this.scale).tickFormat)||void 0===i?void 0:i.call(t,{specifier:e})},scaleBandwidth:()=>{var e;return null!==(e=this.scale.bandwidth)&&void 0!==e?e:0},scaleConvert:e=>this.scale.convert(e),scaleInvert:e=>{var t,i;return null===(i=(t=this.scale).invert)||void 0===i?void 0:i.call(t,e)}}}animateReadyUpdate(e){let{animationManager:t}=this.moduleCtx,i=function(e){let t=t=>{var i,s;let n=Math.min(...null!==(i=t.range)&&void 0!==i?i:[e.min]),r=Math.max(...null!==(s=t.range)&&void 0!==s?s:[e.max]),a=Math.round(t.translationY);return a<n||a>r},i=(e,i,s)=>"removed"!==s&&t(e)?"removed":"added"!==s&&t(i)?"added":s,s=(e,t,s)=>{let n={translationY:Math.round(e.translationY),opacity:e.opacity};return"added"===(s=i(t,e.datum,s))&&(n.translationY=Math.round(t.translationY),n.opacity=0),Object.assign(Object.assign({},n),tI[s])},n=(e,t,i)=>{let s={translationY:Math.round(t.translationY),opacity:1};return"removed"===i&&(s.opacity=0),s};return{tick:{fromFn:s,toFn:n,intermediateFn:(e,i,s)=>({visible:!t(e)})},line:{fromFn:(e,t)=>{var i,s;return Object.assign(Object.assign({},null!==(s=null!==(i=e.previousDatum)&&void 0!==i?i:t)&&void 0!==s?s:{y:e.y,x1:e.x1,x2:e.x2}),tI.updated)},toFn:(e,t)=>Object.assign({},t)},label:{fromFn:(e,t,i)=>{var n;let r=null!==(n=e.previousDatum)&&void 0!==n?n:t,a=r.rotation;return("added"===i||"removed"===i)&&(a=t.rotation),Object.assign(Object.assign({},s(e,t,i)),{x:r.x,y:r.y,rotation:a,rotationCenterX:r.rotationCenterX})},toFn:(e,t,i)=>{var s,r,a,o;let l;return"added"===i||"removed"===i?l=t.rotation:(a=null!==(r=null===(s=e.previousDatum)||void 0===s?void 0:s.rotation)&&void 0!==r?r:t.rotation,l=Math.abs((o=t.rotation)-a)<nV?o:a>o?o+nY:o-nY),Object.assign(Object.assign({},n(e,t,i)),{x:t.x,y:t.y,rotation:l,rotationCenterX:t.rotationCenterX,finish:{rotation:t.rotation}})}},group:{fromFn:(e,t)=>{let{rotation:i,translationX:s,translationY:n}=e;return Object.assign({rotation:i,translationX:s,translationY:n},tI.updated)},toFn:(e,t)=>{let{rotation:i,translationX:s,translationY:n}=t;return{rotation:i,translationX:s,translationY:n}}}}}(nW(this));t_(this.id,"axis-group",t,[this.axisGroup],i.group),t_(this.id,"line",t,[this.lineNode],i.line),t_(this.id,"line-paths",t,[this.gridLineGroupSelection,this.tickLineGroupSelection],i.tick,(e,t)=>t.tickId,e),t_(this.id,"tick-labels",t,[this.tickLabelGroupSelection],i.label,(e,t)=>t.tickId,e)}resetSelectionNodes(){let{gridLineGroupSelection:e,tickLineGroupSelection:t,tickLabelGroupSelection:i,lineNode:s}=this,n=nW(this);s5([this.axisGroup],(e,t)=>({rotation:t.rotation,rotationCenterX:t.rotationCenterX,rotationCenterY:t.rotationCenterY,translationX:t.translationX,translationY:t.translationY})),s5([e,t],function(e){let{visible:t,min:i,max:s}=e;return(e,n)=>{let r=Math.round(n.translationY);return{translationY:r,opacity:1,visible:t&&r>=i&&r<=s}}}(n)),s5([i],(e,t)=>({x:t.x,y:t.y,translationY:t.translationY,rotation:t.rotation,rotationCenterX:t.rotationCenterX})),s5([s],(e,t)=>Object.assign({},t))}calculateUpdateDiff(e,t){let i=new Set,s=new Set,n=Math.max(e.length,t.ticks.length);for(let r=0;r<n;r++){let n=t.ticks[r],a=e[r],o=null==n?void 0:n.tickId;a!==o&&(s.has(o)?s.delete(o):o&&i.add(o),i.has(a)?i.delete(a):a&&s.add(a))}return{changed:i.size>0||s.size>0,added:[...i.values()],removed:[...s.values()]}}}n$.defaultTickMinSpacing=50,v([ea(ev),b("design:type",Boolean)],n$.prototype,"nice",void 0),v([ea(eB),b("design:type",Array)],n$.prototype,"keys",void 0);class nX extends nF{constructor(){super(...arguments),this.autoRotateAngle=335}}v([ea(eb),b("design:type",Boolean)],nX.prototype,"autoRotate",void 0),v([ea(eR(-360,360)),b("design:type",Number)],nX.prototype,"autoRotateAngle",void 0);class nH extends n${constructor(){super(...arguments),this.thickness=0,this.position="left"}get direction(){return["top","bottom"].includes(this.position)?tG.X:tG.Y}updateDirection(){switch(this.position){case"top":this.rotation=-90,this.label.mirrored=!0,this.label.parallel=!0;break;case"right":this.rotation=0,this.label.mirrored=!0,this.label.parallel=!1;break;case"bottom":this.rotation=-90,this.label.mirrored=!1,this.label.parallel=!0;break;case"left":this.rotation=0,this.label.mirrored=!1,this.label.parallel=!1}this.axisContext&&(this.axisContext.position=this.position,this.axisContext.direction=this.direction)}update(e){return this.updateDirection(),super.update(e)}calculateLayout(e){return this.updateDirection(),super.calculateLayout(e)}createAxisContext(){return Object.assign(Object.assign({},super.createAxisContext()),{position:this.position})}assignCrossLineArrayConstructor(e){var t;null===(t=na.constructedArrays)||void 0===t||t.set(e,nM)}createLabel(){return new nX}}v([ea(eR(0)),b("design:type",Number)],nH.prototype,"thickness",void 0),v([ea(eJ),b("design:type",String)],nH.prototype,"position",void 0);class nU extends nH{constructor(e){super(e,new ei),this._paddingOverrideEnabled=!1,this.groupPaddingInner=.1,this.includeInvisibleDomains=!0}set paddingInner(e){this._paddingOverrideEnabled=!0,this.scale.paddingInner=e}get paddingInner(){return this._paddingOverrideEnabled=!0,this.scale.paddingInner}set paddingOuter(e){this.scale.paddingOuter=e}get paddingOuter(){return this.scale.paddingOuter}normaliseDataDomain(e){let t=[],i=new Set;for(let s of e){let e=s instanceof Date?s.getTime():s;i.has(e)||(i.add(e),t.push(s))}return{domain:t,clipped:!1}}calculateDomain(){if(!this._paddingOverrideEnabled){let e=this.boundSeries.map(e=>{var t;return null===(t=e.getBandScalePadding)||void 0===t?void 0:t.call(e)}).filter(e=>null!=e);e.length>0&&(this.scale.paddingInner=Math.min(...e.map(e=>e.inner)),this.scale.paddingOuter=Math.max(...e.map(e=>e.outer)))}return super.calculateDomain()}}nU.className="CategoryAxis",nU.type="category",v([ea(eR(0,1)),b("design:type",Number)],nU.prototype,"groupPaddingInner",void 0);class nK{constructor(e="",t,i=0){this.x=0,this.y=0,this.subtreeLeft=NaN,this.subtreeRight=NaN,this.screenX=0,this.screenY=0,this.children=[],this.leafCount=0,this.prelim=0,this.mod=0,this.ancestor=this,this.change=0,this.shift=0,this.label=e,this.parent=t,this.depth=t?t.depth+1:0,this.number=i}getLeftSibling(){return this.number>0&&this.parent?this.parent.children[this.number-1]:void 0}getLeftmostSibling(){return this.number>0&&this.parent?this.parent.children[0]:void 0}nextLeft(){return this.children?this.children[0]:this.thread}nextRight(){return this.children?this.children[this.children.length-1]:this.thread}getSiblings(){return this.parent?this.parent.children.filter((e,t)=>t!==this.number):[]}}class nq{constructor(){this.top=1/0,this.right=-1/0,this.bottom=-1/0,this.left=1/0}update(e,t){let{x:i,y:s}=t(e);i>this.right&&(this.right=i),i<this.left&&(this.left=i),s>this.bottom&&(this.bottom=s),s<this.top&&(this.top=s)}}class nZ{constructor(){this.dimensions=new nq,this.leafCount=0,this.nodes=[],this.leafNodes=[],this.nonLeafNodes=[],this.depth=0}update(e){this.dimensions.update(e,e=>({x:e.x,y:e.y})),e.children.length?this.nonLeafNodes.push(e):(this.leafCount++,this.leafNodes.push(e)),e.depth>this.depth&&(this.depth=e.depth),this.nodes.push(e)}resize(e,t,i=0,s=0,n=!1){let r=this.leafCount-1,a=this.depth,o=this.dimensions,l=1,h=1;if(e>0&&r){let t=(o.right-o.left)/r;l=e/r/t,n&&(l=-l)}if(t>0&&a){let e=(o.bottom-o.top)/a;h=t/a/e}let d=new nq;this.nodes.forEach(e=>{e.screenX=e.x*l,e.screenY=e.y*h,d.update(e,e=>({x:e.screenX,y:e.screenY}))});let u=-d.left,c=-d.top;this.nodes.forEach(e=>{e.screenX+=u+i,e.screenY+=c+s})}}class nJ extends nF{constructor(){super(...arguments),this.grid=!1}}v([ea(ev),b("design:type",Boolean)],nJ.prototype,"grid",void 0);class nQ extends nH{constructor(e){super(e,new ei),this.tickScale=new ei,this.line=new nj,this.label=new nJ,this.labelColor="rgba(87, 87, 87, 1)",this.includeInvisibleDomains=!0;let{tickLineGroup:t,tickLabelGroup:i,gridLineGroup:s,tickScale:n,scale:r}=this;r.paddingOuter=.1,r.paddingInner=2*r.paddingOuter,this.range=r.range.slice(),this.refreshScale(),n.paddingInner=1,n.paddingOuter=0,this.gridLineSelection=iP.select(s,iB),this.axisLineSelection=iP.select(t,iB),this.separatorSelection=iP.select(t,iB),this.labelSelection=iP.select(i,tm)}updateRange(){let{range:e,visibleRange:t,scale:i}=this,s=(e[1]-e[0])/(t[1]-t[0]),n=s*t[0],r=e[0]-n;this.tickScale.range=i.range=[r,r+s],this.resizeTickTree()}resizeTickTree(){var e;let t=this.scale,i=t.domain.length?[t.convert(t.domain[0]),t.convert(t.domain[t.domain.length-1])]:t.range,s=this.tickTreeLayout,n=this.lineHeight;s&&s.resize(Math.abs(i[1]-i[0]),s.depth*n,(Math.min(i[0],i[1])||0)+(null!==(e=t.bandwidth)&&void 0!==e?e:0)/2,-s.depth*n,i[1]-i[0]<0)}get lineHeight(){return 1.5*this.label.fontSize}set gridLength(e){(this._gridLength&&!e||!this._gridLength&&e)&&(this.gridLineSelection.clear(),this.labelSelection.clear()),this._gridLength=e}get gridLength(){return this._gridLength}calculateDomain(){var e;let t;let{direction:i}=this,s=[];this.boundSeries.filter(e=>e.visible).forEach(e=>{if(i===tG.X){if(void 0===t){let n=e.getDomain(i);s.push(n),t="number"==typeof n[0]}else t&&s.push(e.getDomain(i))}else s.push(e.getDomain(i))});let n=[].concat(...s),r=null!==(e=N(n))&&void 0!==e?e:n;this.dataDomain=this.normaliseDataDomain(r),this.scale.domain=this.dataDomain.domain}normaliseDataDomain(e){let t=e.filter((e,t,i)=>i.indexOf(e)===t),i=function(e,t=!0){let i=new nK,s=0;return t&&e.forEach(e=>s=Math.max(s,e.labels.length)),e.forEach(e=>{if(t)for(;e.labels.length<s;)e.labels.unshift("");(function(e,t){let i=t.labels.slice().reverse(),s=i.length-1;i.forEach((t,i)=>{let n=e.children,r=n.find(e=>e.label===t),a=i!==s;if(r&&a)e=r;else{let i=new nK(t,e);i.number=n.length,n.push(i),a&&(e=i)}})})(i,e)}),i}(t);this.tickTreeLayout=function(e){let t=new nZ;return!function e(t,i){let s=t.children;if(s.length){let n=s[0];s.forEach(t=>{e(t,i),n=function(e,t,i){let s=e.getLeftSibling();if(s){let a=e,o=e,l=s,h=o.getLeftmostSibling(),d=o.mod,u=a.mod,c=l.mod,p=h.mod;for(;l.nextRight()&&o.nextLeft();){l=l.nextRight(),o=o.nextLeft(),h=h.nextLeft(),(a=a.nextRight()).ancestor=e;let s=l.prelim+c-(o.prelim+d)+i;if(s>0){var n,r;(function(e,t,i){let s=i/(t.number-e.number);t.change-=s,t.shift+=i,e.change+=s,t.prelim+=i,t.mod+=i})((n=l,r=t,e.getSiblings().indexOf(n.ancestor)>=0?n.ancestor:r),e,s),d+=s,u+=s}c+=l.mod,d+=o.mod,p+=h.mod,u+=a.mod}l.nextRight()&&!a.nextRight()?(a.thread=l.nextRight(),a.mod+=c-u):(o.nextLeft()&&!h.nextLeft()&&(h.thread=o.nextLeft(),h.mod+=d-p),t=e)}return t}(t,n,i)}),function(e){let t=e.children;if(t){let e=0,i=0;for(let s=t.length-1;s>=0;s--){let n=t[s];n.prelim+=e,n.mod+=e,i+=n.change,e+=n.shift+i}}}(t);let r=(s[0].prelim+s[s.length-1].prelim)/2,a=t.getLeftSibling();a?(t.prelim=a.prelim+i,t.mod=t.prelim-r):t.prelim=r}else{let e=t.getLeftSibling();t.prelim=e?e.prelim+i:0}}(e,1),!function e(t,i,s){t.x=t.prelim+i,t.y=t.depth,s.update(t),t.children.forEach(n=>e(n,i+t.mod,s))}(e,-e.prelim,t),!function e(t){let i=t.children,s=0;i.forEach(t=>{e(t),t.children.length?s+=t.leafCount:s++}),t.leafCount=s,i.length?(t.subtreeLeft=i[0].subtreeLeft,t.subtreeRight=i[t.children.length-1].subtreeRight,t.x=(t.subtreeLeft+t.subtreeRight)/2):(t.subtreeLeft=t.x,t.subtreeRight=t.x)}(e),t}(i);let s=t.slice();return s.push(""),this.tickScale.domain=s,this.resizeTickTree(),{domain:t,clipped:!1}}update(){this.computedLayout&&(this.updatePosition(),this.updateTitleCaption(),this.updateCategoryLabels(),this.updateSeparators(),this.updateAxisLines(),this.updateCategoryGridLines(),this.resetSelectionNodes())}updateTitleCaption(){let{_titleCaption:e}=this;e.node.visible=!1}updateCategoryLabels(){if(!this.computedLayout)return;let{tickLabelLayout:e}=this.computedLayout;this.labelSelection.update(e).each((e,t)=>{e.setProperties(t)})}updateSeparators(){if(!this.computedLayout)return;let{separatorLayout:e}=this.computedLayout,{range:t}=this;this.separatorSelection.update(e).each((e,i)=>{e.x1=i.x1,e.x2=i.x2,e.y1=i.y,e.y2=i.y,e.visible=i.y>=t[0]-1e-7&&i.y<=t[1]+1e-7,e.stroke=this.tick.color,e.fill=void 0,e.strokeWidth=1})}updateAxisLines(){if(!this.computedLayout)return;let{axisLineLayout:e}=this.computedLayout;this.axisLineSelection.update(e).each((e,t)=>{e.setProperties(Object.assign(Object.assign({},t),{stroke:this.line.color,strokeWidth:this.line.width})),e.x1=t.x,e.x2=t.x,e.y1=t.y1,e.y2=t.y2,e.strokeWidth=this.line.width,e.stroke=this.line.color})}updateCategoryGridLines(){let{gridLength:e,gridLine:t,label:i,range:s,tickScale:n}=this,r=n.ticks(),a=i.getSideFlag(),o=this.gridLineSelection.update(e?r:[]);if(e){let{width:i,style:r}=t,l=r.length;o.each((t,o,h)=>{let d=Math.round(n.convert(o));t.x1=0,t.x2=-a*e,t.y1=d,t.y2=d,t.visible=d>=s[0]&&d<=s[1];let{stroke:u,lineDash:c}=r[h%l];t.stroke=u,t.strokeWidth=i,t.lineDash=c,t.fill=void 0})}}computeLayout(){this.updateDirection(),this.calculateDomain(),this.updateRange();let{scale:e,label:t,label:{parallel:i},moduleCtx:{callbackCache:s},range:n,title:r,title:{formatter:a=e=>e.defaultValue}={}}=this,o=e.range[0],l=e.range[1],h=Math.abs(l-o)/e.domain.length||0,d=ee(this.rotation),u=1e-8>Math.abs(Math.cos(d)),c=t.getSideFlag(),p=this.lineHeight,g=this.tickTreeLayout,f=e.ticks(),m=g?g.nodes:[],y=!!g&&g.depth>1,{defaultRotation:v,configuredRotation:b,parallelFlipFlag:x}=sh({rotation:t.rotation,parallel:i,regularFlipRotation:J(d-Math.PI/2),parallelFlipRotation:J(d)}),S=[],k=e=>({fill:e.fill,fontFamily:e.fontFamily,fontSize:e.fontSize,fontStyle:e.fontStyle,fontWeight:e.fontWeight,rotation:e.rotation,rotationCenterX:e.rotationCenterX,rotationCenterY:e.rotationCenterY,text:e.text,textAlign:e.textAlign,textBaseline:e.textBaseline,translationX:e.translationX,translationY:e.translationY,visible:e.visible,x:e.x,y:e.y}),D=new Map,w=0,O=new tm,M=(e,i)=>{var o;if(O.setProperties({fill:t.color,fontFamily:t.fontFamily,fontSize:t.fontSize,fontStyle:t.fontStyle,fontWeight:t.fontWeight,textAlign:"center",textBaseline:-1===x?"bottom":"hanging",translationX:e.screenY-.25*t.fontSize,translationY:e.screenX}),0===i){if(!((null==r?void 0:r.enabled)&&f.length>0))return!1;let i=s.call(a,this.getTitleFormatterParams());O.setProperties({fill:r.color,fontFamily:r.fontFamily,fontSize:r.fontSize,fontStyle:r.fontStyle,fontWeight:r.fontWeight,text:i,textBaseline:"hanging",translationX:e.screenY-.25*t.fontSize,translationY:e.screenX})}else{if(!(e.screenX>=n[0]&&e.screenX<=n[1]))return!1;t.formatter?O.text=null!==(o=s.call(t.formatter,{value:String(e.label),index:i}))&&void 0!==o?o:String(e.label):O.text=String(e.label)}return!0};m.forEach((e,t)=>{if(M(e,t)){let e=O.computeTransformedBBox();e&&(D.set(t,e),e.width>w&&(w=e.width))}});let N=c*t.padding,E=this.label.grid,C=[];m.forEach((e,t)=>{let i,s=M(e,t);O.x=N,O.rotationCenterX=N;let n=!e.children.length;if(n){O.rotation=b,O.textAlign="end",O.textBaseline="middle";let e=D.get(t);e&&e.height>h&&(s=!1,D.delete(t))}else{O.translationX-=w-p+this.label.padding;let i=e.leafCount*h,n=D.get(t);n&&n.width>i?(s=!1,D.delete(t)):u?O.rotation=v:O.rotation=-Math.PI/2}if(e.parent&&y){let t=n?e.screenX-h/2:e.screenX-e.leafCount*h/2;if(n)(e.number!==e.children.length-1||E)&&C.push({y:t,x1:0,x2:-w-2*this.label.padding});else{let i=-w-2*this.label.padding+e.screenY;C.push({y:t,x1:i+p,x2:i})}}if(s){let e=O.computeTransformedBBox();e&&D.set(t,e),i=Object.assign(Object.assign({},k(O)),{visible:s})}else D.delete(t),i={visible:s};S.push(i)});let A=0;C.forEach(e=>A=Math.min(A,e.x2)),C.push({y:Math.max(o,l),x1:0,x2:A});let L=[],R=[];C.forEach(e=>{if(e.y>=n[0]-1e-7&&e.y<=n[1]+1e-7){let{x1:t,x2:i,y:s}=e,n=new ts(Math.min(t,i),s,Math.abs(t-i),0);R.push(n),L.push({x1:t,x2:i,y:s})}});let T=[],I=[],_=g?g.depth+1:1;for(let e=0;e<_;e++){let t=f.length>0&&(0===e||E&&y),i=e>0?-w-2*this.label.padding-(e-1)*p:0,s=new ts(i,Math.min(...n),0,Math.abs(n[1]-n[0]));I.push(s),T.push({x:i,y1:n[0],y2:n[1],visible:t})}return{bbox:(e=>{let t=new tn,{rotation:i,translationX:s,translationY:n,rotationCenterX:r,rotationCenterY:a}=this.getAxisTransform();return tn.updateTransformMatrix(t,1,1,i,s,n,{scalingCenterX:0,scalingCenterY:0,rotationCenterX:r,rotationCenterY:a}),t.transformBBox(e)})(ts.merge([...D.values(),...R,...I])),tickLabelLayout:S,separatorLayout:L,axisLineLayout:T}}calculateLayout(){let{axisLineLayout:e,separatorLayout:t,tickLabelLayout:i,bbox:s}=this.computeLayout();return this.computedLayout={axisLineLayout:e,separatorLayout:t,tickLabelLayout:i},{bbox:s,primaryTickCount:void 0}}}nQ.className="GroupedCategoryAxis",nQ.type="grouped-category",v([ea(eE),b("design:type",String)],nQ.prototype,"labelColor",void 0);class n0{static isSupported(){return"undefined"!=typeof OffscreenCanvas&&null!=OffscreenCanvas.prototype.transferToImageBitmap}constructor({width:e=600,height:t=300,overrideDevicePixelRatio:i}){this.enabled=!0,this._pixelRatio=NaN,this._width=0,this._height=0,this.canvas=new OffscreenCanvas(e,t),this.realContext=this.canvas.getContext("2d"),this.imageSource=this.canvas.transferToImageBitmap(),this.context=this.setPixelRatio(i),this.resize(e,t)}snapshot(){this.imageSource.close(),this.imageSource=this.canvas.transferToImageBitmap()}destroy(){this.imageSource.close(),this.canvas.width=0,this.canvas.height=0,this.context.clearRect(0,0,0,0)}clear(){this.context.save(),this.context.resetTransform(),this.context.clearRect(0,0,this.width,this.height),this.context.restore()}get pixelRatio(){return this._pixelRatio}setPixelRatio(e){let t=null!=e?e:window.devicePixelRatio;return th()||(t=1),this._pixelRatio=t,td.overrideScale(this.realContext,t)}get width(){return this._width}get height(){return this._height}resize(e,t){if(!(e>0&&t>0))return;let{canvas:i,context:s,pixelRatio:n}=this;i.width=Math.round(e*n),i.height=Math.round(t*n),s.resetTransform(),this._width=e,this._height=t}}(is=tJ||(tJ={})).SCENE="scene",is.SCENE_STATS="scene:stats",is.SCENE_STATS_VERBOSE="scene:stats:verbose",is.SCENE_DIRTY_TREE="scene:dirtyTree";let n1="adv-composite",n2="dom-composite";class n5{constructor(e){var t;this.id=ti(this),this.layers=[],this._nextZIndex=0,this._nextLayerId=0,this._dirty=!1,this._root=null,this.debug=B.create(!0,tJ.SCENE);let{document:i,window:s,mode:n=null!==(t=I("agChartsSceneRenderModel"))&&void 0!==t?t:n1,width:r,height:a,overrideDevicePixelRatio:o}=e;this.overrideDevicePixelRatio=o,this.opts={document:i,window:s,mode:n},this.canvas=new td({document:i,window:s,width:r,height:a,overrideDevicePixelRatio:o})}set container(e){this.canvas.container=e}get container(){return this.canvas.container}download(e,t){this.canvas.download(e,t)}getDataURL(e){return this.canvas.getDataURL(e)}get width(){return this.pendingSize?this.pendingSize[0]:this.canvas.width}get height(){return this.pendingSize?this.pendingSize[1]:this.canvas.height}resize(e,t){e=Math.round(e),t=Math.round(t);let i=e<=0||t<=0,s=isNaN(e)||isNaN(t);return(e!==this.width||t!==this.height)&&!s&&!i&&(this.pendingSize=[e,t],this.markDirty(),!0)}addLayer(e){var t;let{mode:i}=this.opts;if(!["composite",n2,n1].includes(i))return;let{zIndex:s=this._nextZIndex++,name:n,zIndexSubOrder:r,getComputedOpacity:a,getVisibility:o}=e,{width:l,height:h,overrideDevicePixelRatio:d}=this,u=i===n2,c=i===n1&&n0.isSupported()?new n0({width:l,height:h,overrideDevicePixelRatio:d}):new td({document:this.opts.document,window:this.opts.window,width:l,height:h,domLayer:u,zIndex:s,name:n,overrideDevicePixelRatio:d}),p={id:this._nextLayerId++,name:n,zIndex:s,zIndexSubOrder:r,canvas:c,getComputedOpacity:a,getVisibility:o};if(s>=this._nextZIndex&&(this._nextZIndex=s+1),this.layers.push(p),this.sortLayers(),u){let e=this.layers.map(e=>e.canvas).filter(e=>e instanceof td),i=e.findIndex(e=>e===c);(null!==(t=e[i-1])&&void 0!==t?t:this.canvas).element.insertAdjacentElement("afterend",c.element)}return this.debug("Scene.addLayer() - layers",this.layers),p.canvas}removeLayer(e){let t=this.layers.findIndex(t=>t.canvas===e);t>=0&&(this.layers.splice(t,1),e.destroy(),this.markDirty(),this.debug("Scene.removeLayer() -  layers",this.layers))}moveLayer(e,t,i){let s=this.layers.find(t=>t.canvas===e);s&&(s.zIndex=t,s.zIndexSubOrder=i,this.sortLayers(),this.markDirty(),this.debug("Scene.moveLayer() -  layers",this.layers))}sortLayers(){this.layers.sort((e,t)=>{var i,s;return iI([e.zIndex,...null!==(i=e.zIndexSubOrder)&&void 0!==i?i:[void 0,void 0],e.id],[t.zIndex,...null!==(s=t.zIndexSubOrder)&&void 0!==s?s:[void 0,void 0],t.id],iT)})}markDirty(){this._dirty=!0}get dirty(){return this._dirty}set root(e){var t;e!==this._root&&(null===(t=this._root)||void 0===t||t._setLayerManager(),this._root=e,e&&e._setLayerManager({addLayer:e=>this.addLayer(e),moveLayer:(...e)=>this.moveLayer(...e),removeLayer:(...e)=>this.removeLayer(...e),markDirty:()=>this.markDirty(),canvas:this.canvas,debug:B.create(tJ.SCENE)}),this.markDirty())}get root(){return this._root}strip(){let{layers:e}=this;for(let t of e)t.canvas.destroy(),delete t.canvas;e.splice(0,e.length),this.root=null,this._dirty=!1,this.canvas.context.resetTransform()}destroy(){this.container=void 0,this.strip(),this.canvas.destroy(),Object.assign(this,{canvas:void 0,ctx:void 0})}render(e){var t,i;return x(this,void 0,void 0,function*(){let{debugSplitTimes:s={start:performance.now()},extraDebugStats:n={}}=null!=e?e:{},{canvas:r,canvas:{context:a},root:o,layers:l,pendingSize:h,opts:{mode:d}}=this;if(h&&(this.canvas.resize(...h),this.layers.forEach(e=>e.canvas.resize(...h)),this.pendingSize=void 0),o&&!o.visible){this._dirty=!1;return}if(o&&!this.dirty){this.debug("Scene.render() - no-op",{redrawType:tz[o.dirty],tree:this.buildTree(o)}),this.debugStats(s,a,void 0,n);return}let u={ctx:a,devicePixelRatio:null!==(t=this.canvas.pixelRatio)&&void 0!==t?t:1,forceRender:!0,resized:!!h,debugNodes:{}};B.check(tJ.SCENE_STATS_VERBOSE)&&(u.stats={layersRendered:0,layersSkipped:0,nodesRendered:0,nodesSkipped:0});let c=!1;if((!o||o.dirty>=tz.TRIVIAL)&&(c=!0,r.clear()),o){let{dirtyTree:e,paths:t}=this.buildDirtyTree(o);B.create(tJ.SCENE_DIRTY_TREE)("Scene.render() - dirtyTree",{dirtyTree:e,paths:t})}o&&c&&(this.debug("Scene.render() - before",{redrawType:tz[o.dirty],canvasCleared:c,tree:this.buildTree(o)}),o.visible&&(a.save(),o.render(u),a.restore())),s[""]=performance.now(),d!==n2&&l.length>0&&c&&(this.sortLayers(),a.save(),a.setTransform(1/r.pixelRatio,0,0,1/r.pixelRatio,0,0),l.forEach(({canvas:{imageSource:e,enabled:t},getComputedOpacity:i,getVisibility:s})=>{t&&s()&&(a.globalAlpha=i(),a.drawImage(e,0,0))}),a.restore(),s[""]=performance.now()),null===(i=a.verifyDepthZero)||void 0===i||i.call(a),this._dirty=!1,this.debugStats(s,a,u.stats,n),this.debugSceneNodeHighlight(a,u.debugNodes),o&&this.debug("Scene.render() - after",{redrawType:tz[o.dirty],canvasCleared:c,tree:this.buildTree(o)})})}debugStats(e,t,i,s={}){if(B.check(tJ.SCENE_STATS,tJ.SCENE_STATS_VERBOSE)){let n=performance.now(),r=e.start;e.end=performance.now();let a=(e,t)=>{let i=e+t;return`${e} / ${i} (${Math.round(100*e/i)}%)`},o=(e,t,i)=>`${e}: ${Math.round((i-t)*100)/100}ms`,{layersRendered:l=0,layersSkipped:h=0,nodesRendered:d=0,nodesSkipped:u=0}=null!=i?i:{},c=0,p=Object.entries(e).filter(([e])=>"end"!==e).map(([e,t],i)=>{let s=i>0?o(e,c,t):null;return c=t,s}).filter(e=>null!=e).join(" + "),g=Object.entries(s).map(([e,t])=>`${e}: ${t}`).join(" ; "),f=B.check(tJ.SCENE_STATS_VERBOSE),m=[`${o("",r,n)} (${p})`,`${g}`,`Layers: ${f?a(l,h):this.layers.length}`,f?`Nodes: ${a(d,u)}`:null].filter(e=>null!=e).map(e=>[e,td.getTextSize(e,t.font)]),y=Math.max(...m.map(([,{width:e}])=>e)),v=m.reduce((e,[,{height:t}])=>e+t,0);t.save(),t.fillStyle="white",t.fillRect(0,0,y,v),t.fillStyle="black";let b=0;for(let[e,i]of m)b+=i.height,t.fillText(e,2,b);t.restore()}}debugSceneNodeHighlight(e,t){var i;let s=e=>t=>!!e.test(t.id)||t instanceof i_&&null!=t.name&&e.test(t.name),n=e=>t=>e===t.id||t instanceof i_&&null!=t.name&&e===t.name;for(let e of A(I("agChartsSceneDebug")).flatMap(e=>"layout"===e?["seriesRoot","legend","root",/.*Axis-\d+-axis.*/]:e)){if("string"==typeof e&&null!=t[e])continue;let r="string"==typeof e?n(e):s(e),a=null===(i=this.root)||void 0===i?void 0:i.findNodes(r);if(!a||0===a.length){T.log(`Scene.render() - no debugging node with id [${e}] in scene graph.`);continue}for(let e of a)e instanceof i_&&e.name?t[e.name]=e:t[e.id]=e}for(let[i,s]of(e.save(),Object.entries(t))){let t=s.computeTransformedBBox();if(!t){T.log(`Scene.render() - no bbox for debugged node [${i}].`);continue}e.globalAlpha=.8,e.strokeStyle="red",e.lineWidth=1,e.strokeRect(t.x,t.y,t.width,t.height),e.fillStyle="red",e.strokeStyle="white",e.font="16px sans-serif",e.textBaseline="top",e.textAlign="left",e.lineWidth=2,e.strokeText(i,t.x,t.y,t.width),e.fillText(i,t.x,t.y,t.width)}e.restore()}buildTree(e){var t,i;return Object.assign(Object.assign({name:null!==(t=e instanceof i_?e.name:null)&&void 0!==t?t:e.id,node:e,dirty:tz[e.dirty]},(null===(i=e.parent)||void 0===i?void 0:i.isVirtual)?{virtualParentDirty:tz[e.parent.dirty],virtualParent:e.parent}:{}),e.children.map(e=>this.buildTree(e)).reduce((e,t)=>{let{name:i}=t,{node:{visible:s,opacity:n,zIndex:r,zIndexSubOrder:a},node:o,virtualParent:l}=t;(!s||n<=0)&&(i=`(${i})`),o instanceof i_&&o.isLayer()&&(i=`*${i}*`);let h=[`${null!=i?i:"<unknown>"}`,`z: ${r}`,a&&`zo: ${a.map(e=>"function"==typeof e?`${e()} (fn)`:e).join(" / ")}`,l&&"(virtual parent)"].filter(e=>!!e).join(" "),d=h,u=1;for(;null!=e[d]&&u<100;)d=`${h} (${u++})`;return e[d]=t,e},{}))}buildDirtyTree(e){var t;if(e.dirty===tz.NONE)return{dirtyTree:{},paths:[]};let i=e.children.map(e=>this.buildDirtyTree(e)).filter(e=>e.paths.length>0),s=null!==(t=e instanceof i_?e.name:null)&&void 0!==t?t:e.id,n=0===i.length?[s]:i.map(e=>e.paths).reduce((e,t)=>e.concat(t),[]).map(e=>`${s}.${e}`);return{dirtyTree:Object.assign({name:s,node:e,dirty:tz[e.dirty]},i.map(e=>e.dirtyTree).filter(e=>void 0!==e.dirty).reduce((e,t)=>{var i;return e[null!==(i=t.name)&&void 0!==i?i:"<unknown>"]=t,e},{})),paths:n}}}n5.className="Scene";class n3{constructor(){this.cache=new WeakMap}call(e,...t){let i;let s=this.cache.get(e),n=()=>{try{let n=e(...t);return s&&null!=i&&s.set(i,n),n}catch(e){T.warnOnce("User callback errored, ignoring",e);return}};try{i=JSON.stringify(t)}catch(e){return n()}return(null==s&&(s=new Map,this.cache.set(e,s)),s.has(i))?s.get(i):n()}invalidateCache(){this.cache=new WeakMap}}class n4{constructor(){this.available=!0,this.acquireQueue=[]}acquire(e){return new Promise(t=>{this.acquireQueue.push([e,t]),this.available&&this.dispatchNext()})}acquireImmediately(e){return x(this,void 0,void 0,function*(){return!!this.available&&(yield this.acquire(e),!0)})}waitForClearAcquireQueue(){return x(this,void 0,void 0,function*(){return this.acquire(()=>x(this,void 0,void 0,function*(){}))})}dispatchNext(){var e,t;return x(this,void 0,void 0,function*(){this.available=!1;let[i,s]=null!==(e=this.acquireQueue.shift())&&void 0!==e?e:[];for(;i;){try{yield i(),null==s||s()}catch(e){T.error("mutex callback error",e),null==s||s()}[i,s]=null!==(t=this.acquireQueue.shift())&&void 0!==t?t:[]}this.available=!0})}}function n6(e,t){let i,s,n=0,r=!1,a=()=>r,o=()=>{r=!1,null==s||s(),s=void 0,i=void 0,n>0&&e(l)},l=()=>{let e=n;n=0,r=!0;let i=t({count:e});if(!i){o();return}i.then(o).catch(o)};return{schedule(t){0!==n||a()||e(l,t),n++},await(){return x(this,void 0,void 0,function*(){if(a())for(null==i&&(i=new Promise(e=>{s=e}));a();)yield i})}}}class n8{static init(e){"undefined"!=typeof ResizeObserver?this.resizeObserver=new ResizeObserver(e=>{for(let t of e){let{width:e,height:i}=t.contentRect;this.checkSize(this.elements.get(t.target),t.target,e,i)}}):this.pollerHandler=window.setInterval(()=>{this.elements.forEach((e,t)=>{this.checkClientSize(t,e)})},100),this.ready=!0,this.documentReady="loading"!==e.readyState,this.documentReady||(this.readyEventFn=()=>{let t="loading"!==e.readyState,i=this.documentReady;if(this.documentReady=t,t&&t!==i){for(let[e,t]of this.queuedObserveRequests)this.observe(e,t);this.queuedObserveRequests.length=0}},e.addEventListener("DOMContentLoaded",this.readyEventFn))}static destroy(){var e;null!=this.pollerHandler&&(clearInterval(this.pollerHandler),this.pollerHandler=void 0),this.readyEventFn&&(document.removeEventListener("DOMContentLoaded",this.readyEventFn),this.readyEventFn=void 0),null===(e=this.resizeObserver)||void 0===e||e.disconnect(),this.resizeObserver=void 0,this.ready=!1}static checkSize(e,t,i,s){e&&(!e.size||i!==e.size.width||s!==e.size.height)&&(e.size={width:i,height:s},e.cb(e.size,t))}static observe(e,t){if(this.ready||this.init(e.ownerDocument),!this.documentReady){this.queuedObserveRequests.push([e,t]);return}this.unobserve(e,!1),this.resizeObserver&&this.resizeObserver.observe(e),this.elements.set(e,{cb:t})}static unobserve(e,t=!0){this.resizeObserver&&this.resizeObserver.unobserve(e),this.elements.delete(e),this.queuedObserveRequests=this.queuedObserveRequests.filter(([t])=>t===e),t&&0===this.elements.size&&this.destroy()}static checkClientSize(e,t){let i=e.clientWidth?e.clientWidth:0,s=e.clientHeight?e.clientHeight:0;this.checkSize(t,e,i,s)}}n8.elements=new Map,n8.ready=!1,n8.documentReady=!1,n8.queuedObserveRequests=[];class n9{constructor(){this.range="tooltip"}}v([ea(eF("tooltip","node")),b("design:type",String)],n9.prototype,"range",void 0),(ir=tQ||(tQ={}))[ir.FULL=0]="FULL",ir[ir.PROCESS_DATA=1]="PROCESS_DATA",ir[ir.PERFORM_LAYOUT=2]="PERFORM_LAYOUT",ir[ir.SERIES_UPDATE=3]="SERIES_UPDATE",ir[ir.TOOLTIP_RECALCULATION=4]="TOOLTIP_RECALCULATION",ir[ir.SCENE_RENDER=5]="SCENE_RENDER",ir[ir.NONE=6]="NONE";class n7{constructor(e){this.type=e,this.continuousDomain=[1/0,-1/0],this.discreteDomain=new Set}extend(e){"discrete"===this.type?this.discreteDomain.add(e):"continuous"===this.type&&(this.continuousDomain[0]>e&&(this.continuousDomain[0]=e),this.continuousDomain[1]<e&&(this.continuousDomain[1]=e))}getDomain(){if("discrete"===this.type)return this.discreteDomain;if("continuous"===this.type)return this.continuousDomain;throw Error("AG Charts - Unsupported data domain type: "+this.type)}}function re(e,t){var i;let s=function(e){if(void 0===e)return[];let[t,i]=e;return(i=+i,0==(t=+t)&&0===i)?[0,1]:t===1/0&&i===-1/0?[]:(t===1/0&&(t=0),i===-1/0&&(i=0),i3(t)&&i3(i))?[t,i]:[]}(e);if(0===s.length)return s;let[n,r]=s;if(n===r){let[e,s]=null!==(i=null==t?void 0:t.calculatePadding(n,r))&&void 0!==i?i:[1,1];n-=e,r+=s}return[n,r]}let rt=Symbol("invalid");class ri{constructor(e){let{props:t,mode:i="standalone"}=e;this.mode=i;let s=!0;for(let e of t){if("key"===e.type&&!s)throw Error("AG Charts - internal config error: keys must come before values.");"value"===e.type&&s&&(s=!1)}for(let i of(this.opts=Object.assign({dataVisible:!0},e),this.keys=t.filter(e=>"key"===e.type).map((e,t)=>Object.assign(Object.assign({},e),{index:t,missing:0})),this.values=t.filter(e=>"value"===e.type).map((e,t)=>Object.assign(Object.assign({},e),{index:t,missing:0})),this.aggregates=t.filter(e=>"aggregate"===e.type).map((e,t)=>Object.assign(Object.assign({},e),{index:t})),this.groupProcessors=t.filter(e=>"group-value-processor"===e.type).map((e,t)=>Object.assign(Object.assign({},e),{index:t})),this.propertyProcessors=t.filter(e=>"property-value-processor"===e.type).map((e,t)=>Object.assign(Object.assign({},e),{index:t})),this.reducers=t.filter(e=>"reducer"===e.type).map((e,t)=>Object.assign(Object.assign({},e),{index:t})),this.processors=t.filter(e=>"processor"===e.type).map((e,t)=>Object.assign(Object.assign({},e),{index:t})),this.values))if(null==i.property)throw Error(`AG Charts - internal config error: no properties specified for value definitions: ${JSON.stringify(i)}`);let n=({matchGroupIds:e})=>{for(let t of null!=e?e:[])if(!this.values.some(e=>e.groupId===t))throw Error(`AG Charts - internal config error: matchGroupIds properties must match defined groups (${t}).`)},r=({matchIds:e})=>{for(let t of null!=e?e:[])if(!this.values.some(e=>{var i;return null===(i=e.ids)||void 0===i?void 0:i.some(([e,i])=>e===t[0]&&i===t[1])}))throw Error(`AG Charts - internal config error: matchGroupIds properties must match defined groups (${t}).`)};for(let e of[...this.groupProcessors,...this.aggregates])r(e),n(e)}resolveProcessedDataIndexById(e,t){var i;let{index:s,def:n}=null!==(i=this.resolveProcessedDataDefById(e,t))&&void 0!==i?i:{};return{index:s,def:n}}resolveProcessedDataIndicesById(e,t){return this.resolveProcessedDataDefsById(e,t).map(({index:e,def:t})=>({index:e,def:t}))}resolveProcessedDataDefById(e,t){return this.resolveProcessedDataDefsById(e,t)[0]}resolveProcessedDataDefsByIds(e,t){let i=[];for(let s of t)i.push([s,this.resolveProcessedDataDefsById(e,s)]);return i}resolveProcessedDataDefsValues(e,{keys:t,values:i}){let s={};for(let[n,[{index:r,def:a}]]of e){let e="key"===a.type?t:i;s[n]=e[r]}return s}resolveProcessedDataDefsById(e,t){let{keys:i,values:s,aggregates:n,groupProcessors:r,reducers:a}=this,o=i=>{let{ids:s,scopes:n}=i;return!!(null!=s&&(null==e||(null==n?void 0:n.some(t=>t===e.id))))&&s.some(([i,s])=>i===e.id&&("string"==typeof t?s===t:t.test(s)))},l=[];for(let e of[i,s,n,r,a])l.push(...e.filter(o).map(e=>({index:e.index,def:e})));if(l.length>0)return l;throw Error(`AG Charts - didn't find property definition for [${t}, ${e.id}]`)}getDomain(e,t,i="value",s){var n,r,a,o;let l,h;try{l=this.resolveProcessedDataIndicesById(e,t)}catch(e){if("string"!=typeof t&&/didn't find property definition/.test(e.message))return[];throw e}switch(i){case"key":h="keys";break;case"value":h="values";break;case"aggregate":h="aggValues";break;case"group-value-processor":h="groups";break;default:return[]}let d=null!==(r=null===(n=s.domain[h])||void 0===n?void 0:n[l[0].index])&&void 0!==r?r:[];if(1===l.length)return d;let u=[...d];for(let e of l.slice(1))sv(null!==(o=null===(a=s.domain[h])||void 0===a?void 0:a[e.index])&&void 0!==o?o:[],u);return u}processData(e){let{opts:{groupByKeys:t,groupByFn:i},aggregates:s,groupProcessors:n,reducers:r,processors:a,propertyProcessors:o}=this,l=performance.now();for(let e of[...this.keys,...this.values])e.missing=0;if(t&&0===this.keys.length)return;let h=this.extractData(e);for(let l of(t?h=this.groupData(h):i&&(h=this.groupData(h,i(h))),n.length>0&&this.postProcessGroups(h),s.length>0&&this.aggregateData(h),o.length>0&&this.postProcessProperties(h),r.length>0&&this.reduceData(h),a.length>0&&this.postProcessData(h),[...this.keys,...this.values]))e.length>0&&l.missing>=e.length&&T.warnOnce(`the key '${l.property}' was not found in any data element.`);let d=performance.now();return h.time=d-l,B.check(!0,"data-model")&&function(e){var t,i;let s=(e,t)=>{t.length>0&&(T.log(`DataModel.processData() - ${e}`),T.table(t))};T.log("DataModel.processData() - processedData",e),s("Key Domains",e.domain.keys),s("Group Domains",null!==(t=e.domain.groups)&&void 0!==t?t:[]),s("Value Domains",e.domain.values),s("Aggregate Domains",null!==(i=e.domain.aggValues)&&void 0!==i?i:[]),s("Values","grouped"===e.type?e.data.reduce((e,t)=>{var i,s;let n=null!==(i=t.keys)&&void 0!==i?i:[],r=null!==(s=t.aggValues)&&void 0!==s?s:[],a=t.keys.map(()=>void 0),o=null==r?void 0:r.map(()=>void 0);return e.push(...t.values.map((e,t)=>[...0===t?n:a,...null!=e?e:[],...0==t?r:o])),e},[]):e.data.reduce((e,t)=>{var i;let s=null!==(i=t.aggValues)&&void 0!==i?i:[];return e.push([...t.keys,...t.values,...s]),e},[]))}(h),h}valueGroupIdxLookup({matchGroupIds:e,matchIds:t}){return this.values.map((e,t)=>({def:e,index:t})).filter(({def:i})=>(!e||null!=i.groupId&&!!e.includes(i.groupId))&&(!t||null!=i.ids&&t.some(([e,t])=>{var s;return null===(s=i.ids)||void 0===s?void 0:s.some(([i,s])=>i===e&&s===t)}))).map(({index:e})=>e)}valueIdxLookup(e,t){let i=null==e||0===e.length,s=t=>null==t||i===(null==t||0===t.length)||(null==t?void 0:t.some(t=>e.includes(t))),n="string"==typeof t?t:t.id,r=([e,t])=>s([e])&&t===n,a=this.values.findIndex(e=>{var t;return s(e.scopes)&&((null===(t=e.ids)||void 0===t?void 0:t.some(e=>r(e)))||e.property===n||e.id===n)});if(a>=0)return a;throw Error(`AG Charts - configuration error, unknown property ${JSON.stringify(t)} in scope(s) ${JSON.stringify(e)}`)}extractData(e){var t;let{keys:i,values:s,opts:{dataVisible:n}}=this,{dataDomain:r,processValue:a,scopes:o,allScopesHaveSameDefs:l}=this.initDataDomainProcessor(),h=Array(n?e.length:0),d=0,u=0;for(let r of e){let e,c;let p=o.size>0?new Set(o):void 0,g=n?Array(i.length):void 0,f=0;for(let t of i){if((e=a(t,r,e))===rt)break;g&&(g[f++]=e)}if(e===rt)continue;let m=n&&s.length>0?Array(s.length):void 0,y=0;for(let e of s)if((c=a(e,r,c))===rt){if(l)break;for(let i of null!==(t=e.scopes)&&void 0!==t?t:o)null==p||p.delete(i);if(y++,(null==p?void 0:p.size)===0)break}else m&&(m[y++]=c);if((c!==rt||!l)&&(null==p?void 0:p.size)!==0&&n){let e={datum:r,keys:g,values:m};!l&&p&&p.size<o.size&&(u++,e.validScopes=[...p]),h[d++]=e}}h.length=d;let c=e=>{let t=r.get(e).getDomain();return Array.isArray(t)&&t[0]>t[1]?[]:[...t]};return{type:"ungrouped",input:{count:e.length},data:h,domain:{keys:i.map(e=>c(e)),values:s.map(e=>c(e))},defs:{allScopesHaveSameDefs:l,keys:i,values:s},partialValidDataCount:u,time:0}}groupData(e,t){var i,s,n,r;let a=new Map;for(let o of e.data){let{keys:e,values:l,datum:h,validScopes:d}=o,u=t?t(o):e,c=u.map(e=>{if(null==e);else if("number"==typeof e||"string"==typeof e||"boolean"==typeof e);else if("object"==typeof e)return JSON.stringify(e);return e}).join("-");if(a.has(c)){let e=a.get(c);if(e.values.push(l),e.datum.push(h),null!=d)for(let t=0;t<(null!==(s=null===(i=e.validScopes)||void 0===i?void 0:i.length)&&void 0!==s?s:0);t++){let i=null===(n=e.validScopes)||void 0===n?void 0:n[t];d.some(e=>e===i)||null===(r=e.validScopes)||void 0===r||r.splice(t,1)}}else a.set(c,{keys:u,values:[l],datum:[h],validScopes:d})}let o=Array(a.size),l=Array(a.size),h=0;for(let[,{keys:e,values:t,datum:i,validScopes:s}]of a.entries())(null==s?void 0:s.length)!==0&&(l[h]=e,o[h++]={keys:e,values:t,datum:i,validScopes:s});return Object.assign(Object.assign({},e),{type:"grouped",data:o,domain:Object.assign(Object.assign({},e.domain),{groups:l})})}aggregateData(e){var t,i,s,n,r,a,o,l;let{aggregates:h}=this;if(!h)return;let d=h.map(()=>[1/0,-1/0]),u=h.map(e=>this.valueGroupIdxLookup(e)),c=h.map(e=>e.aggregateFunction),p=h.map(e=>e.groupAggregateFunction),g=h.map(e=>e.finalFunction);for(let f of e.data){let{values:m}=f,{validScopes:y}=f;null!==(t=f.aggValues)&&void 0!==t||(f.aggValues=Array(u.length)),"ungrouped"===e.type&&(m=[m]);let v=0;for(let e of u){if(!(null===(i=null==y?void 0:y.some(e=>{var t;return null===(t=h[v].matchScopes)||void 0===t?void 0:t.some(t=>e===t)}))||void 0===i||i)){v++;continue}let t=null!==(n=null===(s=p[v])||void 0===s?void 0:s.call(p))&&void 0!==n?n:sv([]);for(let i of m){let s=e.map(e=>i[e]),n=c[v](s,f.keys);n&&(t=null!==(a=null===(r=p[v])||void 0===r?void 0:r.call(p,n,t))&&void 0!==a?a:sv(n,t))}let u=(null!==(l=null===(o=g[v])||void 0===o?void 0:o.call(g,t))&&void 0!==l?l:t).map(e=>Number.isInteger(e)?e:Math.abs(e)>1e4?Math.trunc(e):Math.round(1e4*e)/1e4);sv(u,d[v]),f.aggValues[v++]=u}}e.domain.aggValues=d}postProcessGroups(e){var t,i,s,n,r;let{groupProcessors:a}=this;if(!a)return;let o=new Set,l=new Map,h=new Map,d=new Map;for(let e of a){let t=this.valueGroupIdxLookup(e);for(let i of(h.set(e,t),d.set(e,e.adjust()),t)){let e=this.values[i];o.add(i),l.set(i,new n7("category"===e.valueType?"discrete":"continuous"))}}let u=e=>{var t;for(let i of o)null===(t=l.get(i))||void 0===t||t.extend(e[i])};for(let o of e.data){for(let l of a){if(!(null===(i=null===(t=o.validScopes)||void 0===t?void 0:t.some(e=>{var t;return null===(t=l.matchScopes)||void 0===t?void 0:t.some(t=>e===t)}))||void 0===i||i))continue;let a=null!==(s=h.get(l))&&void 0!==s?s:[],u=null!==(r=null===(n=d.get(l))||void 0===n?void 0:n())&&void 0!==r?r:()=>void 0;if("grouped"===e.type){for(let e of o.values)e&&u(e,a);continue}o.values&&u(o.values,a)}if("grouped"===e.type)for(let e of o.values)u(e);else u(o.values)}for(let[t,i]of l)e.domain.values[t]=[...i.getDomain()]}postProcessProperties(e){let{propertyProcessors:t}=this;if(t)for(let{adjust:i,property:s,scopes:n}of t)i()(e,this.valueIdxLookup(null!=n?n:[],s))}reduceData(e){var t,i,s;let{reducers:n}=this,r=n.map(e=>e.scopes),a=n.map(e=>e.reducer()),o=n.map(e=>e.initialValue);for(let s of e.data){let e=0;for(let n of a){if(!(null===(i=null===(t=s.validScopes)||void 0===t?void 0:t.some(t=>{var i;return null===(i=r[e])||void 0===i?void 0:i.some(e=>t===e)}))||void 0===i||i)){e++;continue}o[e]=n(o[e],s),e++}}for(let t=0;t<o.length;t++)null!==(s=e.reduced)&&void 0!==s||(e.reduced={}),e.reduced[n[t].property]=o[t]}postProcessData(e){var t;let{processors:i}=this;for(let s of i)null!==(t=e.reduced)&&void 0!==t||(e.reduced={}),e.reduced[s.property]=s.calculate(e)}initDataDomainProcessor(){var e;let{keys:t,values:i}=this,s=new Set;for(let t of i)for(let i of null!==(e=t.scopes)&&void 0!==e?e:[])s.add(i);let n=s.size,r=new Map,a=new Map,o=!0,l=(e,t,i=r)=>{var s;"category"===t?i.set(e,new n7("discrete")):(i.set(e,new n7("continuous")),o&&(o=(null!==(s=e.scopes)&&void 0!==s?s:[]).length===n))},h=()=>{t.forEach(e=>l(e,e.valueType)),i.forEach(e=>l(e,e.valueType))};h();let d=this.buildAccessors(...t,...i);return{dataDomain:r,processValue:(e,t,i)=>{var s,n,o,l;let u;let c=e.property in d,p=!1;if(c){try{u=d[e.property](t)}catch(e){}p=void 0!==u}else u=(p=e.property in t)?t[e.property]:e.missingValue;null!=e.forceValue&&(u=p&&en(u)?-1*e.forceValue:e.forceValue,p=!0);let g="missingValue"in e;if(!p&&!g&&e.missing++,r.has(e)||h(),p&&!(null===(n=null===(s=e.validation)||void 0===s?void 0:s.call(e,u,t))||void 0===n||n)){if(!("invalidValue"in e))return rt;u=e.invalidValue}return e.processor&&(a.has(e)||a.set(e,e.processor()),u=null===(o=a.get(e))||void 0===o?void 0:o(u,i!==rt?i:void 0)),null===(l=r.get(e))||void 0===l||l.extend(u),u},initDataDomain:h,scopes:s,allScopesHaveSameDefs:o}}buildAccessors(...e){let t={};if("integrated"===this.mode)return t;for(let i of e){let e;(i.property.indexOf(".")>=0||i.property.indexOf("[")>=0)&&(e=i.property.startsWith("[")?`return datum${i.property};`:`return datum.${i.property};`,t[i.property]=Function("datum",e))}return t}}class rs{constructor(e){this.mode=e,this.debug=B.create(!0,"data-model"),this.requested=[],this.status="setup"}request(e,t,i){return x(this,void 0,void 0,function*(){if("setup"!==this.status)throw Error("AG Charts - data request after data setup phase.");return new Promise((s,n)=>{this.requested.push({id:e,opts:i,data:t,resultCb:s,reject:n})})})}execute(){return x(this,void 0,void 0,function*(){if("setup"!==this.status)throw Error("AG Charts - data request after data setup phase.");this.status="executed",this.debug("DataController.execute() - requested",this.requested);let e=this.mergeRequested();this.debug("DataController.execute() - merged",e);let t=B.check(!0,"data-model");for(let{opts:i,data:s,resultCbs:n,rejects:r,ids:a}of(t&&(window.processedData=[]),e))try{let e=new ri(Object.assign(Object.assign({},i),{mode:this.mode})),o=e.processData(s);t&&window.processedData.push(o),o&&0===o.partialValidDataCount?n.forEach(t=>t({dataModel:e,processedData:o})):o?this.splitResult(e,o,a,n):r.forEach(e=>e(Error("AG Charts - no processed data generated")))}catch(e){r.forEach(t=>t(e))}})}mergeRequested(){let e=[],t=e=>e.filter(e=>"key"===e.type).map(e=>e.property).join(";"),i=({opts:e,data:i})=>s=>s[0].data===i&&s[0].opts.groupByKeys===e.groupByKeys&&s[0].opts.dataVisible===e.dataVisible&&s[0].opts.groupByFn===e.groupByFn&&t(s[0].opts.props)===t(e.props),s=e=>t=>{var i;if(t.type!==e.type)return!1;let s=null!==(i=Y(t,e))&&void 0!==i?i:{};return delete s.scopes,delete s.id,delete s.ids,0===Object.keys(s).length},n=e=>Object.assign(Object.assign({},e[0]),{props:e.reduce((e,t)=>{var i,n,r,a,o,l;for(let h of t.props){null!=h.id&&(null!==(i=h.ids)&&void 0!==i||(h.ids=[]),null===(n=h.scopes)||void 0===n||n.forEach(e=>{var t;return null===(t=h.ids)||void 0===t?void 0:t.push([e,h.id])}));let t=e.find(s(h));if(!t){e.push(h);continue}null!==(r=t.scopes)&&void 0!==r||(t.scopes=[]),t.scopes.push(...null!==(a=h.scopes)&&void 0!==a?a:[]),("key"===t.type||"value"===t.type)&&(null===(o=t.ids)||void 0===o||o.push(...null!==(l=h.ids)&&void 0!==l?l:[]))}return e},[])});for(let t of this.requested){let s=e.find(i(t));s?s.push(t):e.push([t])}return e.map(e=>({ids:e.map(({id:e})=>e),resultCbs:e.map(({resultCb:e})=>e),rejects:e.map(({reject:e})=>e),data:e[0].data,opts:n(e.map(({opts:e})=>e))}))}splitResult(e,t,i,s){for(let n=0;n<i.length;n++){let r=i[n];(0,s[n])({dataModel:e,processedData:Object.assign(Object.assign({},t),{data:t.data.filter(({validScopes:e})=>null==e||e.some(e=>e===r))})})}}}class rn{constructor(e){this.getSeries=e}}class rr{constructor(){this.listeners=new sm}addListener(e,t,i){return this.listeners.addListener(e,t,i)}removeListener(e){this.listeners.removeListener(e)}}let ra=[!0,"animation"];class ro extends rr{constructor(e,t){super(),this.interactionManager=e,this.chartUpdateMutex=t,this.defaultDuration=1e3,this.batch=new rl,this.debug=B.create(...ra),this.isPlaying=!1,this.requestId=null,this.skipAnimations=!1}animate(e){var t,i,{disableInteractions:s=!0,immutable:n=!0}=e,r=y(e,["disableInteractions","immutable"]);let{batch:a}=this;try{if(null!=r.id&&a.controllers.has(r.id)){if(!n)return a.controllers.get(r.id).reset(r);a.controllers.get(r.id).stop(),this.debug(`Skipping animation batch due to update of existing animation: ${r.id}`),this.batch.skip()}}catch(e){this.failsafeOnError(e);return}let o=null!==(t=r.id)&&void 0!==t?t:Math.random().toString(),l=this.isSkipped();return l&&this.debug("AnimationManager - skipping animation"),new tT(Object.assign(Object.assign({},r),{id:o,skip:l,autoplay:!!this.isPlaying&&r.autoplay,duration:null!==(i=r.duration)&&void 0!==i?i:this.defaultDuration,onPlay:e=>{var t;a.controllers.set(o,e),this.requestAnimation(),s&&this.interactionManager.pause("animation"),null===(t=r.onPlay)||void 0===t||t.call(e,e)},onStop:e=>{var t;a.controllers.delete(o),s&&this.interactionManager.resume("animation"),null===(t=r.onStop)||void 0===t||t.call(e,e)}}))}play(){if(!this.isPlaying){for(let e of(this.isPlaying=!0,this.debug("AnimationManager.play()"),this.batch.controllers.values()))try{e.play()}catch(e){this.failsafeOnError(e)}this.requestAnimation()}}pause(){if(this.isPlaying)for(let e of(this.isPlaying=!1,this.cancelAnimation(),this.debug("AnimationManager.pause()"),this.batch.controllers.values()))try{e.pause()}catch(e){this.failsafeOnError(e)}}stop(){for(let e of(this.isPlaying=!1,this.cancelAnimation(),this.debug("AnimationManager.stop()"),this.batch.controllers.values()))try{e.stop()}catch(e){this.failsafeOnError(e,!1)}}stopByAnimationId(e){var t;try{null!=e&&this.batch.controllers.has(e)&&(null===(t=this.batch.controllers.get(e))||void 0===t||t.stop())}catch(e){this.failsafeOnError(e);return}}stopByAnimationGroupId(e){for(let t of this.batch.controllers.values())t.groupId===e&&this.stopByAnimationId(t.id)}reset(){this.isPlaying?(this.stop(),this.play()):this.stop()}skip(e=!0){this.skipAnimations=e}isSkipped(){return this.skipAnimations||this.batch.isSkipped()}isActive(){return this.isPlaying&&this.batch.isActive()}skipCurrentBatch(){B.check(...ra)&&this.debug("AnimationManager - skipCurrentBatch()",{stack:Error().stack}),this.batch.skip()}isSkippingFrames(){return!0}scheduleAnimationFrame(e){this.requestId=requestAnimationFrame(e)}requestAnimation(){let e;if(!this.batch.isActive()||null!==this.requestId)return;let t=i=>x(this,void 0,void 0,function*(){let s=()=>x(this,void 0,void 0,function*(){let t=i-(null!=e?e:i);for(let s of(e=i,this.debug("AnimationManager - onAnimationFrame()",{controllersCount:this.batch.controllers.size}),this.batch.controllers.values()))try{s.update(t)}catch(e){this.failsafeOnError(e)}this.listeners.dispatch("animation-frame",{type:"animation-frame",deltaMs:t})});this.isSkippingFrames()?yield this.chartUpdateMutex.acquireImmediately(s):yield this.chartUpdateMutex.acquire(s),this.batch.isActive()&&this.scheduleAnimationFrame(t)});this.scheduleAnimationFrame(t)}cancelAnimation(){null!==this.requestId&&(cancelAnimationFrame(this.requestId),this.requestId=null,this.startBatch())}failsafeOnError(e,t=!0){T.error("Error during animation, skipping animations",e),t&&this.cancelAnimation()}startBatch(e){this.debug(`AnimationManager - startBatch() with skipAnimations=${e}.`),this.reset(),this.batch.destroy(),this.batch=new rl,!0===e&&this.batch.skip()}endBatch(){this.debug(`AnimationManager - endBatch() with ${this.batch.controllers.size} animations; skipped: ${this.batch.isSkipped()}.`),this.batch.isSkipped()&&!this.batch.isActive()&&this.batch.skip(!1)}}class rl{constructor(){this.controllers=new Map,this.skipAnimations=!1}isActive(){return this.controllers.size>0}skip(e=!0){if(!1===this.skipAnimations&&!0===e){for(let e of this.controllers.values())e.stop();this.controllers.clear()}this.skipAnimations=e}isSkipped(){return this.skipAnimations}destroy(){}}class rh extends rr{legendItemClick(e,t,i,s){this.listeners.dispatch("legend-item-click",{type:"legend-item-click",series:e,itemId:t,enabled:i,legendItemName:s})}legendItemDoubleClick(e,t,i,s,n){this.listeners.dispatch("legend-item-double-click",{type:"legend-item-double-click",series:e,itemId:t,enabled:i,legendItemName:n,numVisibleItems:s})}axisHover(e,t){this.listeners.dispatch("axis-hover",{type:"axis-hover",axisId:e,direction:t})}}class rd{constructor(e){this.states={},this.element=e}updateCursor(e,t){delete this.states[e],null!=t&&(this.states[e]={style:t}),this.applyStates()}applyStates(){let e="default";Object.entries(this.states).reverse().slice(0,1).forEach(([t,{style:i}])=>e=i),this.element.style.cursor=e}getCursor(){return this.element.style.cursor}}class ru extends rr{constructor(){super(...arguments),this.highlightStates=new Map,this.pickedStates=new Map}updateHighlight(e,t){this.highlightStates.delete(e),null!=t&&this.highlightStates.set(e,t),this.applyHighlightStates()}getActiveHighlight(){return this.activeHighlight}updatePicked(e,t){this.pickedStates.delete(e),null!=t&&this.pickedStates.set(e,t),this.applyPickedStates()}getActivePicked(){return this.activePicked}applyHighlightStates(){let{activeHighlight:e}=this;this.activeHighlight=Array.from(this.highlightStates.values()).pop(),this.isEqual(this.activeHighlight,e)||this.listeners.dispatch("highlight-change",{type:"highlight-change",currentHighlight:this.activeHighlight,previousHighlight:e})}applyPickedStates(){this.activePicked=Array.from(this.pickedStates.values()).pop()}isEqual(e,t){return e===t||(null==e?void 0:e.series)===(null==t?void 0:t.series)&&(null==e?void 0:e.itemId)===(null==t?void 0:t.itemId)&&(null==e?void 0:e.datum)===(null==t?void 0:t.datum)}}let rc=["pagehide","mousemove","mouseup"],rp=["click","dblclick","contextmenu","mousedown","mouseout","mouseenter","touchstart","touchmove","touchend","touchcancel","wheel"],rg=`
.ag-chart-wrapper {
    touch-action: none;
}
`;class rf extends rr{constructor(e,t,i){for(let s of(super(),this.eventHandler=e=>this.processEvent(e),this.mouseDown=!1,this.touchDown=!1,this.pausers={animation:0,"context-menu":0},this.rootElement=t.body,this.element=e,this.window=i,rp))s.startsWith("touch")?e.addEventListener(s,this.eventHandler,{passive:!0}):"wheel"===s?e.addEventListener(s,this.eventHandler,{passive:!1}):e.addEventListener(s,this.eventHandler);for(let e of rc)this.window.addEventListener(e,this.eventHandler);rf.interactionDocuments.includes(t)||(sV(t,rg),rf.interactionDocuments.push(t))}destroy(){for(let e of rc)this.window.removeEventListener(e,this.eventHandler);for(let e of rp)this.element.removeEventListener(e,this.eventHandler)}resume(e){this.pausers[e]--}pause(e){this.pausers[e]++}processEvent(e){let t=this.decideInteractionEventTypes(e);t.length>0&&this.dispatchEvent(e,t).catch(e=>T.errorOnce(e))}dispatchEvent(e,t){return x(this,void 0,void 0,function*(){let i=this.calculateCoordinates(e);if(null==i)return;let s=Object.entries(this.pausers).filter(([,e])=>e>0).map(([e])=>e);for(let n of t)this.listeners.dispatchWrapHandlers(n,(e,t,i)=>{var n;(!(s.length>0)||(null===(n=null==t?void 0:t.bypassPause)||void 0===n?void 0:n.some(e=>s.includes(e))))&&(i.consumed||e(i))},this.buildEvent(Object.assign({type:n,event:e,pauses:s},i)))})}decideInteractionEventTypes(e){let t="drag-start";switch(e.type){case"click":return["click"];case"dblclick":return["dblclick"];case"contextmenu":return["contextmenu"];case"mousedown":return this.mouseDown=!0,this.dragStartElement=e.target,[t];case"touchstart":return this.touchDown=!0,this.dragStartElement=e.target,[t];case"touchmove":case"mousemove":if(!this.mouseDown&&!this.touchDown&&!this.isEventOverElement(e))break;return this.mouseDown||this.touchDown?["drag"]:["hover"];case"mouseup":if(!this.mouseDown&&!this.isEventOverElement(e))break;return this.mouseDown=!1,this.dragStartElement=void 0,["drag-end"];case"touchend":if(!this.touchDown&&!this.isEventOverElement(e))break;return this.touchDown=!1,this.dragStartElement=void 0,["drag-end"];case"mouseout":case"touchcancel":return["leave"];case"mouseenter":let i=e instanceof MouseEvent&&(1&e.buttons)==1;if(this.mouseDown!==i)return this.mouseDown=i,[i?t:"drag-end"];break;case"pagehide":return["page-left"];case"wheel":return["wheel"]}return[]}isEventOverElement(e){var t;return e.target===this.element||(null===(t=e.target)||void 0===t?void 0:t.parentElement)===this.element}calculateCoordinates(e){var t;if(e instanceof MouseEvent){let{clientX:t,clientY:i,pageX:s,pageY:n,offsetX:r,offsetY:a}=e;return this.fixOffsets(e,{clientX:t,clientY:i,pageX:s,pageY:n,offsetX:r,offsetY:a})}if("undefined"!=typeof TouchEvent&&e instanceof TouchEvent){let{clientX:i,clientY:s,pageX:n,pageY:r}=null!==(t=e.touches[0])&&void 0!==t?t:e.changedTouches[0];return Object.assign(Object.assign({},rf.NULL_COORDS),{clientX:i,clientY:s,pageX:n,pageY:r})}if(e instanceof PageTransitionEvent){if(e.persisted)return;return rf.NULL_COORDS}}fixOffsets(e,t){let i=e=>{let t=0,i=0;for(;e;)t+=e.offsetLeft,i+=e.offsetTop,e=e.offsetParent;return{x:t,y:i}};if(null!=this.dragStartElement&&e.target!==this.dragStartElement){let s=i(this.dragStartElement),n=i(e.target);t.offsetX-=s.x-n.x,t.offsetY-=s.y-n.y}return t}buildEvent(e){let{type:t,event:i,clientX:s,clientY:n,pauses:r}=e,{offsetX:a,offsetY:o,pageX:l,pageY:h}=e;if(!i3(a)||!i3(o)){let e=this.element.getBoundingClientRect();a=s-e.left,o=n-e.top}if(!i3(l)||!i3(h)){let e=this.rootElement.getBoundingClientRect();l=s-e.left,h=n-e.top}let d={type:t,offsetX:a,offsetY:o,pageX:l,pageY:h,sourceEvent:i,consumed:!1,pauses:r,consume(){d.consumed=!0}};return d}}rf.interactionDocuments=[],rf.NULL_COORDS={clientX:-1/0,clientY:-1/0,pageX:-1/0,pageY:-1/0,offsetX:-1/0,offsetY:-1/0};class rm{constructor(e,t){this.states={},this.exclusiveAreas={},this.destroyFns=[],this.tooltip=e,this.destroyFns.push(t.addListener("hover",e=>this.checkExclusiveRects(e)))}getRange(){return this.tooltip.range}updateTooltip(e,t,i){var s;null==i&&(i=null===(s=this.states[e])||void 0===s?void 0:s.content),this.states[e]={content:i,meta:t},this.applyStates()}updateExclusiveRect(e,t){t?this.exclusiveAreas[e]=t:delete this.exclusiveAreas[e]}removeTooltip(e){delete this.states[e],this.applyStates()}getTooltipMeta(e){var t;return null===(t=this.states[e])||void 0===t?void 0:t.meta}destroy(){for(let e of this.destroyFns)e()}checkExclusiveRects(e){let t;for(let[i,s]of Object.entries(this.exclusiveAreas))if(s.containsPoint(e.offsetX,e.offsetY)){t=i;break}t!==this.appliedExclusiveArea&&(this.appliedExclusiveArea=t,this.applyStates())}applyStates(){var e;let t,i;let s=this.appliedExclusiveArea?[this.appliedExclusiveArea]:Object.keys(this.states);if(s.reverse(),s.slice(0,1).forEach(e=>{var s;let{content:n,meta:r}=null!==(s=this.states[e])&&void 0!==s?s:{};t=n,i=r}),void 0===i||void 0===t){this.appliedState=void 0,this.tooltip.toggle(!1);return}if((null===(e=this.appliedState)||void 0===e?void 0:e.content)===t){let e=this.tooltip.isVisible();this.tooltip.show(i,void 0,e)}else this.tooltip.show(i,t);this.appliedState={content:t,meta:i}}static makeTooltipMeta(e,t,i,s){var n,r,a,o;let{pageX:l,pageY:h,offsetX:d,offsetY:u}=e,c={xOffset:i.series.tooltip.position.xOffset,yOffset:i.series.tooltip.position.yOffset},p={pageX:l,pageY:h,offsetX:d,offsetY:u,event:e,showArrow:i.series.tooltip.showArrow,position:c},g=null!==(r=null===(n=i.yBar)||void 0===n?void 0:n.upperPoint)&&void 0!==r?r:i.midPoint;if("node"===i.series.tooltip.position.type&&g){let{x:e,y:n}=g,r=i.series.contentGroup.inverseTransformPoint(e,n),a=t.element.getBoundingClientRect();return Object.assign(Object.assign({},p),{pageX:Math.round(a.left+s.scrollX+r.x),pageY:Math.round(a.top+s.scrollY+r.y),offsetX:Math.round(r.x),offsetY:Math.round(r.y)})}return p.enableInteraction=null!==(o=null===(a=i.series.tooltip.interaction)||void 0===a?void 0:a.enabled)&&void 0!==o&&o,p}}class ry extends rr{constructor(){super(...arguments),this.axes={}}updateAxes(e){var t;let i=new Set(Object.keys(this.axes));e.forEach(e=>{var t,s,n;i.delete(e.id),null!==(t=(s=this.axes)[n=e.id])&&void 0!==t||(s[n]=new rv(e))}),i.forEach(e=>{delete this.axes[e]}),(null===(t=this.initialZoom)||void 0===t?void 0:t.newZoom)&&this.updateZoom(this.initialZoom.callerId,this.initialZoom.newZoom),this.initialZoom=void 0}updateZoom(e,t){if(0===Object.keys(this.axes).length){this.initialZoom={callerId:e,newZoom:t};return}Object.values(this.axes).forEach(i=>{i.updateZoom(e,null==t?void 0:t[i.getDirection()])}),this.applyStates()}updateAxisZoom(e,t,i){var s;null===(s=this.axes[t])||void 0===s||s.updateZoom(e,i),this.applyStates()}getZoom(){let e,t;if(Object.values(this.axes).forEach(i=>{i.getDirection()===tG.X?e=i.getZoom():i.getDirection()===tG.Y&&(t=i.getZoom())}),e||t)return{x:e,y:t}}getAxisZoom(e){var t;return null===(t=this.axes[e])||void 0===t?void 0:t.getZoom()}getAxisZooms(){let e={};for(let[t,i]of Object.entries(this.axes))e[t]={direction:i.getDirection(),zoom:i.getZoom()};return e}applyStates(){if(!Object.values(this.axes).map(e=>e.applyStates()).some(Boolean))return;let e=this.getZoom(),t={};for(let[e,i]of Object.entries(this.axes))t[e]=i.getZoom();this.listeners.dispatch("zoom-change",Object.assign(Object.assign({type:"zoom-change"},null!=e?e:{}),{axes:t}))}}class rv{constructor(e){this.states={},this.axis=e;let[t=0,i=1]=e.visibleRange;this.currentZoom={min:t,max:i},this.states.__initial__=this.currentZoom}getDirection(){return this.axis.direction}updateZoom(e,t){delete this.states[e],null!=t&&(this.states[e]=Object.assign({},t))}getZoom(){return this.currentZoom}applyStates(){var e,t;let i=this.currentZoom,s=Object.keys(this.states)[Object.keys(this.states).length-1];return this.currentZoom=Object.assign({},this.states[s]),(null==i?void 0:i.min)!==(null===(e=this.currentZoom)||void 0===e?void 0:e.min)||(null==i?void 0:i.max)!==(null===(t=this.currentZoom)||void 0===t?void 0:t.max)}}class rb extends sm{constructor(){super(...arguments),this.layoutComplete="layout-complete"}addListener(e,t){if(this.isLayoutStage(e)||this.isLayoutComplete(e))return super.addListener(e,t);throw Error(`AG Charts - unsupported listener type: ${e}`)}dispatchPerformLayout(e,t){return this.isLayoutStage(e)?this.getListenersByType(e).reduce((e,t)=>{try{return t.handler(e)}catch(t){return T.errorOnce(t),e}},t):t}dispatchLayoutComplete(e){this.dispatch(this.layoutComplete,e)}isLayoutStage(e){return e!==this.layoutComplete}isLayoutComplete(e){return e===this.layoutComplete}}class rx extends su{updatePath(){let e=this.size/4.2;super.applyPath(e,rx.moves)}}rx.className="Cross",rx.moves=[{x:-1,y:0,t:"move"},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1},{x:1,y:1},{x:-1,y:1},{x:-1,y:-1},{x:-1,y:1},{x:-1,y:-1}];class rS extends su{updatePath(){let e=this.size/2;super.applyPath(e,rS.moves)}}rS.className="Diamond",rS.moves=[{x:0,y:-1,t:"move"},{x:1,y:1},{x:-1,y:1},{x:-1,y:-1},{x:1,y:-1}];class rk extends su{rad(e){return e/180*Math.PI}updatePath(){let{x:e,path:t,size:i,rad:s}=this,n=i/4,r=this.y+n/2;t.clear(),t.arc(e-n,r-n,n,s(130),s(330)),t.arc(e+n,r-n,n,s(220),s(50)),t.lineTo(e,r+n),t.closePath()}}rk.className="Heart";class rD extends su{updatePath(){let e=this.size/3;super.applyPath(e,rD.moves)}}rD.className="Plus",rD.moves=[{x:-.5,y:-.5,t:"move"},{x:0,y:-1},{x:1,y:0},{x:0,y:1},{x:1,y:0},{x:0,y:1},{x:-1,y:0},{x:0,y:1},{x:-1,y:0},{x:0,y:-1},{x:-1,y:0},{x:0,y:-1}];class rw extends su{updatePath(){let{path:e,x:t,y:i}=this,s=this.size/2;e.clear(),e.moveTo(this.align(t-s),this.align(i-s)),e.lineTo(this.align(t+s),this.align(i-s)),e.lineTo(this.align(t+s),this.align(i+s)),e.lineTo(this.align(t-s),this.align(i+s)),e.closePath()}}rw.className="Square";class rO extends su{updatePath(){let e=1.1*this.size;super.applyPath(e,rO.moves)}}rO.className="Triangle",rO.moves=[{x:0,y:-.48,t:"move"},{x:.5,y:.87},{x:-1,y:0}];let rM={circle:sc,cross:rx,diamond:rS,heart:rk,plus:rD,square:rw,triangle:rO},rN=Object.keys(rM);function rE(e){return rN.includes(e)}function rC(e=rw){return rE(e)?rM[e]:"function"==typeof e?e:rw}class rA extends i_{constructor(){super({name:"markerLabelGroup"}),this.label=new tm,this._marker=new rw,this._markerSize=15,this._spacing=8;let e=this.label;e.textBaseline="middle",e.fontSize=12,e.fontFamily="Verdana, sans-serif",e.fill="black",e.y=td.has.textMetrics?1:0,this.append([this.marker,e]),this.update()}set marker(e){this._marker!==e&&(this.removeChild(this._marker),this._marker=e,this.appendChild(e),this.update())}get marker(){return this._marker}set markerSize(e){this._markerSize!==e&&(this._markerSize=e,this.update())}get markerSize(){return this._markerSize}set spacing(e){this._spacing!==e&&(this._spacing=e,this.update())}get spacing(){return this._spacing}update(){let e=this.marker,t=this.markerSize;e.size=t,this.label.x=t/2+this.spacing}render(e){this.marker.opacity=this.opacity,this.label.opacity=this.opacity,super.render(e)}}rA.className="MarkerLabel",v([tk("label"),b("design:type",String)],rA.prototype,"text",void 0),v([tk("label"),b("design:type",String)],rA.prototype,"fontStyle",void 0),v([tk("label"),b("design:type",String)],rA.prototype,"fontWeight",void 0),v([tk("label"),b("design:type",Number)],rA.prototype,"fontSize",void 0),v([tk("label"),b("design:type",String)],rA.prototype,"fontFamily",void 0),v([tk("label","fill"),b("design:type",String)],rA.prototype,"color",void 0),v([tk("marker","fill"),b("design:type",String)],rA.prototype,"markerFill",void 0),v([tk("marker","stroke"),b("design:type",String)],rA.prototype,"markerStroke",void 0),v([tk("marker","strokeWidth"),b("design:type",Number)],rA.prototype,"markerStrokeWidth",void 0),v([tk("marker","fillOpacity"),b("design:type",Number)],rA.prototype,"markerFillOpacity",void 0),v([tk("marker","strokeOpacity"),b("design:type",Number)],rA.prototype,"markerStrokeOpacity",void 0);class rL{constructor(){this.color="black",this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=12,this.fontFamily="Verdana, sans-serif"}}v([ea(eN),b("design:type",String)],rL.prototype,"color",void 0),v([ea(eW),b("design:type",String)],rL.prototype,"fontStyle",void 0),v([ea(eV),b("design:type",String)],rL.prototype,"fontWeight",void 0),v([ea(eR(0)),b("design:type",Number)],rL.prototype,"fontSize",void 0),v([ea(ex),b("design:type",String)],rL.prototype,"fontFamily",void 0);class rR{constructor(){this.size=15,this.fill=void 0,this.fillOpacity=void 0,this.stroke=void 0,this.strokeWidth=1,this.strokeOpacity=1}}v([ea(eR(0)),b("design:type",Object)],rR.prototype,"size",void 0),v([ea(eE),b("design:type",String)],rR.prototype,"fill",void 0),v([ea(eT(0,1)),b("design:type",Number)],rR.prototype,"fillOpacity",void 0),v([ea(eE),b("design:type",String)],rR.prototype,"stroke",void 0),v([ea(eR(0)),b("design:type",Number)],rR.prototype,"strokeWidth",void 0),v([ea(eR(0,1)),b("design:type",Number)],rR.prototype,"strokeOpacity",void 0);class rT{constructor(e){this.parent=e,this.shape=rO,this.size=15,this.padding=8}}v([tD({changeValue(){this.parent.marker===this&&this.parent.onMarkerShapeChange()}}),b("design:type",Object)],rT.prototype,"shape",void 0),v([ea(eR(0)),b("design:type",Object)],rT.prototype,"size",void 0),v([ea(eR(0)),b("design:type",Number)],rT.prototype,"padding",void 0);class rI{constructor(e,t,i,s){this.chartUpdateCallback=e,this.pageUpdateCallback=t,this.interactionManager=i,this.cursorManager=s,this.id=ti(this),this.group=new i_({name:"pagination"}),this.labelNode=new tm,this.marker=new rT(this),this.activeStyle=new rR,this.inactiveStyle=new rR,this.highlightStyle=new rR,this.label=new rL,this.totalPages=0,this.currentPage=0,this.translationX=0,this.translationY=0,this.nextButtonDisabled=!1,this.previousButtonDisabled=!1,this._visible=!0,this._enabled=!0,this._orientation="vertical",this._nextButton=new rO,this._previousButton=new rO;let{labelNode:n}=this;n.textBaseline="middle",n.fontSize=12,n.fontFamily="Verdana, sans-serif",n.fill="black",n.y=td.has.textMetrics?1:0,this.group.append([this.nextButton,this.previousButton,n]),this.interactionManager.addListener("click",e=>this.onPaginationClick(e)),this.interactionManager.addListener("hover",e=>this.onPaginationMouseMove(e)),this.update(),this.updateMarkers()}set visible(e){this._visible=e,this.updateGroupVisibility()}get visible(){return this._visible}set enabled(e){this._enabled=e,this.updateGroupVisibility()}get enabled(){return this._enabled}updateGroupVisibility(){this.group.visible=this.enabled&&this.visible}set orientation(e){(this._orientation=e,"horizontal"===e)?(this.previousButton.rotation=-Math.PI/2,this.nextButton.rotation=Math.PI/2):(this.previousButton.rotation=0,this.nextButton.rotation=Math.PI)}get orientation(){return this._orientation}set nextButton(e){this._nextButton!==e&&(this.group.removeChild(this._nextButton),this._nextButton=e,this.group.appendChild(e))}get nextButton(){return this._nextButton}set previousButton(e){this._previousButton!==e&&(this.group.removeChild(this._previousButton),this._previousButton=e,this.group.appendChild(e))}get previousButton(){return this._previousButton}update(){this.updateLabel(),this.updatePositions(),this.enableOrDisableButtons()}updatePositions(){this.group.translationX=this.translationX,this.group.translationY=this.translationY,this.updateLabelPosition(),this.updateNextButtonPosition()}updateLabelPosition(){let{size:e,padding:t}=this.marker;this.nextButton.size=e,this.previousButton.size=e,this.labelNode.x=e/2+t}updateNextButtonPosition(){let e=this.labelNode.computeBBox();this.nextButton.translationX=e.x+e.width+this.marker.size/2+this.marker.padding}updateLabel(){let{currentPage:e,totalPages:t,labelNode:i,label:{color:s,fontStyle:n,fontWeight:r,fontSize:a,fontFamily:o}}=this;i.text=`${e+1} / ${t}`,i.fill=s,i.fontStyle=n,i.fontWeight=r,i.fontSize=a,i.fontFamily=o}updateMarkers(){let{nextButton:e,previousButton:t,nextButtonDisabled:i,previousButtonDisabled:s,activeStyle:n,inactiveStyle:r,highlightStyle:a,highlightActive:o}=this,l=(e,t)=>t?r:e===o?a:n;this.updateMarker(e,l("next",i)),this.updateMarker(t,l("previous",s))}updateMarker(e,t){var i;let{size:s}=this.marker;e.size=s,e.fill=t.fill,e.fillOpacity=null!==(i=t.fillOpacity)&&void 0!==i?i:1,e.stroke=t.stroke,e.strokeWidth=t.strokeWidth,e.strokeOpacity=t.strokeOpacity}enableOrDisableButtons(){let{currentPage:e,totalPages:t}=this,i=0===t;this.nextButtonDisabled=e===t-1||i,this.previousButtonDisabled=0===e||i}nextButtonContainsPoint(e,t){return!this.nextButtonDisabled&&this.nextButton.containsPoint(e,t)}previousButtonContainsPoint(e,t){return!this.previousButtonDisabled&&this.previousButton.containsPoint(e,t)}onPaginationClick(e){let{offsetX:t,offsetY:i}=e;this.nextButtonContainsPoint(t,i)?(this.incrementPage(),this.onPaginationChanged(),e.consume()):this.previousButtonContainsPoint(t,i)&&(this.decrementPage(),this.onPaginationChanged(),e.consume())}onPaginationMouseMove(e){let{offsetX:t,offsetY:i}=e;this.nextButtonContainsPoint(t,i)?(this.cursorManager.updateCursor(this.id,"pointer"),this.highlightActive="next"):this.previousButtonContainsPoint(t,i)?(this.cursorManager.updateCursor(this.id,"pointer"),this.highlightActive="previous"):(this.cursorManager.updateCursor(this.id),this.highlightActive=void 0),this.updateMarkers(),this.chartUpdateCallback(tQ.SCENE_RENDER)}onPaginationChanged(){this.pageUpdateCallback(this.currentPage)}incrementPage(){this.currentPage=Math.min(this.currentPage+1,this.totalPages-1)}decrementPage(){this.currentPage=Math.max(this.currentPage-1,0)}onMarkerShapeChange(){let e=rC(this.marker.shape||rO);this.previousButton=new e,this.nextButton=new e,this.updatePositions(),this.updateMarkers(),this.chartUpdateCallback(tQ.SCENE_RENDER)}attachPagination(e){e.append(this.group)}computeBBox(){return this.group.computeBBox()}}rI.className="Pagination";let r_=["horizontal","vertical"],rP=el((e,t)=>eh(e,t,e=>r_.includes(e)),"expecting an orientation keyword such as 'horizontal' or 'vertical'");class rB{constructor(){this.maxLength=void 0,this.color="black",this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=12,this.fontFamily="Verdana, sans-serif",this.formatter=void 0}}v([ea(eT(0)),b("design:type",Number)],rB.prototype,"maxLength",void 0),v([ea(eN),b("design:type",String)],rB.prototype,"color",void 0),v([ea(eW),b("design:type",String)],rB.prototype,"fontStyle",void 0),v([ea(eV),b("design:type",String)],rB.prototype,"fontWeight",void 0),v([ea(eR(0)),b("design:type",Number)],rB.prototype,"fontSize",void 0),v([ea(ex),b("design:type",String)],rB.prototype,"fontFamily",void 0),v([ea(ey),b("design:type",Function)],rB.prototype,"formatter",void 0);class rF{constructor(){this.size=15,this._shape=void 0,this.padding=8,this.strokeWidth=void 0}set shape(e){var t;this._shape=e,null===(t=this.parent)||void 0===t||t.onMarkerShapeChange()}get shape(){return this._shape}}v([ea(eR(0)),b("design:type",Object)],rF.prototype,"size",void 0),v([ea(eR(0)),b("design:type",Number)],rF.prototype,"padding",void 0),v([ea(eT(0)),b("design:type",Object)],rF.prototype,"strokeWidth",void 0);class rj{constructor(){this.marker=new rF,this.label=new rB,this.maxWidth=void 0,this.paddingX=16,this.paddingY=8,this.toggleSeriesVisible=!0}}v([ea(eT(0)),b("design:type",Number)],rj.prototype,"maxWidth",void 0),v([ea(eR(0)),b("design:type",Object)],rj.prototype,"paddingX",void 0),v([ea(eR(0)),b("design:type",Object)],rj.prototype,"paddingY",void 0),v([ea(ev),b("design:type",Boolean)],rj.prototype,"toggleSeriesVisible",void 0);class rG{constructor(){this.legendItemClick=void 0,this.legendItemDoubleClick=void 0}}v([ea(ey),b("design:type",Function)],rG.prototype,"legendItemClick",void 0);class rz{set data(e){this._data=e,this.updateGroupVisibility()}get data(){return this._data}set enabled(e){this._enabled=e,this.updateGroupVisibility()}get enabled(){return this._enabled}getOrientation(){if(void 0!==this.orientation)return this.orientation;switch(this.position){case"right":case"left":return"vertical";case"bottom":case"top":return"horizontal"}}constructor(e){this.ctx=e,this.id=ti(this),this.group=new i_({name:"legend",layer:!0,zIndex:t$.LEGEND_ZINDEX}),this.itemSelection=iP.select(this.group,rA),this.oldSize=[0,0],this.pages=[],this.maxPageSize=[0,0],this.paginationTrackingIndex=0,this.item=new rj,this.listeners=new rG,this.truncatedItems=new Set,this._data=[],this._enabled=!0,this.position="bottom",this.maxWidth=void 0,this.maxHeight=void 0,this.reverseOrder=void 0,this.destroyFns=[],this.spacing=20,this.characterWidths=new Map,this.size=[0,0],this._visible=!0,this.item.marker.parent=this,this.pagination=new rI(t=>e.updateService.update(t),e=>this.updatePageNumber(e),e.interactionManager,e.cursorManager),this.pagination.attachPagination(this.group),this.item.marker.parent=this;let t={bypassPause:["animation"]};this.destroyFns.push(e.interactionManager.addListener("click",e=>this.checkLegendClick(e),t),e.interactionManager.addListener("dblclick",e=>this.checkLegendDoubleClick(e),t),e.interactionManager.addListener("hover",e=>this.handleLegendMouseMove(e)),e.layoutService.addListener("start-layout",e=>this.positionLegend(e.shrinkRect)),()=>this.detachLegend())}destroy(){this.destroyFns.forEach(e=>e())}onMarkerShapeChange(){this.itemSelection.clear(),this.group.markDirty(this.group,tz.MINOR)}getCharacterWidths(e){let{characterWidths:t}=this;if(t.has(e))return t.get(e);let i={"...":td.getTextSize("...",e).width};return t.set(e,i),i}set visible(e){this._visible=e,this.updateGroupVisibility()}get visible(){return this._visible}updateGroupVisibility(){this.group.visible=this.enabled&&this.visible&&this.data.length>0}attachLegend(e){e.append(this.group)}detachLegend(){var e;null===(e=this.group.parent)||void 0===e||e.removeChild(this.group)}getItemLabel(e){let{ctx:{callbackCache:t}}=this,{formatter:i}=this.item.label;return i?t.call(i,{itemId:e.itemId,value:e.label.text,seriesId:e.seriesId}):e.label.text}performLayout(e,t){let{paddingX:i,paddingY:s,label:n,maxWidth:r,marker:{size:a,padding:o,shape:l},label:{maxLength:h=1/0,fontStyle:d,fontWeight:u,fontSize:c,fontFamily:p}}=this.item,g=[...this.data];this.reverseOrder&&g.reverse(),this.itemSelection.update(g);let f=[],m=ty(n),y=null!=r?r:.8*e,v=a+o+i;if(this.itemSelection.each((e,t)=>{var i;let s=rC(null!=l?l:t.marker.shape);e.marker&&e.marker instanceof s||(e.marker=new s),e.markerSize=a,e.spacing=o,e.fontStyle=d,e.fontWeight=u,e.fontSize=c,e.fontFamily=p;let n=null!==(i=t.itemId)&&void 0!==i?i:t.id,r=this.getItemLabel(t),g=(null!=r?r:"<unknown>").replace(/\r?\n/g," ");e.text=this.truncate(g,h,y,v,m,n),f.push(e.computeBBox())}),e=Math.max(1,e),t=Math.max(1,t),!isFinite(e))return!1;let b=this.size,x=this.oldSize;b[0]=e,b[1]=t,(b[0]!==x[0]||b[1]!==x[1])&&(x[0]=b[0],x[1]=b[1]);let{pages:S,maxPageHeight:k,maxPageWidth:D}=this.updatePagination(f,e,t);this.pages=S,this.maxPageSize=[D-i,k-s];let w=this.pagination.currentPage,O=this.pages[w];if(this.pages.length<1||!O){this.visible=!1;return}this.visible=!0,this.updatePositions(w),this.update()}truncate(e,t,i,s,n,r){let a=e.split(""),o=!1;if(e.length>t&&(e=`${e.substring(0,t)}`,o=!0),Math.floor(s+td.getTextSize(e,n).width)>i){let t="",r=this.getCharacterWidths(n),l=s+r["..."];for(let e of a){if(r[e]||(r[e]=td.getTextSize(e,n).width),(l+=r[e])>i)break;t+=e}e=t,o=!0}return o?(e+="...",this.truncatedItems.add(r)):this.truncatedItems.delete(r),e}updatePagination(e,t,i){let s=this.getOrientation(),n=Math.min(this.paginationTrackingIndex,e.length);this.pagination.orientation=s,this.pagination.translationX=0,this.pagination.translationY=0;let{pages:r,maxPageHeight:a,maxPageWidth:o,paginationBBox:l,paginationVertical:h}=this.calculatePagination(e,t,i),d=r.findIndex(e=>e.endIndex>=n);this.pagination.currentPage=Math.min(Math.max(d,0),r.length-1);let{paddingX:u,paddingY:c}=this.item,p=a-c,g=0,f=-l.y-this.item.marker.size/2;return h?f+=p+8:(g+=-l.x+(o-u)+8,f+=(p-l.height)/2),this.pagination.translationX=g,this.pagination.translationY=f,this.pagination.update(),this.pagination.updateMarkers(),{maxPageHeight:a,maxPageWidth:o,pages:r}}calculatePagination(e,t,i){var s,n,r;let{paddingX:a,paddingY:o}=this.item,l=this.getOrientation(),h=["left","right"].includes(this.position),d=this.pagination.computeBBox(),u=new ts(0,0,0,0),c=[],p=0,g=0,f=0,m=e=>{let{width:t,height:i}=e;return t===d.width&&i===d.height},y=void 0!==this.maxWidth||void 0!==this.maxHeight;do{if(f++>10){T.warn("unable to find stable legend layout.");break}d=u;let m=t-(h?0:d.width),v=function({orientation:e,bboxes:t,maxHeight:i,maxWidth:s,itemPaddingY:n=0,itemPaddingX:r=0,forceResult:a=!1}){let o="horizontal"===e,l={max:o?s:i,fn:o?e=>e.width:e=>e.height,padding:o?r:n},h={max:o?i:s,fn:o?e=>e.height:e=>e.width,padding:o?n:r},d=0,u=[];for(;d<t.length;){let e=function(e,t,i,s,n){let r=function(e,t){let i=e.length,s=0;for(let n=0;n<i;n++)if((s+=t.fn(e[n])+t.padding)>t.max){if(i/n<2)return Math.ceil(i/2);return n}return i}(e,i);if(r<1){if(!n)return;r=1}for(let a=r;a>=1;a--){let r=function(e,t,i,s,n,r){var a;let o=[],l=0,h=0,d=[],u=[];for(let c=0;c<e.length;c++){let p=(c+i)%i;0===p&&(l+=h,h=0,d.length>0&&o.push(d),d=[]);let g=s.fn(e[c])+s.padding;u[p]=Math.max(null!==(a=u[p])&&void 0!==a?a:0,g);let f=l+(h=Math.max(h,n.fn(e[c])+n.padding)),m=!r||o.length>0;if(f>n.max&&m){d=[];break}if(u.reduce((e,t)=>e+t,0)>s.max&&!r){if(u.length<i)return u.length;return}d.push(c+t)}return d.length>0&&o.push(d),o.length>0?o:void 0}(e,t,a,i,s,n);if(null==r&&a<=1)return;if(null!=r){if("number"==typeof r){if(r<=1)return;a=r<a&&r>1?r:a;continue}return{processedBBoxCount:r.length*r[0].length,pageIndices:r}}}}(t.slice(d),d,l,h,a);if(!e)return;d+=e.processedBBoxCount,u.push(e.pageIndices)}return function(e,t,i,s,n){let r=0,a=0;return{pages:e.map(e=>{"horizontal"===t&&(e=function(e){let t=[];for(let i of e[0])t.push([]);return e.forEach((e,i)=>{e.forEach((e,s)=>{t[s][i]=e})}),t}(e));let o=0,l=e.map(e=>{let t=e.map(e=>(o=Math.max(e,o),i[e])),r=0,a=0;return t.forEach(e=>{r+=e.height+s,a=Math.max(a,e.width+n)}),{indices:e,bboxes:t,columnHeight:Math.ceil(r),columnWidth:Math.ceil(a)}}),h=0,d=0;return l.forEach(e=>{h+=e.columnWidth,d=Math.max(d,e.columnHeight)}),r=Math.max(h,r),a=Math.max(d,a),{columns:l,startIndex:e[0][0],endIndex:o,pageWidth:h,pageHeight:d}}),maxPageWidth:r,maxPageHeight:a}}(u,e,t,n,r)}({orientation:l,bboxes:e,maxHeight:i-(h?d.height:0),maxWidth:m,itemPaddingY:o,itemPaddingX:a,forceResult:y});c=null!==(s=null==v?void 0:v.pages)&&void 0!==s?s:[],p=null!==(n=null==v?void 0:v.maxPageWidth)&&void 0!==n?n:0,g=null!==(r=null==v?void 0:v.maxPageHeight)&&void 0!==r?r:0;let b=c.length;if(this.pagination.visible=b>1,this.pagination.totalPages=b,this.pagination.update(),u=this.pagination.computeBBox(),!this.pagination.visible)break}while(!m(u));return{maxPageWidth:p,maxPageHeight:g,pages:c,paginationBBox:d,paginationVertical:h}}updatePositions(e=0){let{item:{paddingY:t},itemSelection:i,pages:s}=this;if(s.length<1||!s[e])return;let{columns:n,startIndex:r,endIndex:a}=s[e],o=0,l=0,h=n.length,d=n[0].indices.length,u="horizontal"===this.getOrientation(),c=n[0].bboxes[0].height+t,p=[];i.each((e,t,i)=>{var s,g;if(i<r||i>a){e.visible=!1;return}let f=i-r,m=0,y=0;u?(m=f%h,y=Math.floor(f/h)):(m=Math.floor(f/d),y=f%d),e.visible=!0;let v=n[m];v&&(l=c*y,o=null!==(s=p[y])&&void 0!==s?s:0,p[y]=(null!==(g=p[y])&&void 0!==g?g:0)+v.columnWidth,e.translationX=Math.floor(o),e.translationY=Math.floor(l))})}updatePageNumber(e){let{pages:t}=this,{startIndex:i,endIndex:s}=t[e];0===i?this.paginationTrackingIndex=0:e===t.length-1?this.paginationTrackingIndex=s:this.paginationTrackingIndex=Math.floor((i+s)/2),this.pagination.update(),this.pagination.updateMarkers(),this.updatePositions(e),this.ctx.updateService.update(tQ.SCENE_RENDER)}update(){let{label:{color:e},marker:t}=this.item;this.itemSelection.each((i,s)=>{var n;let r=s.marker;i.markerFill=r.fill,i.markerStroke=r.stroke,i.markerStrokeWidth=null!==(n=t.strokeWidth)&&void 0!==n?n:Math.min(2,r.strokeWidth),i.markerFillOpacity=r.fillOpacity,i.markerStrokeOpacity=r.strokeOpacity,i.opacity=s.enabled?1:.5,i.color=e})}getDatumForPoint(e,t){let i=[],s={dist:1/0,datum:void 0};for(let n of this.group.children){if(!n.visible||!(n instanceof rA))continue;let r=n.computeBBox();if(r.grow(this.item.paddingX/2,"horizontal"),r.grow(this.item.paddingY/2,"vertical"),r.containsPoint(e,t))return n.datum;let a=e-r.x-this.item.paddingX/2,o=t-r.y-this.item.paddingY/2,l=Math.pow(a,2)+Math.pow(o,2);a>=0&&o>=0&&l<s.dist&&(s.dist=l,s.datum=n.datum),i.push(r)}if(ts.merge(i).containsPoint(e,t))return s.datum}computeBBox(){return this.group.computeBBox()}computePagedBBox(){let e=this.group.computeBBox();if(this.pages.length<=1)return e;let[t,i]=this.maxPageSize;return e.height=Math.max(i,e.height),e.width=Math.max(t,e.width),e}checkLegendClick(e){let{listeners:{legendItemClick:t},ctx:{dataService:i,highlightManager:s},item:{toggleSeriesVisible:n}}=this,{offsetX:r,offsetY:a}=e,o=this.computeBBox(),l=this.group.visible&&o.containsPoint(r,a),h=this.getDatumForPoint(r,a);if(!l||!h)return;let{id:d,itemId:u,enabled:c}=h,p=i.getSeries().find(e=>e.id===d);if(!p)return;e.consume();let g=c;n&&(g=!c,this.ctx.chartEventManager.legendItemClick(p,u,g,h.legendItemName)),g?s.updateHighlight(this.id,{series:p,itemId:u,datum:void 0}):s.updateHighlight(this.id),this.ctx.updateService.update(tQ.PROCESS_DATA,{forceNodeDataRefresh:!0}),null==t||t({type:"click",enabled:g,itemId:u,seriesId:p.id})}checkLegendDoubleClick(e){var t;let{listeners:{legendItemDoubleClick:i},ctx:{dataService:s},item:{toggleSeriesVisible:n}}=this,{offsetX:r,offsetY:a}=e;if("integrated"===this.ctx.mode)return;let o=this.computeBBox(),l=this.group.visible&&o.containsPoint(r,a),h=this.getDatumForPoint(r,a);if(!l||!h)return;let{id:d,itemId:u,seriesId:c}=h,p=s.getSeries(),g=p.find(e=>e.id===d);if(g){if(e.consume(),n){let e={},i=p.flatMap(e=>e.getLegendData("category"));i.forEach(t=>{var i,s;null!==(i=e[s=t.seriesId])&&void 0!==i||(e[s]=0),t.enabled&&e[t.seriesId]++});let s=i.find(e=>e.itemId===u&&e.seriesId===c);this.ctx.chartEventManager.legendItemDoubleClick(g,u,null!==(t=null==s?void 0:s.enabled)&&void 0!==t&&t,e,null==s?void 0:s.legendItemName)}this.ctx.updateService.update(tQ.PROCESS_DATA,{forceNodeDataRefresh:!0}),null==i||i({type:"dblclick",enabled:!0,itemId:u,seriesId:g.id})}}handleLegendMouseMove(e){var t;let{enabled:i,item:{toggleSeriesVisible:s},listeners:n}=this;if(!i)return;let r=this.computeBBox(),{pageX:a,pageY:o,offsetX:l,offsetY:h}=e,d=this.group.visible&&r.containsPoint(l,h);if(!d){this.ctx.cursorManager.updateCursor(this.id),this.ctx.highlightManager.updateHighlight(this.id),this.ctx.tooltipManager.removeTooltip(this.id);return}e.consume();let u=this.getDatumForPoint(l,h);if(!(d&&void 0!==u)){this.ctx.cursorManager.updateCursor(this.id),this.ctx.highlightManager.updateHighlight(this.id);return}let c=u?this.ctx.dataService.getSeries().find(e=>e.id===(null==u?void 0:u.id)):void 0;u&&this.truncatedItems.has(null!==(t=u.itemId)&&void 0!==t?t:u.id)?this.ctx.tooltipManager.updateTooltip(this.id,{pageX:a,pageY:o,offsetX:l,offsetY:h,event:e,showArrow:!1},sU({content:this.getItemLabel(u)})):this.ctx.tooltipManager.removeTooltip(this.id),(s||null!=n.legendItemClick||null!=n.legendItemDoubleClick)&&this.ctx.cursorManager.updateCursor(this.id,"pointer"),(null==u?void 0:u.enabled)&&c?this.ctx.highlightManager.updateHighlight(this.id,{series:c,itemId:null==u?void 0:u.itemId,datum:void 0}):this.ctx.highlightManager.updateHighlight(this.id)}positionLegend(e){let t=e.clone();if(!this.enabled||!this.data.length)return{shrinkRect:t};let[i,s]=this.calculateLegendDimensions(e);this.group.translationX=0,this.group.translationY=0,this.performLayout(i,s);let n=this.computePagedBBox(),r=()=>{switch(this.position){case"top":case"left":return 0;case"bottom":return e.height-n.height;default:return e.width-n.width}};if(this.visible){let i,s;switch(this.position){case"top":case"bottom":i=(e.width-n.width)/2,s=r(),t.shrink(n.height,this.position);break;default:i=r(),s=(e.height-n.height)/2,t.shrink(n.width,this.position)}this.group.translationX=Math.floor(-n.x+e.x+i),this.group.translationY=Math.floor(-n.y+e.y+s)}if(this.visible&&this.enabled&&this.data.length){let e=this.spacing;t.shrink(e,this.position);let i=n.clone();i.x+=this.group.translationX,i.y+=this.group.translationY,this.ctx.tooltipManager.updateExclusiveRect(this.id,i)}else this.ctx.tooltipManager.updateExclusiveRect(this.id);return{shrinkRect:t}}calculateLegendDimensions(e){let t,i;let{width:s,height:n}=e,r=s/n;switch(this.position){case"top":case"bottom":t=this.maxWidth?Math.min(this.maxWidth,s):s,i=this.maxHeight?Math.min(this.maxHeight,n):Math.round(n*(r<1?Math.min(.5,1/r*.2):.2));break;default:t=this.maxWidth?Math.min(this.maxWidth,s):Math.round(s*(r>1?Math.min(.5,.25*r):.25)),i=this.maxHeight?Math.min(this.maxHeight,n):n}return[t,i]}}rz.className="Legend",v([ea(ev),b("design:type",Object)],rz.prototype,"_enabled",void 0),v([ea(eJ),b("design:type",String)],rz.prototype,"position",void 0),v([ea(eT(0)),b("design:type",Number)],rz.prototype,"maxWidth",void 0),v([ea(eT(0)),b("design:type",Number)],rz.prototype,"maxHeight",void 0),v([ea(eb),b("design:type",Boolean)],rz.prototype,"reverseOrder",void 0),v([ea(rP),b("design:type",String)],rz.prototype,"orientation",void 0),v([ea(eR(0)),b("design:type",Object)],rz.prototype,"spacing",void 0);class rW{constructor(e,t,i){this.text=void 0,this.className=e,this.parentElement=t,this.document=i}show(e){var t,i;let s=this.element;if(s||((s=this.document.createElement("div")).className=this.className,this.element=s),s.style.position="absolute",s.style.left=`${e.x}px`,s.style.top=`${e.y}px`,s.style.width=`${e.width}px`,s.style.height=`${e.height}px`,this.renderer)s.innerHTML=this.renderer();else{let e=this.document.createElement("div");e.style.alignItems="center",e.style.boxSizing="border-box",e.style.display="flex",e.style.justifyContent="center",e.style.margin="8px",e.style.height="100%",e.style.font="12px Verdana, sans-serif",e.innerText=null!==(t=this.text)&&void 0!==t?t:"No data to display",s.append(e)}null===(i=this.parentElement)||void 0===i||i.append(s)}hide(){var e;null===(e=this.element)||void 0===e||e.remove(),this.element=void 0}}v([ea(ey),b("design:type",Function)],rW.prototype,"renderer",void 0),v([ea(eS),b("design:type",String)],rW.prototype,"text",void 0);class rY{constructor(e){this.noData=new rW("ag-chart-no-data-overlay",e,e.ownerDocument)}}class rV{constructor(e){this.groups={},this.series={},this.expectedSeriesCount=1,this.mode="normal",this.rootGroup=e}setSeriesCount(e){this.expectedSeriesCount=e}requestGroup(e){var t,i,s,n;let{id:r,type:a,rootGroup:o,highlightGroup:l,annotationGroup:h,seriesGrouping:d}=e,{groupIndex:u=r}=null!=d?d:{};if(null!=this.series[r])throw Error(`AG Charts - series already has an allocated layer: ${this.series[r]}`);0===Object.keys(this.series).length&&(this.mode=this.expectedSeriesCount>=30?"aggressive-grouping":"normal"),null!==(t=(s=this.groups)[a])&&void 0!==t||(s[a]={});let c=this.lookupIdx(u),p=this.groups[a][c];return p||(p=null!==(i=(n=this.groups[a])[c])&&void 0!==i?i:n[c]={seriesIds:[],group:this.rootGroup.appendChild(new i_({name:`${a}-content`,layer:!0,zIndex:t$.SERIES_LAYER_ZINDEX,zIndexSubOrder:e.getGroupZIndexSubOrder("data")})),highlight:this.rootGroup.appendChild(new i_({name:`${a}-highlight`,layer:!0,zIndex:t$.SERIES_LAYER_ZINDEX,zIndexSubOrder:e.getGroupZIndexSubOrder("highlight")})),annotation:this.rootGroup.appendChild(new i_({name:`${a}-annotation`,layer:!0,zIndex:t$.SERIES_LAYER_ZINDEX,zIndexSubOrder:e.getGroupZIndexSubOrder("annotation")}))}),this.series[r]={layerState:p,seriesConfig:e},p.seriesIds.push(r),p.group.appendChild(o),p.highlight.appendChild(l),p.annotation.appendChild(h),p.group}changeGroup(e){var t,i;let{id:s,seriesGrouping:n,type:r,rootGroup:a,highlightGroup:o,annotationGroup:l,oldGrouping:h}=e,{groupIndex:d=s}=null!=n?n:{};null!==(i=null===(t=this.groups[r])||void 0===t?void 0:t[d])&&void 0!==i&&i.seriesIds.includes(s)||(null!=this.series[s]&&this.releaseGroup({id:s,seriesGrouping:h,type:r,rootGroup:a,highlightGroup:o,annotationGroup:l}),this.requestGroup(e))}releaseGroup(e){var t,i,s,n,r;let{id:a,seriesGrouping:o,rootGroup:l,highlightGroup:h,annotationGroup:d,type:u}=e,{groupIndex:c=a}=null!=o?o:{};if(null==this.series[a])throw Error(`AG Charts - series doesn't have an allocated layer: ${a}`);let p=this.lookupIdx(c),g=null!==(i=null===(t=this.groups[u])||void 0===t?void 0:t[p])&&void 0!==i?i:null===(s=this.series[a])||void 0===s?void 0:s.layerState;if(g&&(g.seriesIds=g.seriesIds.filter(e=>e!==a),g.group.removeChild(l),g.highlight.removeChild(h),g.annotation.removeChild(d)),(null==g?void 0:g.seriesIds.length)===0)this.rootGroup.removeChild(g.group),this.rootGroup.removeChild(g.highlight),this.rootGroup.removeChild(g.annotation),delete this.groups[u][p],delete this.groups[u][a];else if((null==g?void 0:g.seriesIds.length)>0){let e=null===(r=this.series[null===(n=null==g?void 0:g.seriesIds)||void 0===n?void 0:n[0]])||void 0===r?void 0:r.seriesConfig;g.group.zIndexSubOrder=null==e?void 0:e.getGroupZIndexSubOrder("data"),g.highlight.zIndexSubOrder=null==e?void 0:e.getGroupZIndexSubOrder("highlight"),g.annotation.zIndexSubOrder=null==e?void 0:e.getGroupZIndexSubOrder("annotation")}delete this.series[a]}lookupIdx(e){return"normal"===this.mode?e:"string"!=typeof e||(e=Number(e.split("-").slice(-1)[0]))?Math.floor(30*Math.max(Math.min(e/this.expectedSeriesCount,1),0)):0}destroy(){for(let e of Object.values(this.groups))for(let t of Object.values(e))this.rootGroup.removeChild(t.group),this.rootGroup.removeChild(t.highlight),this.rootGroup.removeChild(t.annotation);this.groups={},this.series={}}}class r${constructor(){this.groups={}}registerSeries({id:e,seriesGrouping:t,visible:i,type:s}){var n,r;t&&(null!==(n=(r=this.groups)[s])&&void 0!==n||(r[s]={}),this.groups[s][e]={grouping:t,visible:i})}deregisterSeries({id:e,type:t}){this.groups[t]&&delete this.groups[t][e],this.groups[t]&&0===Object.keys(this.groups[t]).length&&delete this.groups[t]}getVisiblePeerGroupIndex({type:e,seriesGrouping:t}){var i;if(!t)return{visibleGroupCount:1,index:0};let s=[...Object.entries(null!==(i=this.groups[e])&&void 0!==i?i:{}).filter(([e,t])=>t.visible).reduce((e,[t,i])=>(i.visible&&e.add(i.grouping.groupIndex),e),new Set).values()];return s.sort((e,t)=>e-t),{visibleGroupCount:s.length,index:s.indexOf(t.groupIndex)}}}class rX{constructor(e,t){this.chartLike=e,this.layoutService=t,this.destroyFns=[],this.destroyFns.push(this.layoutService.addListener("layout-complete",e=>this.layoutComplete(e)),this.layoutService.addListener("start-layout",e=>this.positionPadding(e.shrinkRect)),this.layoutService.addListener("start-layout",e=>this.positionCaptions(e.shrinkRect)))}destroy(){this.destroyFns.forEach(e=>e())}layoutComplete({clipSeries:e,series:{paddedRect:t}}){let{seriesArea:i,seriesRoot:s}=this.chartLike;i.clip||e?s.setClipRectInGroupCoordinateSpace(t):s.setClipRectInGroupCoordinateSpace()}positionPadding(e){let{padding:t}=this.chartLike;return e.shrink(t.left,"left"),e.shrink(t.top,"top"),e.shrink(t.right,"right"),e.shrink(t.bottom,"bottom"),{shrinkRect:e}}positionCaptions(e){var t,i,s,n;let{title:r,subtitle:a,footnote:o}=this.chartLike,l=e.clone(),h=t=>{var i;let s=e.height/10,n=null!==(i=t.lineHeight)&&void 0!==i?i:t.fontSize*tm.defaultLineHeightRatio,r=e.width;t.computeTextWrap(r,Math.max(n,s))},d=(e,t)=>{let i=l.y;e.node.x=l.x+l.width/2,e.node.y=i,e.node.textBaseline="top",h(e);let s=e.node.computeBBox(),n=Math.ceil(s.y-i+s.height+t);l.shrink(n,"top")};if(a&&(a.node.visible=null!==(t=a.enabled)&&void 0!==t&&t),r&&(r.node.visible=r.enabled,r.node.visible)){let e=(null==a?void 0:a.node.visible)?tw.SMALL_PADDING:tw.LARGE_PADDING,t=null!==(i=r.spacing)&&void 0!==i?i:e;d(r,t)}return a&&a.node.visible&&d(a,null!==(s=a.spacing)&&void 0!==s?s:0),o&&(o.node.visible=o.enabled,o.node.visible&&((e,t)=>{let i=l.y+l.height;e.node.x=l.x+l.width/2,e.node.y=i,e.node.textBaseline="bottom",h(e);let s=Math.ceil(i-e.node.computeBBox().y+t);l.shrink(s,"bottom")})(o,null!==(n=o.spacing)&&void 0!==n?n:0)),{shrinkRect:l}}}class rH extends sm{constructor(e){super(),this.updateCallback=e}update(e=tQ.FULL,{forceNodeDataRefresh:t=!1,skipAnimations:i=!1}={}){this.updateCallback(e,{forceNodeDataRefresh:t,skipAnimations:i})}dispatchUpdateComplete(e){this.dispatch("update-complete",{type:"update-complete",minRect:e})}}class rU{constructor(){this.clip=void 0,this.padding=new nR(0)}}v([ea(eb),b("design:type",Boolean)],rU.prototype,"clip",void 0);class rK extends sy{getOptions(){var e;let{queuedUserOptions:t}=this;return X([null!==(e=t[t.length-1])&&void 0!==e?e:this.userOptions])}autoSizeChanged(e){let{style:t}=this.element;if(e){if(t.display="block",t.width="100%",t.height="100%",!this._lastAutoSize)return;this.resize(void 0,void 0,"autoSize option")}else t.display="inline-block",t.width="auto",t.height="auto"}download(e,t){this.scene.download(e,t)}get destroyed(){return this._destroyed}constructor(e,t){var s;super(),this.id=ti(this),this.processedOptions={},this.userOptions={},this.queuedUserOptions=[],this.seriesRoot=new i_({name:`${this.id}-Series-root`}),this.debug=B.create(),this.extraDebugStats={},this.container=void 0,this.data=[],this._firstAutoSize=!0,this.padding=new nR(20),this.seriesArea=new rU,this.title=void 0,this.subtitle=void 0,this.footnote=void 0,this.mode="standalone",this._destroyed=!1,this._destroyFns=[],this.modules={},this.legendModules={},this.processors=[],this.legends=new Map,this._pendingFactoryUpdatesCount=0,this._performUpdateNoRenderCount=0,this._performUpdateType=tQ.NONE,this._performUpdateSkipAnimations=!1,this.updateShortcutCount=0,this.seriesToUpdate=new Set,this.updateMutex=new n4,this.updateRequestors={},this.performUpdateTrigger=n6((e,t=0)=>setTimeout(e,t),({count:e})=>x(this,void 0,void 0,function*(){this._destroyed||this.updateMutex.acquire(()=>x(this,void 0,void 0,function*(){try{yield this.performUpdate(e)}catch(e){this._lastPerformUpdateError=e,T.error("update error",e)}}))})),this._axes=[],this._series=[],this.lastInteractionEvent=void 0,this.pointerScheduler=n6((e,t)=>requestAnimationFrame(e),()=>{this.lastInteractionEvent&&this.handlePointer(this.lastInteractionEvent),this.lastInteractionEvent=void 0}),this.onSeriesNodeClick=e=>{let t=Object.assign(Object.assign({},e),{type:"seriesNodeClick"});Object.defineProperty(t,"series",{enumerable:!1,get:()=>e.series}),this.fireEvent(t)},this.onSeriesNodeDoubleClick=e=>{let t=Object.assign(Object.assign({},e),{type:"seriesNodeDoubleClick"});this.fireEvent(t)},this.specialOverrides=function(e){let t,s;if(null!=e.window)t=e.window;else if("undefined"!=typeof window)t=window;else if(void 0!==i.g)t=i.g.window;else throw Error("AG Charts - unable to resolve global window");if(null!=e.document)s=e.document;else if("undefined"!=typeof document)s=document;else if(void 0!==i.g)s=i.g.document;else throw Error("AG Charts - unable to resolve global document");return{document:s,window:t,overrideDevicePixelRatio:e.overrideDevicePixelRatio,sceneMode:e.sceneMode}}(e);let{window:n,document:r}=this.specialOverrides,a=null==t?void 0:t.scene,o=null!==(s=null==t?void 0:t.element)&&void 0!==s?s:r.createElement("div"),l=null==t?void 0:t.container,h=new i_({name:"root"});h.visible=!1,h.append(this.seriesRoot),this.axisGridGroup=new i_({name:"Axes-Grids",layer:!0,zIndex:t$.AXIS_GRID_ZINDEX}),h.appendChild(this.axisGridGroup),this.axisGroup=new i_({name:"Axes",layer:!0,zIndex:t$.AXIS_ZINDEX}),h.appendChild(this.axisGroup),this.element=o,o.classList.add("ag-chart-wrapper"),o.style.position="relative",this.scene=null!=a?a:new n5(this.specialOverrides),this.scene.root=h,this.scene.container=o,this.autoSize=!0,this.chartEventManager=new rh,this.cursorManager=new rd(o),this.highlightManager=new ru,this.interactionManager=new rf(o,r,n),this.zoomManager=new ry,this.dataService=new rn(()=>this.series),this.layoutService=new rb,this.updateService=new rH((e=tQ.FULL,{forceNodeDataRefresh:t,skipAnimations:i})=>this.update(e,{forceNodeDataRefresh:t,skipAnimations:i})),this.seriesStateManager=new r$,this.seriesLayerManager=new rV(this.seriesRoot),this.callbackCache=new n3,this.animationManager=new ro(this.interactionManager,this.updateMutex),this.animationManager.skip(),this.animationManager.play(),this.processors=[new rX(this,this.layoutService)],this.tooltip=new sJ(this.scene.canvas.element,r,n,r.body),this.tooltipManager=new rm(this.tooltip,this.interactionManager),this.overlays=new rY(this.element),this.highlight=new n9,this.container=l,n8.observe(this.element,e=>this.rawResize(e)),this._destroyFns.push(this.interactionManager.addListener("click",e=>this.onClick(e)),this.interactionManager.addListener("dblclick",e=>this.onDoubleClick(e)),this.interactionManager.addListener("hover",e=>this.onMouseMove(e)),this.interactionManager.addListener("leave",e=>this.onLeave(e)),this.interactionManager.addListener("page-left",()=>this.destroy()),this.interactionManager.addListener("wheel",()=>this.disablePointer()),this.interactionManager.addListener("drag-start",()=>this.disablePointer()),this.animationManager.addListener("animation-frame",e=>{this.update(tQ.SCENE_RENDER)}),this.highlightManager.addListener("highlight-change",e=>this.changeHighlightDatum(e)),this.zoomManager.addListener("zoom-change",e=>this.update(tQ.PROCESS_DATA,{forceNodeDataRefresh:!0,skipAnimations:!0}))),this.legend=this.attachLegend("category",rz)}addModule(e){if(null!=this.modules[e.optionsKey])throw Error("AG Charts - module already initialised: "+e.optionsKey);let t=new e.instanceConstructor(this.getModuleContext());this.modules[e.optionsKey]={instance:t},this[e.optionsKey]=t}removeModule(e){var t;null===(t=this.modules[e.optionsKey])||void 0===t||t.instance.destroy(),delete this.modules[e.optionsKey],delete this[e.optionsKey]}attachLegend(e,t){let i=new t(this.getModuleContext());return this.legends.set(e,i),i.attachLegend(this.scene.root),i}addLegendModule(e){if(null!=this.modules[e.optionsKey])throw Error("AG Charts - module already initialised: "+e.optionsKey);let t=this.attachLegend(e.identifier,e.instanceConstructor);this.modules[e.optionsKey]={instance:t},this[e.optionsKey]=t}removeLegendModule(e){this.legends.delete(e.identifier),this.removeModule(e)}isModuleEnabled(e){return null!=this.modules[e.optionsKey]}getModuleContext(){let{scene:e,animationManager:t,chartEventManager:i,cursorManager:s,highlightManager:n,interactionManager:r,tooltipManager:a,zoomManager:o,dataService:l,layoutService:h,updateService:d,seriesStateManager:u,seriesLayerManager:c,mode:p,callbackCache:g,specialOverrides:{window:f,document:m}}=this;return{window:f,document:m,scene:e,animationManager:t,chartEventManager:i,cursorManager:s,highlightManager:n,interactionManager:r,tooltipManager:a,zoomManager:o,dataService:l,layoutService:h,updateService:d,mode:p,seriesStateManager:u,seriesLayerManager:c,callbackCache:g}}destroy(e){let t;if(this._destroyed)return;let i=null==e?void 0:e.keepTransferableResources;for(let e of(this._performUpdateType=tQ.NONE,this._destroyFns.forEach(e=>e()),this.processors.forEach(e=>e.destroy()),this.tooltipManager.destroy(),this.tooltip.destroy(),Object.values(this.legends).forEach(e=>e.destroy()),this.legends.clear(),this.overlays.noData.hide(),n8.unobserve(this.element),Object.keys(this.modules)))this.removeModule({optionsKey:e});return this.interactionManager.destroy(),this.animationManager.stop(),i?(this.scene.strip(),t={container:this.container,scene:this.scene,element:this.element}):(this.scene.destroy(),this.container=void 0),this.removeAllSeries(),this.seriesLayerManager.destroy(),this.axes.forEach(e=>e.destroy()),this.axes=[],this.callbackCache.invalidateCache(),this._destroyed=!0,t}disablePointer(e=!1){e||this.tooltipManager.removeTooltip(this.id),this.highlightManager.updateHighlight(this.id),this.lastInteractionEvent&&(this.lastInteractionEvent=void 0)}requestFactoryUpdate(e){this._pendingFactoryUpdatesCount++,this.updateMutex.acquire(()=>x(this,void 0,void 0,function*(){yield e(),this._pendingFactoryUpdatesCount--}))}get performUpdateType(){return this._performUpdateType}get lastPerformUpdateError(){return this._lastPerformUpdateError}update(e=tQ.FULL,t){var i,s;let{forceNodeDataRefresh:n=!1,skipAnimations:r,seriesToUpdate:a=this.series,newAnimationBatch:o}=null!=t?t:{};for(let e of(n&&this.series.forEach(e=>e.markNodeDataDirty()),a))this.seriesToUpdate.add(e);if(r&&(this.animationManager.skipCurrentBatch(),this._performUpdateSkipAnimations=!0),o&&(this.animationManager.isActive()?this._performUpdateSkipAnimations=!0:null!==(i=this._performUpdateSkipAnimations)&&void 0!==i||(this._performUpdateSkipAnimations=!1)),B.check(!0)){let t=null!==(s=Error().stack)&&void 0!==s?s:"<unknown>";t=t.replace(/\([^)]*/g,""),this.updateRequestors[t]=e}e<this._performUpdateType&&(this._performUpdateType=e,this.performUpdateTrigger.schedule(null==t?void 0:t.backOffMs))}performUpdate(e){var t;return x(this,void 0,void 0,function*(){let{_performUpdateType:i,extraDebugStats:s}=this,n=[...this.seriesToUpdate];this._performUpdateType=tQ.NONE,this.seriesToUpdate.clear(),0===this.updateShortcutCount&&i<tQ.SCENE_RENDER&&this.animationManager.startBatch(this._performUpdateSkipAnimations),this.debug("Chart.performUpdate() - start",tQ[i]);let r={start:performance.now()};switch(i){case tQ.FULL:case tQ.PROCESS_DATA:yield this.processData(),this.disablePointer(!0),r["\uD83C\uDFED"]=performance.now();case tQ.PERFORM_LAYOUT:if(this.checkUpdateShortcut(tQ.PERFORM_LAYOUT)||!this.checkFirstAutoSize(n))break;yield this.processLayout(),r[""]=performance.now();case tQ.SERIES_UPDATE:if(this.checkUpdateShortcut(tQ.SERIES_UPDATE))break;let{seriesRect:a}=this,o=[...n].map(e=>e.update({seriesRect:a}));yield Promise.all(o),r["\uD83E\uDD14"]=performance.now();case tQ.TOOLTIP_RECALCULATION:if(this.checkUpdateShortcut(tQ.TOOLTIP_RECALCULATION))break;let l=this.tooltipManager.getTooltipMeta(this.id),h=(null===(t=null==l?void 0:l.event)||void 0===t?void 0:t.type)==="hover";i<=tQ.SERIES_UPDATE&&h&&this.handlePointer(l.event),r[""]=performance.now();case tQ.SCENE_RENDER:if(this.checkUpdateShortcut(tQ.SCENE_RENDER))break;s.updateShortcutCount=this.updateShortcutCount,yield this.scene.render({debugSplitTimes:r,extraDebugStats:s}),this.extraDebugStats={};case tQ.NONE:this.updateShortcutCount=0,this.updateRequestors={},this._performUpdateSkipAnimations=void 0,this.animationManager.endBatch()}this.updateService.dispatchUpdateComplete(this.getMinRect());let d=performance.now();this.debug("Chart.performUpdate() - end",{chart:this,durationMs:Math.round((d-r.start)*100)/100,count:e,performUpdateType:tQ[i]})})}checkUpdateShortcut(e){return this.updateShortcutCount>3?(T.warn("exceeded the maximum number of simultaneous updates (4), discarding changes and rendering",this.updateRequestors),!1):this.performUpdateType<=e&&(this.updateShortcutCount++,!0)}checkFirstAutoSize(e){if(this.autoSize&&!this._lastAutoSize){let t=this._performUpdateNoRenderCount++,i=(2^t)*10;if(t<8)return this.update(tQ.PERFORM_LAYOUT,{seriesToUpdate:e,backOffMs:i}),this.debug("Chart.checkFirstAutoSize() - backing off until first size update",i),!1;this.debug("Chart.checkFirstAutoSize() - timeout for first size update.")}return this._performUpdateNoRenderCount=0,!0}set axes(e){let t=new Set;this._axes.forEach(e=>{e.detachAxis(this.axisGroup,this.axisGridGroup),t.add(e)}),this._axes=e.filter(e=>!e.linkedTo).concat(e.filter(e=>e.linkedTo)),this._axes.forEach(e=>{e.attachAxis(this.axisGroup,this.axisGridGroup),t.delete(e)}),this.zoomManager.updateAxes(this._axes),t.forEach(e=>e.destroy())}get axes(){return this._axes}set series(e){this.removeAllSeries(),this.seriesLayerManager.setSeriesCount(e.length),e.forEach(e=>this.addSeries(e))}get series(){return this._series}addSeries(e){let{series:t}=this;return 0>t.indexOf(e)&&(t.push(e),null==e.rootGroup.parent&&this.seriesLayerManager.requestGroup(e),this.initSeries(e),!0)}initSeries(e){let t=this;e.chart={get mode(){return t.mode},get seriesRect(){return t.seriesRect},placeLabels:()=>t.placeLabels()},e.setChartData(this.data),this.addSeriesListeners(e),e.addChartEventListeners()}removeAllSeries(){this.series.forEach(e=>{e.removeEventListener("nodeClick",this.onSeriesNodeClick),e.removeEventListener("nodeDoubleClick",this.onSeriesNodeDoubleClick),e.destroy(),e.chart=void 0}),this._series=[]}addSeriesListeners(e){this.hasEventListener("seriesNodeClick")&&e.addEventListener("nodeClick",this.onSeriesNodeClick),this.hasEventListener("seriesNodeDoubleClick")&&e.addEventListener("nodeDoubleClick",this.onSeriesNodeDoubleClick)}updateAllSeriesListeners(){this.series.forEach(e=>{e.removeEventListener("nodeClick",this.onSeriesNodeClick),e.removeEventListener("nodeDoubleClick",this.onSeriesNodeDoubleClick),this.addSeriesListeners(e)})}assignSeriesToAxes(){this.axes.forEach(e=>{e.boundSeries=this.series.filter(t=>t.axes[e.direction]===e)})}assignAxesToSeries(){let e={};this.axes.forEach(t=>{var i;let s=t.direction;(null!==(i=e[s])&&void 0!==i?i:e[s]=[]).push(t)}),this.series.forEach(t=>{t.directions.forEach(i=>{let s=e[i];if(!s){T.warnOnce(`no available axis for direction [${i}]; check series and axes configuration.`);return}let n=t.getKeys(i),r=this.findMatchingAxis(s,n);if(!r){T.warnOnce(`no matching axis for direction [${i}] and keys [${n}]; check series and axes configuration.`);return}t.axes[i]=r})})}findMatchingAxis(e,t){for(let i of e){let e=i.keys;if(!e.length)return i;if(t){for(let s of t)if(e.indexOf(s)>=0)return i}}}rawResize(e){var t;let{width:i,height:s}=e;if(i=Math.floor(i),s=Math.floor(s),!this.autoSize||0===i&&0===s)return;let[n=0,r=0]=null!==(t=this._lastAutoSize)&&void 0!==t?t:[];(n!==i||r!==s)&&(this._lastAutoSize=[i,s],this.resize(void 0,void 0,"SizeMonitor"))}resize(e,t,i){var s,n,r,a;if(null!=e||(e=null!==(s=this.width)&&void 0!==s?s:this.autoSize?null===(n=this._lastAutoSize)||void 0===n?void 0:n[0]:this.scene.canvas.width),null!=t||(t=null!==(r=this.height)&&void 0!==r?r:this.autoSize?null===(a=this._lastAutoSize)||void 0===a?void 0:a[1]:this.scene.canvas.height),this.debug(`Chart.resize() from ${i}`,{width:e,height:t,stack:Error().stack}),e&&t&&Number.isFinite(e)&&Number.isFinite(t)&&this.scene.resize(e,t)){this.disablePointer(),this.animationManager.reset();let e=!0;this.autoSize&&this._firstAutoSize&&(e=!1,this._firstAutoSize=!1),this.update(tQ.PERFORM_LAYOUT,{forceNodeDataRefresh:!0,skipAnimations:e})}}processData(){return x(this,void 0,void 0,function*(){this.series.some(e=>e.canHaveAxes)&&(this.assignAxesToSeries(),this.assignSeriesToAxes());let e=new rs(this.mode),t=this.series.map(t=>t.processData(e));yield e.execute(),yield Promise.all(t),yield this.updateLegend()})}placeLabels(){let e=[],t=[];for(let s of this.series){var i;if(!s.visible)continue;let n=s.getLabelData();n&&null!=(i=n[0])&&"object"==typeof i.point&&"object"==typeof i.label&&(t.push(n),e.push(s))}let{seriesRect:s}=this,n=s&&t.length>0?function(e,t,i=5){let s=[];e=e.map(e=>e.slice().sort((e,t)=>t.point.size-e.point.size));for(let n=0;n<e.length;n++){let r=s[n]=[],a=e[n];if((null==a?void 0:a.length)&&a[0].label)for(let n=0,o=a.length;n<o;n++){let o=a[n],l=o.label,h=.5*o.point.size,d=o.point.x-.5*l.width,u=o.point.y-h-l.height-i,{width:c,height:p}=l;!(!t||d+c<t.x+t.width&&d>t.x&&u>t.y&&u+p<t.y+t.height)||e.some(e=>e.some(e=>(function(e,t,i,s,n){let r=e.x;e.x<t?r=t:e.x>t+s&&(r=t+s);let a=e.y;e.y<i?a=i:e.y>i+n&&(a=i+n);let o=e.x-r,l=e.y-a;return Math.sqrt(o*o+l*l)<=.5*e.size})(e.point,d,u,c,p)))||s.some(e=>e.some(e=>nT(e,d,u,c,p)))||r.push({index:n,text:l.text,x:d,y:u,width:c,height:p,datum:o})}}return s}(t,{x:0,y:0,width:s.width,height:s.height}):[];return new Map(n.map((t,i)=>[e[i],t]))}updateLegend(){return x(this,void 0,void 0,function*(){this.legends.forEach((e,t)=>{let i=this.series.filter(e=>e.showInLegend).flatMap(e=>e.getLegendData(t));i.every(e=>"category"===e.legendType)&&this.validateCategoryLegendData(i),e.data=i})})}validateCategoryLegendData(e){let t={};for(let i of(e.forEach(e=>{var i,s,n,r,a;let o=null===(i=this.series.find(t=>t.id===e.seriesId))||void 0===i?void 0:i.type;o&&(null!==(s=t[o])&&void 0!==s||(t[o]={}),null!==(n=(r=t[o])[a=e.label.text])&&void 0!==n||(r[a]=new Set),null!=e.marker.fill&&t[o][e.label.text].add(e.marker.fill))}),Object.values(t)))for(let[e,t]of Object.entries(i))t.size>1&&T.warnOnce(`legend item '${e}' has multiple fill colors, this may cause unexpected behaviour.`)}processLayout(){var e;return x(this,void 0,void 0,function*(){let t=this.animationRect;yield this.performLayout(),!t||(null===(e=this.animationRect)||void 0===e?void 0:e.equals(t))||this.animationManager.skipCurrentBatch(),this.handleNoDataOverlay(),this.debug("Chart.performUpdate() - seriesRect",this.seriesRect)})}performLayout(){return x(this,void 0,void 0,function*(){this.scene.root&&(this.scene.root.visible=!0);let{width:e,height:t}=this.scene,i={shrinkRect:new ts(0,0,e,t)};return i=this.layoutService.dispatchPerformLayout("start-layout",i),(i=this.layoutService.dispatchPerformLayout("before-series",i)).shrinkRect})}pickSeriesNode(e,t,i){var s,n;let r;let a=performance.now(),o=t?[tX.EXACT_SHAPE_MATCH]:void 0;for(let t of[...this.series].reverse()){if(!t.visible||!t.rootGroup.visible)continue;let{match:n,distance:a}=null!==(s=t.pickNode(e,o))&&void 0!==s?s:{};if(n&&null!=a&&((!r||r.distance>a)&&a<=(null!=i?i:1/0)&&(r={series:t,distance:a,datum:n}),0===a))break}return this.extraDebugStats.pickSeriesNode=Math.round((null!==(n=this.extraDebugStats.pickSeriesNode)&&void 0!==n?n:0)+(performance.now()-a)),r}onMouseMove(e){this.lastInteractionEvent=e,this.pointerScheduler.schedule(),this.extraDebugStats.mouseX=e.offsetX,this.extraDebugStats.mouseY=e.offsetY,this.update(tQ.SCENE_RENDER)}onLeave(e){this.tooltip.pointerLeftOntoTooltip(e)||this.disablePointer()}handlePointer(e){let{lastPick:t,hoverRect:i}=this,{offsetX:s,offsetY:n}=e,r=(e=!1)=>{t&&this.disablePointer(e)};if(!(null==i?void 0:i.containsPoint(s,n))){r();return}this.handlePointerTooltip(e,r),this.handlePointerNode(e)}handlePointerTooltip(e,t){let i,s;let{lastPick:n,tooltip:r}=this,{range:a}=r,{offsetX:o,offsetY:l}=e;"number"==typeof a&&Number.isFinite(a)&&(i=a);let h=this.pickSeriesNode({x:o,y:l},"exact"===a,i);if(!h){this.tooltipManager.removeTooltip(this.id),"tooltip"===this.highlight.range&&t(!0);return}let d="node"===this.highlight.range||!n||n.datum!==h.datum;d?(s=h.series.getTooltipHtml(h.datum),"tooltip"===this.highlight.range&&this.highlightManager.updateHighlight(this.id,h.datum)):n&&(n.event=e.sourceEvent);let u=null!=i,c=this.tooltip.enabled&&h.series.tooltip.enabled,p="exact"===a&&0===h.distance,g="nearest"===a||u||p,f=c&&g&&(!d||void 0!==s),m=rm.makeTooltipMeta(e,this.scene.canvas,h.datum,this.specialOverrides.window);f&&this.tooltipManager.updateTooltip(this.id,m,s)}handlePointerNode(e){this.checkSeriesNodeRange(e,(e,t)=>{(e.hasEventListener("nodeClick")||e.hasEventListener("nodeDoubleClick"))&&this.cursorManager.updateCursor("chart","pointer"),"node"===this.highlight.range&&this.highlightManager.updateHighlight(this.id,t)})||(this.cursorManager.updateCursor("chart"),"node"===this.highlight.range&&this.highlightManager.updateHighlight(this.id))}onClick(e){if(this.checkSeriesNodeClick(e)){this.update(tQ.SERIES_UPDATE);return}this.fireEvent({type:"click",event:e.sourceEvent})}onDoubleClick(e){if(this.checkSeriesNodeDoubleClick(e)){this.update(tQ.SERIES_UPDATE);return}this.fireEvent({type:"doubleClick",event:e.sourceEvent})}checkSeriesNodeClick(e){return this.checkSeriesNodeRange(e,(t,i)=>t.fireNodeClickEvent(e.sourceEvent,i))}checkSeriesNodeDoubleClick(e){return this.checkSeriesNodeRange(e,(t,i)=>t.fireNodeDoubleClickEvent(e.sourceEvent,i))}checkSeriesNodeRange(e,t){let i;let s=this.pickSeriesNode({x:e.offsetX,y:e.offsetY},!1),n=null==s?void 0:s.datum,r=null==n?void 0:n.series.nodeClickRange;"number"==typeof r&&Number.isFinite(r)&&(i=r);let a=this.pickSeriesNode({x:e.offsetX,y:e.offsetY},!0);if(a?this.highlightManager.updatePicked(this.id,a.datum):this.highlightManager.updatePicked(this.id),n&&"nearest"===r)return t(n.series,n),!0;if("exact"!==r&&(a=this.pickSeriesNode({x:e.offsetX,y:e.offsetY},!1,i)),!a)return!1;let o=null!=i,l="exact"===r&&0===a.distance;return(!!o||!!l)&&(t(a.series,a.datum),!0)}changeHighlightDatum(e){var t,i;let s=new Set,{series:n,datum:r}=null!==(t=e.currentHighlight)&&void 0!==t?t:{},{series:a,datum:o}=null!==(i=e.previousHighlight)&&void 0!==i?i:{};a&&s.add(a),n&&s.add(n),(null==a?void 0:a.cursor)&&o&&this.cursorManager.updateCursor(a.id),(null==n?void 0:n.cursor)&&r&&this.cursorManager.updateCursor(n.id,n.cursor),this.lastPick=e.currentHighlight?{datum:e.currentHighlight}:void 0,null==n||null==a?this.update(tQ.SERIES_UPDATE):this.update(tQ.SERIES_UPDATE,{seriesToUpdate:s})}waitForUpdate(e=5e3){return x(this,void 0,void 0,function*(){let t=performance.now();for(this._pendingFactoryUpdatesCount>0&&(yield this.updateMutex.waitForClearAcquireQueue());this._performUpdateType!==tQ.NONE;){if(performance.now()-t>e)throw Error("waitForUpdate() timeout reached.");yield new Promise(e=>{setTimeout(()=>e(void 0),5)})}yield this.updateMutex.waitForClearAcquireQueue()})}handleNoDataOverlay(){!this.series.some(e=>e.hasData())&&this.seriesRect?this.overlays.noData.show(this.seriesRect):this.overlays.noData.hide()}getMinRect(){let e=this.series.map(e=>e.getMinRect()).filter(e=>void 0!==e);if(e.length)return new ts(0,0,e.reduce((e,t)=>Math.max(e,t.width),0),e.reduce((e,t)=>Math.max(e,t.height),0))}}v([tD({newValue(e){this.destroyed||e.appendChild(this.element)},oldValue(e){e.removeChild(this.element)}}),b("design:type",Object)],rK.prototype,"container",void 0),v([tD({newValue(e){var t;null===(t=this.series)||void 0===t||t.forEach(t=>{t.setChartData(e)})}}),b("design:type",Object)],rK.prototype,"data",void 0),v([tD({newValue(e){this.resize(e,void 0,"width option")}}),b("design:type",Number)],rK.prototype,"width",void 0),v([tD({newValue(e){this.resize(void 0,e,"height option")}}),b("design:type",Number)],rK.prototype,"height",void 0),v([tD({changeValue(e){this.autoSizeChanged(e)}}),ea(ev),b("design:type",Object)],rK.prototype,"autoSize",void 0),v([tD({newValue(e){var t;null===(t=this.scene.root)||void 0===t||t.appendChild(e.node)},oldValue(e){var t;null===(t=this.scene.root)||void 0===t||t.removeChild(e.node)}}),b("design:type",Function)],rK.prototype,"title",void 0),v([tD({newValue(e){var t;null===(t=this.scene.root)||void 0===t||t.appendChild(e.node)},oldValue(e){var t;null===(t=this.scene.root)||void 0===t||t.removeChild(e.node)}}),b("design:type",Function)],rK.prototype,"subtitle",void 0),v([tD({newValue(e){var t;null===(t=this.scene.root)||void 0===t||t.appendChild(e.node)},oldValue(e){var t;null===(t=this.scene.root)||void 0===t||t.removeChild(e.node)}}),b("design:type",Function)],rK.prototype,"footnote",void 0),v([ea(eF("standalone","integrated")),b("design:type",String)],rK.prototype,"mode",void 0),(ia=t0||(t0={}))[ia.Open=0]="Open",ia[ia.Chord=1]="Chord",ia[ia.Round=2]="Round";class rq extends i${constructor(){super(),this.centerX=0,this.centerY=0,this.radius=10,this.startAngle=0,this.endAngle=2*Math.PI,this.counterClockwise=!1,this.type=t0.Open,this.restoreOwnStyles()}get fullPie(){return function(e,t,i=1e-10){return Math.abs(e-t)<i}(J(this.startAngle),J(this.endAngle))}updatePath(){let e=this.path;e.clear(),e.arc(this.centerX,this.centerY,this.radius,this.startAngle,this.endAngle,this.counterClockwise),this.type===t0.Chord?e.closePath():this.type!==t0.Round||this.fullPie||(e.lineTo(this.centerX,this.centerY),e.closePath())}computeBBox(){return new ts(this.centerX-this.radius,this.centerY-this.radius,2*this.radius,2*this.radius)}isPointInPath(e,t){let i=this.transformPoint(e,t),s=this.computeBBox();return this.type!==t0.Open&&s.containsPoint(i.x,i.y)&&this.path.isPointInPath(i.x,i.y)}}rq.className="Arc",rq.defaultStyles=Object.assign({},tg.defaultStyles,{lineWidth:1,fillStyle:null}),v([iV(),b("design:type",Number)],rq.prototype,"centerX",void 0),v([iV(),b("design:type",Number)],rq.prototype,"centerY",void 0),v([iV(),b("design:type",Number)],rq.prototype,"radius",void 0),v([iV(),b("design:type",Number)],rq.prototype,"startAngle",void 0),v([iV(),b("design:type",Number)],rq.prototype,"endAngle",void 0),v([iV(),b("design:type",Boolean)],rq.prototype,"counterClockwise",void 0),v([iV(),b("design:type",Number)],rq.prototype,"type",void 0);let rZ=e=>{let t=er.fromString(e),[i,s,n]=er.RGBtoHSL(t.r,t.g,t.b);return{h:i,s,l:n,a:t.a}},rJ=(e,t,i)=>{let s,n;if(i=Math.min(Math.max(i,0),1),Number.isNaN(e.h)&&Number.isNaN(t.h))s=0,n=0;else if(Number.isNaN(e.h))s=t.h,n=t.s;else if(Number.isNaN(t.h))s=e.h,n=e.s;else{let r=e.h,a=t.h,o=t.h-e.h;o>180?a-=360:o<-180&&(a+=360),s=r*(1-i)+a*i,n=e.s*(1-i)+t.s*i}let r=e.l*(1-i)+t.l*i,a=e.a*(1-i)+t.a*i;return er.fromHSL(s,n,r,a)};class rQ{constructor(){this.domain=[0,1],this.range=["red","blue"],this.parsedRange=this.range.map(rZ)}update(){let{domain:e,range:t}=this;e.length<2&&(T.warnOnce("`colorDomain` should have at least 2 values."),0===e.length?e.push(0,1):1===e.length&&e.push(e[0]+1));for(let t=1;t<e.length;t++)if(e[t-1]>=e[t]){T.warnOnce("`colorDomain` values should be supplied in ascending order."),e.sort((e,t)=>e-t);break}if(t.length<e.length)for(let i=t.length;i<e.length;i++)t.push(t.length>0?t[0]:"black");this.parsedRange=this.range.map(rZ)}convert(e){let t,i;let{domain:s,range:n,parsedRange:r}=this,a=s[0],o=s[s.length-1],l=n[0],h=n[n.length-1];if(e<=a)return l;if(e>=o)return h;if(2===s.length){let s=(e-a)/(o-a),r=1/(n.length-1);t=n.length<=2?0:Math.min(Math.floor(s*(n.length-1)),n.length-2),i=(s-t*r)/r}else{for(t=0;t<s.length-2&&!(e<s[t+1]);t++);let n=s[t];i=(e-n)/(s[t+1]-n)}return rJ(r[t],r[t+1],i).toRgbaString()}}class r0 extends tg{constructor(){super(...arguments),this.direction="to-right",this.stops=void 0,this._mask=void 0}get mask(){return this._mask}set mask(e){null!=this._mask&&this.removeChild(this._mask),null!=e&&this.appendChild(e),this._mask=e}isPointInPath(e,t){var i,s;return null!==(s=null===(i=this.mask)||void 0===i?void 0:i.isPointInPath(e,t))&&void 0!==s&&s}computeBBox(){var e;return null===(e=this.mask)||void 0===e?void 0:e.computeBBox()}render(e){let{mask:t,stops:i}=this,{ctx:s,devicePixelRatio:n}=e,r=1/n,a=null==t?void 0:t.computeTransformedBBox();if(null==t||null==i||null==a)return;t.dirtyPath&&(t.updatePath(),t.dirtyPath=!1),s.save(),s.beginPath(),t.path.draw(s),s.clip(),s.resetTransform();let o=Math.floor(a.x),l=Math.ceil(a.x+a.width),h=Math.floor(a.y),d=Math.ceil(a.y+a.height),u=new rQ,[c,p]="to-right"===this.direction?[o,l]:[h,d];if(u.domain=i.map((e,t)=>c+(p-c)*t/(i.length-1)),u.range=i,u.update(),"to-right"===this.direction){let e=d-h;for(let t=o;t<=l;t+=r)s.fillStyle=u.convert(t),s.fillRect(t,h,r,e)}else{let e=l-o;for(let t=h;t<=d;t+=r)s.fillStyle=u.convert(t),s.fillRect(o,t,e,r)}s.restore()}}v([e7({redraw:tz.MAJOR}),b("design:type",String)],r0.prototype,"direction",void 0),v([e7({redraw:tz.MAJOR}),b("design:type",Array)],r0.prototype,"stops",void 0),v([e7({redraw:tz.MAJOR}),b("design:type",Function)],r0.prototype,"_mask",void 0);class r1 extends i${constructor(){super(...arguments),this.borderPath=new iY,this.x=0,this.y=0,this.width=10,this.height=10,this.radius=0,this.crisp=!1,this.lastUpdatePathStrokeWidth=tg.defaultStyles.strokeWidth,this.effectiveStrokeWidth=tg.defaultStyles.strokeWidth,this.microPixelEffectOpacity=1}isDirtyPath(){var e;return this.lastUpdatePathStrokeWidth!==this.strokeWidth||!!(this.path.isDirty()||this.borderPath.isDirty()||(null===(e=this.clipPath)||void 0===e?void 0:e.isDirty()))}updatePath(){var e,t,i;let{path:s,borderPath:n,crisp:r}=this,{x:a,y:o,width:l,height:h,strokeWidth:d}=this,u=1/(null!==(t=null===(e=this.layerManager)||void 0===e?void 0:e.canvas.pixelRatio)&&void 0!==t?t:1),c=1;if(s.clear({trackChanges:!0}),n.clear({trackChanges:!0}),r&&(l<=u&&(c*=l/u),h<=u&&(c*=h/u),l=this.align(a,l),h=this.align(o,h),a=this.align(a),o=this.align(o)),d){if(l<u){let e=a+u/2;n.moveTo(e,o),n.lineTo(e,o+h),d=u,this.borderClipPath=void 0}else if(h<u){let e=o+u/2;n.moveTo(a,e),n.lineTo(a+l,e),d=u,this.borderClipPath=void 0}else if(d<l&&d<h){let e=d/2;a+=e,o+=e,l-=d,h-=d,this.borderClipPath=void 0,s.rect(a,o,l,h),n.rect(a,o,l,h)}else this.borderClipPath=null!==(i=this.borderClipPath)&&void 0!==i?i:new iY,this.borderClipPath.clear({trackChanges:!0}),this.borderClipPath.rect(a,o,l,h),n.rect(a,o,l,h)}else this.borderClipPath=void 0,s.rect(a,o,l,h);this.effectiveStrokeWidth=d,this.lastUpdatePathStrokeWidth=d,this.microPixelEffectOpacity=c}computeBBox(){let{x:e,y:t,width:i,height:s}=this;return new ts(e,t,i,s)}isPointInPath(e,t){let i=this.transformPoint(e,t);return this.computeBBox().containsPoint(i.x,i.y)}applyFillAlpha(e){let{fillOpacity:t,microPixelEffectOpacity:i,opacity:s}=this,{globalAlpha:n}=e;e.globalAlpha=n*s*t*i}renderStroke(e){let{stroke:t,effectiveStrokeWidth:i,borderPath:s,borderClipPath:n,opacity:r,microPixelEffectOpacity:a}=this;if(t&&i){let{strokeOpacity:o,lineDash:l,lineDashOffset:h,lineCap:d,lineJoin:u}=this;n&&(n.draw(e),e.clip()),s.draw(e);let{globalAlpha:c}=e;e.strokeStyle=t,e.globalAlpha=c*r*o*a,e.lineWidth=i,l&&e.setLineDash(l),h&&(e.lineDashOffset=h),d&&(e.lineCap=d),u&&(e.lineJoin=u),e.stroke(),e.globalAlpha=c}}}r1.className="Rect",v([iV(),b("design:type",Number)],r1.prototype,"x",void 0),v([iV(),b("design:type",Number)],r1.prototype,"y",void 0),v([iV(),b("design:type",Number)],r1.prototype,"width",void 0),v([iV(),b("design:type",Number)],r1.prototype,"height",void 0),v([iV(),b("design:type",Number)],r1.prototype,"radius",void 0),v([iV(),b("design:type",Boolean)],r1.prototype,"crisp",void 0);class r2 extends ta{constructor(e){super(),this.x=0,this.y=0,this.width=0,this.height=0,this.opacity=1,this.sourceImage=e}render(e){let{ctx:t,forceRender:i,stats:s}=e;if(this.dirty===tz.NONE&&!i){s&&s.nodesSkipped++;return}this.computeTransformMatrix(),this.matrix.toContext(t);let n=this.sourceImage;t.globalAlpha=this.opacity,t.drawImage(n,0,0,n.width,n.height,this.x,this.y,this.width,this.height),super.render(e)}}v([e7({redraw:tz.MAJOR}),b("design:type",Number)],r2.prototype,"x",void 0),v([e7({redraw:tz.MAJOR}),b("design:type",Number)],r2.prototype,"y",void 0),v([e7({redraw:tz.MAJOR}),b("design:type",Number)],r2.prototype,"width",void 0),v([e7({redraw:tz.MAJOR}),b("design:type",Number)],r2.prototype,"height",void 0),v([e7({redraw:tz.MAJOR}),b("design:type",Number)],r2.prototype,"opacity",void 0),Object.assign(Object.assign({},id),s3);let r5={[tG.X]:["xKey"],[tG.Y]:["yKey"]},r3={[tG.X]:["xName"],[tG.Y]:["yName"]};class r4 extends sN{constructor(e,t,i,s){super(e,t,i,s),this.xKey=s.xKey,this.yKey=s.yKey}}class r6 extends s6{get contextNodeData(){return this._contextNodeData.slice()}constructor(e){var{pathsPerSeries:t=1,hasMarkers:i=!1,hasHighlightedLabels:s=!1,pathsZIndexSubOrderOffset:n=[],directionKeys:r=r5,directionNames:a=r3,datumSelectionGarbageCollection:o=!0,markerSelectionGarbageCollection:l=!0,animationResetFns:h}=e;super(Object.assign({directionKeys:r,directionNames:a,useSeriesGroupLayer:!0,canHaveAxes:!0},y(e,["pathsPerSeries","hasMarkers","hasHighlightedLabels","pathsZIndexSubOrderOffset","directionKeys","directionNames","datumSelectionGarbageCollection","markerSelectionGarbageCollection","animationResetFns"]))),this.legendItemName=void 0,this._contextNodeData=[],this.NodeClickEvent=r4,this.highlightSelection=iP.select(this.highlightNode,()=>this.opts.hasMarkers?this.markerFactory():this.nodeFactory()),this.highlightLabelSelection=iP.select(this.highlightLabel,tm),this.annotationSelections=new Set,this.subGroups=[],this.subGroupId=0,this.debug=B.create(),this.opts={pathsPerSeries:t,hasMarkers:i,hasHighlightedLabels:s,pathsZIndexSubOrderOffset:n,directionKeys:r,directionNames:a,animationResetFns:h,datumSelectionGarbageCollection:o,markerSelectionGarbageCollection:l},this.animationState=new s4("empty",{empty:{update:{target:"ready",action:e=>this.animateEmptyUpdateReady(e)}},ready:{updateData:"waiting",clear:"clearing",highlight:e=>this.animateReadyHighlight(e),highlightMarkers:e=>this.animateReadyHighlightMarkers(e),resize:e=>this.animateReadyResize(e)},waiting:{update:{target:"ready",action:e=>this.animateWaitingUpdateReady(e)}},clearing:{update:{target:"empty",action:e=>this.animateClearingUpdateEmpty(e)}}},()=>this.checkProcessedDataAnimatable())}addChartEventListeners(){this.ctx.chartEventManager.addListener("legend-item-click",e=>this.onLegendItemClick(e)),this.ctx.chartEventManager.addListener("legend-item-double-click",e=>this.onLegendItemDoubleClick(e))}destroy(){super.destroy(),this._contextNodeData.splice(0,this._contextNodeData.length),this.subGroups.splice(0,this.subGroups.length)}update({seriesRect:e}){var t,i;return x(this,void 0,void 0,function*(){let{visible:s,_contextNodeData:n}=this,{series:r}=null!==(i=null===(t=this.ctx.highlightManager)||void 0===t?void 0:t.getActiveHighlight())&&void 0!==i?i:{},a=r?r===this:void 0,o=this.checkResize(e),l=yield this.updateHighlightSelection(a);yield this.updateSelections(s),yield this.updateNodes(l,a,s);let h=this.getAnimationData(e,n);o&&this.animationState.transition("resize",h),this.animationState.transition("update",h)})}updateSelections(e){return x(this,void 0,void 0,function*(){if(!(!e&&this.ctx.animationManager.isSkipped())&&(this.nodeDataRefresh||this.isPathOrSelectionDirty())){if(this.nodeDataRefresh){this.nodeDataRefresh=!1,this.debug("CartesianSeries.updateSelections() - calling createNodeData() for",this.id),this._contextNodeData=yield this.createNodeData();let e=this.isProcessedDataAnimatable();this._contextNodeData.forEach(t=>{var i;null!==(i=t.animationValid)&&void 0!==i||(t.animationValid=e)}),yield this.updateSeriesGroups();let{dataModel:t,processedData:i}=this;void 0!==t&&void 0!==i&&this.dispatch("data-update",{dataModel:t,processedData:i})}yield Promise.all(this.subGroups.map((e,t)=>this.updateSeriesGroupSelections(e,t)))}})}updateSeriesGroupSelections(e,t,i){return x(this,void 0,void 0,function*(){let{datumSelection:s,labelSelection:n,markerSelection:r,paths:a}=e,o=this._contextNodeData[t],{nodeData:l,labelData:h,itemId:d}=o;yield this.updatePaths({seriesHighlighted:i,itemId:d,contextData:o,paths:a,seriesIdx:t}),e.datumSelection=yield this.updateDatumSelection({nodeData:l,datumSelection:s,seriesIdx:t}),e.labelSelection=yield this.updateLabelSelection({labelData:h,labelSelection:n,seriesIdx:t}),r&&(e.markerSelection=yield this.updateMarkerSelection({nodeData:l,markerSelection:r,seriesIdx:t}))})}markerFactory(){return new(rC())}updateSeriesGroups(){return x(this,void 0,void 0,function*(){let{_contextNodeData:e,contentGroup:t,subGroups:i,opts:{pathsPerSeries:s,hasMarkers:n,datumSelectionGarbageCollection:r,markerSelectionGarbageCollection:a}}=this;if(e.length===i.length)return;e.length<i.length&&i.splice(e.length).forEach(({dataNodeGroup:e,markerGroup:i,labelGroup:s,paths:n})=>{for(let r of(t.removeChild(e),i&&t.removeChild(i),s&&t.removeChild(s),n))t.removeChild(r)});let o=e.length;for(;o>i.length;){let e=this.subGroupId++,o=new i_({name:`${this.id}-series-sub${e}-dataNodes`,layer:!1,zIndex:t$.SERIES_LAYER_ZINDEX,zIndexSubOrder:this.getGroupZIndexSubOrder("data",e)}),l=n?new i_({name:`${this.id}-series-sub${this.subGroupId++}-markers`,layer:!1,zIndex:t$.SERIES_LAYER_ZINDEX,zIndexSubOrder:this.getGroupZIndexSubOrder("marker",e)}):void 0,h=new i_({name:`${this.id}-series-sub${this.subGroupId++}-labels`,layer:!1,zIndex:t$.SERIES_LABEL_ZINDEX,zIndexSubOrder:this.getGroupZIndexSubOrder("labels",e)});t.appendChild(o),t.appendChild(h),l&&t.appendChild(l);let d=[];for(let e=0;e<s;e++)d[e]=new i$,d[e].zIndex=t$.SERIES_LAYER_ZINDEX,d[e].zIndexSubOrder=this.getGroupZIndexSubOrder("paths",e),t.appendChild(d[e]);i.push({paths:d,dataNodeGroup:o,markerGroup:l,labelGroup:h,labelSelection:iP.select(h,tm),datumSelection:iP.select(o,()=>this.nodeFactory(),r),markerSelection:l?iP.select(l,()=>this.markerFactory(),a):void 0})}})}getGroupZIndexSubOrder(e,t=0){var i;let s=super.getGroupZIndexSubOrder(e,t);if("paths"===e){let e=null!==(i=this.opts.pathsZIndexSubOrderOffset[t])&&void 0!==i?i:0,n=s[0];"function"==typeof n?s[0]=()=>+n()+e:s[0]=+n+e}return s}updateNodes(e,t,i){var s;return x(this,void 0,void 0,function*(){let{highlightSelection:n,highlightLabelSelection:r,opts:{hasMarkers:a,hasHighlightedLabels:o}}=this,l=!this.ctx.animationManager.isSkipped(),h=this.visible&&(null===(s=this._contextNodeData)||void 0===s?void 0:s.length)>0&&i;this.rootGroup.visible=l||h,this.contentGroup.visible=l||h,this.highlightGroup.visible=(l||h)&&!!t;let d=this.getOpacity();a?(yield this.updateMarkerNodes({markerSelection:n,isHighlight:!0,seriesIdx:-1}),this.animationState.transition("highlightMarkers",n)):(yield this.updateDatumNodes({datumSelection:n,isHighlight:!0,seriesIdx:-1}),this.animationState.transition("highlight",n)),o&&(yield this.updateLabelNodes({labelSelection:r,seriesIdx:-1})),yield Promise.all(this.subGroups.map((i,s)=>x(this,void 0,void 0,function*(){let{dataNodeGroup:n,markerGroup:r,datumSelection:o,labelSelection:u,markerSelection:c,paths:p,labelGroup:g}=i,{itemId:f}=this.contextNodeData[s];n.opacity=d,n.visible=l||h,g.visible=h,r&&(r.opacity=d,r.zIndex=n.zIndex>=t$.SERIES_LAYER_ZINDEX?n.zIndex:n.zIndex+1,r.visible=h),g&&(g.opacity=d),yield this.updatePathNodes({seriesHighlighted:t,itemId:f,paths:p,seriesIdx:s,opacity:d,visible:h,animationEnabled:l}),n.visible&&(yield this.updateDatumNodes({datumSelection:o,highlightedItems:e,isHighlight:!1,seriesIdx:s}),yield this.updateLabelNodes({labelSelection:u,seriesIdx:s}),a&&c&&(yield this.updateMarkerNodes({markerSelection:c,isHighlight:!1,seriesIdx:s})))})))})}getHighlightLabelData(e,t){let i=e.find(e=>e.datum===t.datum&&e.itemId===t.itemId);return i?[i]:void 0}getHighlightData(e,t){return t?[t]:void 0}updateHighlightSelection(e){var t;return x(this,void 0,void 0,function*(){let i,s;let{highlightSelection:n,highlightLabelSelection:r,_contextNodeData:a}=this,o=null===(t=this.ctx.highlightManager)||void 0===t?void 0:t.getActiveHighlight(),l=e&&(null==o?void 0:o.datum)?o:void 0;if(null!=l){let e=this.isLabelEnabled();for(let{labelData:t,nodeData:n}of a)if(s=this.getHighlightData(n,l),i=e?this.getHighlightLabelData(t,l):void 0,(!e||null!=i)&&null!=s)break}return this.highlightSelection=yield this.updateHighlightSelectionItem({items:s,highlightSelection:n}),this.highlightLabelSelection=yield this.updateHighlightSelectionLabel({items:i,highlightLabelSelection:r}),s})}pickNodeExactShape(e){var t;let i=super.pickNodeExactShape(e);if(i)return i;let{x:s,y:n}=e,{opts:{hasMarkers:r}}=this;for(let{dataNodeGroup:e,markerGroup:t}of this.subGroups){let i=e.pickNode(s,n);if(!i&&r&&(i=null==t?void 0:t.pickNode(s,n)),i)break}for(let i of this.moduleMap){let{datum:s}=null!==(t=i.pickNodeExact(e))&&void 0!==t?t:{};if(void 0!==s)return{datum:s,distance:0}}}pickNodeClosestDatum(e){var t,i;let s;let{x:n,y:r}=e,{axes:a,rootGroup:o,_contextNodeData:l}=this,h=a[tG.X],d=a[tG.Y],u=o.transformPoint(n,r),c=1/0;for(let e of l)for(let t of e.nodeData){let{point:{x:e=NaN,y:i=NaN}={}}=t;if(isNaN(e)||isNaN(i)||!((null==h?void 0:h.inRange(e))&&(null==d?void 0:d.inRange(i))))continue;let n=Math.max(Math.pow(u.x-e,2)+Math.pow(u.y-i,2),0);n<c&&(c=n,s=t)}for(let t of this.moduleMap){let i=t.pickNodeNearest(e);if(void 0!==i&&i.distanceSquared<c){c=i.distanceSquared,s=i.datum;break}}if(s){let e=Math.max(Math.sqrt(c)-(null!==(i=null===(t=s.point)||void 0===t?void 0:t.size)&&void 0!==i?i:0),0);return{datum:s,distance:e}}}pickNodeMainAxisFirst(e,t){var i,s;let n;let{x:r,y:a}=e,{axes:o,rootGroup:l,_contextNodeData:h}=this,d=o[tG.X],u=o[tG.Y],c=[d,u].filter(e=>e instanceof nU).map(e=>e.direction);if(t&&0===c.length)return;let[p=tG.X]=c,g=l.transformPoint(r,a),f=p===tG.X?[g.x,g.y]:[g.y,g.x],m=[1/0,1/0];for(let e of h)for(let t of e.nodeData){let{point:{x:e=NaN,y:i=NaN}={}}=t;if(isNaN(e)||isNaN(i)||!((null==d?void 0:d.inRange(e))&&(null==u?void 0:u.inRange(i))))continue;let s=p===tG.X?[e,i]:[i,e],r=!0;for(let e=0;e<s.length;e++){let t=Math.abs(s[e]-f[e]);if(t>m[e]){r=!1;break}t<m[e]&&(m[e]=t,m.fill(1/0,e+1,m.length))}r&&(n=t)}if(n){let t=Math.max(Math.pow(m[0],2)+Math.pow(m[1],2)-(null!==(s=null===(i=n.point)||void 0===i?void 0:i.size)&&void 0!==s?s:0),0);for(let i of this.moduleMap){let s=i.pickNodeMainAxisFirst(e);if(void 0!==s&&s.distanceSquared<t){n=s.datum,t=s.distanceSquared;break}}return{datum:n,distance:Math.sqrt(t)}}}onLegendItemClick(e){let{enabled:t,itemId:i,series:s,legendItemName:n}=e,r=null!=this.legendItemName&&this.legendItemName===n;(s.id===this.id||r)&&this.toggleSeriesItem(i,t)}onLegendItemDoubleClick(e){let{enabled:t,itemId:i,series:s,numVisibleItems:n,legendItemName:r}=e,a=Object.values(n).reduce((e,t)=>e+t,0),o=null!=this.legendItemName&&this.legendItemName===r;s.id===this.id||o?this.toggleSeriesItem(i,!0):t&&1===a?this.toggleSeriesItem(i,!0):this.toggleSeriesItem(i,!1)}isPathOrSelectionDirty(){return!1}getLabelData(){return[]}shouldFlipXY(){return!1}getMinRect(){let[e]=this._contextNodeData;if(e&&0!=e.nodeData.length)return new ts(0,0,e.nodeData.map(({midPoint:e})=>{var t;return null!==(t=null==e?void 0:e.x)&&void 0!==t?t:0}).sort((e,t)=>e-t).reduce((e,t,i,s)=>i>0?Math.max(e,t-s[i-1]):e,0),e.nodeData.map(({midPoint:e})=>{var t;return null!==(t=null==e?void 0:e.y)&&void 0!==t?t:0}).sort((e,t)=>e-t).reduce((e,t,i,s)=>i>0?Math.max(e,t-s[i-1]):e,0))}updateHighlightSelectionItem(e){return x(this,void 0,void 0,function*(){let{opts:{hasMarkers:t}}=this,{items:i,highlightSelection:s}=e,n=null!=i?i:[];return t?this.updateMarkerSelection({nodeData:n,markerSelection:s,seriesIdx:-1}):this.updateDatumSelection({nodeData:n,datumSelection:s,seriesIdx:-1})})}updateHighlightSelectionLabel(e){return x(this,void 0,void 0,function*(){let{items:t,highlightLabelSelection:i}=e;return this.updateLabelSelection({labelData:null!=t?t:[],labelSelection:i,seriesIdx:-1})})}updateDatumSelection(e){return x(this,void 0,void 0,function*(){return e.datumSelection})}updateDatumNodes(e){return x(this,void 0,void 0,function*(){})}updateMarkerSelection(e){return x(this,void 0,void 0,function*(){return e.markerSelection})}updateMarkerNodes(e){return x(this,void 0,void 0,function*(){})}updatePaths(e){return x(this,void 0,void 0,function*(){e.paths.forEach(e=>e.visible=!1)})}updatePathNodes(e){return x(this,void 0,void 0,function*(){let{paths:t,opacity:i,visible:s}=e;for(let e of t)e.opacity=i,e.visible=s})}resetAllAnimation(e){var t,i;let{path:s,datum:n,label:r,marker:a}=null!==(i=null===(t=this.opts)||void 0===t?void 0:t.animationResetFns)&&void 0!==i?i:{};this.ctx.animationManager.stopByAnimationGroupId(this.id),s&&e.paths.forEach(e=>{s5(e,s)}),n&&s5(e.datumSelections,n),r&&s5(e.labelSelections,r),a&&s5(e.markerSelections,a),e.contextData.some(e=>!1===e.animationValid)&&this.ctx.animationManager.skipCurrentBatch()}animateEmptyUpdateReady(e){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(e)}animateWaitingUpdateReady(e){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(e)}animateReadyHighlight(e){var t,i;let{datum:s}=null!==(i=null===(t=this.opts)||void 0===t?void 0:t.animationResetFns)&&void 0!==i?i:{};s&&s5([e],s)}animateReadyHighlightMarkers(e){var t,i;let{marker:s}=null!==(i=null===(t=this.opts)||void 0===t?void 0:t.animationResetFns)&&void 0!==i?i:{};s&&s5([e],s)}animateReadyResize(e){this.resetAllAnimation(e)}animateClearingUpdateEmpty(e){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(e)}animationTransitionClear(){this.animationState.transition("clear",this.getAnimationData())}getAnimationData(e,t){return{datumSelections:this.subGroups.map(({datumSelection:e})=>e),markerSelections:this.subGroups.filter(({markerSelection:e})=>void 0!==e).map(({markerSelection:e})=>e),labelSelections:this.subGroups.map(({labelSelection:e})=>e),annotationSelections:[...this.annotationSelections],contextData:this._contextNodeData,previousContextData:t,paths:this.subGroups.map(({paths:e})=>e),seriesRect:e}}calculateScaling(){let e={},t=t=>{let i=this.axes[t];if(i){if(i.scale instanceof nE){let{range:s,domain:n}=i.scale;e[t]={type:"log",convert:e=>i.scale.convert(e),domain:[n[0],n[1]],range:[s[0],s[1]]}}else if(i.scale instanceof iL){let{range:s}=i.scale,n=i.scale.getDomain();e[t]={type:"continuous",domain:[n[0],n[1]],range:[s[0],s[1]]}}else if(i.scale){let{domain:s}=i.scale;e[t]={type:"category",domain:s,range:s.map(e=>i.scale.convert(e))}}}};return t(tG.X),t(tG.Y),e}}v([ea(eS),b("design:type",String)],r6.prototype,"legendItemName",void 0);let r8=["top","right","bottom","left"];class r9 extends rK{constructor(e,t){super(e,t),this.paired=!0,this._lastAxisWidths={top:0,bottom:0,left:0,right:0},this._lastVisibility={crossLines:!0,series:!0}}performLayout(){let e=Object.create(null,{performLayout:{get:()=>super.performLayout}});return x(this,void 0,void 0,function*(){let t=yield e.performLayout.call(this),{animationRect:i,seriesRect:s,visibility:n,clipSeries:r}=this.updateAxes(t);this.seriesRoot.visible=n.series,this.seriesRect=s,this.animationRect=i,this.seriesRoot.translationX=Math.floor(s.x),this.seriesRoot.translationY=Math.floor(s.y);let{seriesArea:{padding:a}}=this,o=s.clone().grow({top:a.top,right:a.right,bottom:a.bottom,left:a.left});return this.hoverRect=o,this.layoutService.dispatchLayoutComplete({type:"layout-complete",chart:{width:this.scene.width,height:this.scene.height},clipSeries:r,series:{rect:s,paddedRect:o,visible:n.series,shouldFlipXY:this.shouldFlipXY()},axes:this.axes.map(e=>Object.assign({id:e.id},e.getLayoutState()))}),t})}updateAxes(e){var t;let i=Object.assign({},this._lastAxisWidths),s=Object.assign({},this._lastVisibility),n=new Set(this._axes.map(e=>e.position));for(let e of Object.keys(i))n.has(e)||delete i[e];let r=(e,t)=>!Object.keys(e).some(e=>null==i[e])&&s.crossLines===t.crossLines&&s.series===t.series&&Object.entries(i).every(([t,i])=>{let s=e[t];return null==i&&null==s||i===s}),a=e=>Object.entries(e).reduce((e,[t,i])=>(i&&Math.abs(i)===1/0&&(i=0),e[t]=null!=i?Math.ceil(i):i,e),{}),o={},l={},h=!1,d=null===(t=this.seriesRect)||void 0===t?void 0:t.clone(),u=0,c={};do{Object.assign(i,o),Object.assign(s,l);let t=this.updateAxesPass(i,e.clone(),d);if(o=a(t.axisWidths),l=t.visibility,h=t.clipSeries,d=t.seriesRect,c=t.primaryTickCounts,u++>10){T.warn("unable to find stable axis layout.");break}}while(!r(o,l));return this.axes.forEach(e=>{let{direction:t}=e,i=c[t];e.update(i)}),this.axes.forEach(t=>{if(t.setCrossLinesVisible(s.crossLines),d)switch(t.clipGrid(d.x,d.y,d.width+5,d.height+5),t.position){case"left":case"right":t.clipTickLines(e.x,d.y,e.width+5,d.height+5);break;case"top":case"bottom":t.clipTickLines(d.x,e.y,d.width+5,e.height+5)}}),this._lastAxisWidths=i,this._lastVisibility=s,{seriesRect:d,animationRect:e,visibility:s,clipSeries:h}}updateAxesPass(e,t,i){let{axes:s}=this,n={},r={},a={series:!0,crossLines:!0},o=!1,l={},h=this.applySeriesPadding(t),d=i?this.buildCrossLinePadding(e):{},u=this.buildAxisBound(h,e,d,a),c=this.buildSeriesRect(u,e);return s.forEach(t=>{var i,s;let{position:a="left"}=t,{clipSeries:d,axisThickness:p,axisOffset:g}=this.calculateAxisDimensions({axis:t,seriesRect:c,paddedBounds:h,axisWidths:e,newAxisWidths:r,primaryTickCounts:l,clipSeries:o,addInterAxisPadding:(null!==(i=n[a])&&void 0!==i?i:0)>0});n[a]=(null!==(s=n[a])&&void 0!==s?s:0)+1,o=o||d,this.positionAxis({axis:t,axisBound:u,axisOffset:g,axisThickness:p,axisWidths:e,primaryTickCounts:l,seriesRect:c})}),{clipSeries:o,seriesRect:c,axisWidths:r,visibility:a,primaryTickCounts:l}}buildCrossLinePadding(e){var t;let i={};for(let[s,n=0]of(this.axes.forEach(e=>{e.crossLines&&e.crossLines.forEach(e=>{e.calculatePadding(i)})}),Object.entries(i)))i[s]=Math.max(n-(null!==(t=e[s])&&void 0!==t?t:0),0);return i}applySeriesPadding(e){let t=e.clone(),i=this.axes.slice().reverse();return r8.forEach(e=>{let s=this.seriesArea.padding[e],n=i.find(t=>t.position===e);n?n.seriesAreaPadding=s:t.shrink(s,e)}),t}buildAxisBound(e,t,i,s){var n,r,a,o;let l=e.clone(),{top:h=0,right:d=0,bottom:u=0,left:c=0}=i,p=c+d,g=h+u,f=(null!==(n=t.left)&&void 0!==n?n:0)+(null!==(r=t.right)&&void 0!==r?r:0)+p,m=(null!==(a=t.top)&&void 0!==a?a:0)+(null!==(o=t.bottom)&&void 0!==o?o:0)+g;return l.width<=f||l.height<=m?(s.crossLines=!1,s.series=!1):(l.x+=c,l.y+=h,l.width-=p,l.height-=g),l}buildSeriesRect(e,t){let i=e.clone(),{top:s,bottom:n,left:r,right:a}=t;return i.x+=null!=r?r:0,i.y+=null!=s?s:0,i.width-=(null!=r?r:0)+(null!=a?a:0),i.height-=(null!=s?s:0)+(null!=n?n:0),i.width=Math.max(0,i.width),i.height=Math.max(0,i.height),i}clampToOutsideSeriesRect(e,t,i,s){let{x:n,y:r,width:a,height:o}=e,l=[n,r,n+a,r+o][("x"===i?0:1)+(1===s?0:2)];return(1===s?Math.min:Math.max)(t,l)}calculateAxisDimensions(e){var t,i,s,n,r;let{axis:a,seriesRect:o,paddedBounds:l,axisWidths:h,newAxisWidths:d,primaryTickCounts:u,addInterAxisPadding:c}=e,{clipSeries:p}=e,{position:g="left",direction:f}=a,m=null!==(t=d[g])&&void 0!==t?t:0;switch(g){case"top":case"bottom":a.range=[0,o.width],a.gridLength=o.height;break;case"right":case"left":a.range=a instanceof nU||a instanceof nQ?[0,o.height]:[o.height,0],a.gridLength=o.width}let y=this.zoomManager.getAxisZoom(a.id),{min:v=0,max:b=1}=null!=y?y:{};a.visibleRange=[v,b];let x=a.dataDomain.clipped||a.visibleRange[0]>0||a.visibleRange[1]<1;p||(p=x);let S=a.nice?u[f]:void 0;null!=a.thickness&&a.thickness>0?a.maxThickness=a.thickness:f===tG.Y?a.maxThickness=.3*l.width:a.maxThickness=.3*l.height;let k=a.calculateLayout(S);S=k.primaryTickCount,u[f]=null!==(i=u[f])&&void 0!==i?i:S;let D=0;if(null!=a.thickness&&a.thickness>0)D=a.thickness;else{let{bbox:e}=k;D=f===tG.X?e.height:e.width}return c&&(D+=15),D=Math.ceil(D),d[g]=(null!==(s=d[g])&&void 0!==s?s:0)+D,a.gridPadding=(null!==(n=h[g])&&void 0!==n?n:0)-(null!==(r=d[g])&&void 0!==r?r:0),{clipSeries:p,axisThickness:D,axisOffset:m,primaryTickCount:S}}positionAxis(e){var t,i,s,n;let{axis:r,axisBound:a,axisWidths:o,seriesRect:l,axisOffset:h,axisThickness:d}=e,{position:u}=r;switch(u){case"top":r.translation.x=a.x+(null!==(t=o.left)&&void 0!==t?t:0),r.translation.y=this.clampToOutsideSeriesRect(l,a.y+1+h+d,"y",1);break;case"bottom":r.translation.x=a.x+(null!==(i=o.left)&&void 0!==i?i:0),r.translation.y=this.clampToOutsideSeriesRect(l,a.y+a.height+1-d-h,"y",-1);break;case"left":r.translation.y=a.y+(null!==(s=o.top)&&void 0!==s?s:0),r.translation.x=this.clampToOutsideSeriesRect(l,a.x+h+d,"x",1);break;case"right":r.translation.y=a.y+(null!==(n=o.top)&&void 0!==n?n:0),r.translation.x=this.clampToOutsideSeriesRect(l,a.x+a.width-d-h,"x",-1)}r.updatePosition({rotation:ee(r.rotation),sideFlag:r.label.getSideFlag()})}shouldFlipXY(){return!this.series.some(e=>!(e instanceof r6&&e.shouldFlipXY()))}}r9.className="CartesianChart",r9.type="cartesian";class r7{static isInstance(e){var t;return e instanceof r7||(null===(t=e.constructor)||void 0===t?void 0:t.name)==="AgChartInstanceProxy"&&null!=e.chart||null!=e.chart&&this.validateImplementation(e)}static validateImplementation(e){var t,i;let s=Object.keys(null!==(i=null===(t=e.constructor)||void 0===t?void 0:t.prototype)&&void 0!==i?i:{});return["getOptions","destroy"].every(e=>s.includes(e))}constructor(e){this.chart=e}getOptions(){return this.chart.getOptions()}destroy(){this.chart.destroy()}}class ae extends nz{constructor(){super(...arguments),this.maxSpacing=NaN}}v([ea(ec(eI(1),ef("minSpacing"))),nB(NaN),b("design:type",Number)],ae.prototype,"maxSpacing",void 0);class at extends nH{constructor(e,t=new iR){super(e,t),this.min=NaN,this.max=NaN}normaliseDataDomain(e){let{min:t,max:i}=this,{extent:s,clipped:n}=E(e,t,i);return{domain:s,clipped:n}}formatDatum(e){return"number"==typeof e?e.toFixed(2):(T.warnOnce("data contains Date objects which are being plotted against a number axis, please only use a number axis for numbers."),String(e))}createTick(){return new ae}updateSecondaryAxisTicks(e){if(null==this.dataDomain)throw Error("AG Charts - dataDomain not calculated, cannot perform tick calculation.");if(0===this.dataDomain.domain.length)return[];let[t,i]=function(e,t){var i;let s=Math.floor(e[0]),n=e[1],r=(i=s=function(e,t,i){let s=Math.pow(10,Math.floor(Math.log10(Math.abs(t-e)/(i-1))));return Math.floor(e/s)*s}(s,n,t),function(e){let t=Math.pow(10,Math.floor(Math.log10(e))),i=e/t*10;return i>0&&i<=1?t/10:i>1&&i<=2?2*t/10:i>1&&i<=5?5*t/10:i>5&&i<=10?10*t/10:i>10&&i<=20?20*t/10:i>20&&i<=40?40*t/10:i>40&&i<=50?50*t/10:i>50&&i<=100?100*t/10:i}((n-i)/(t-1)));return n=s+(t-1)*r,[[s,n],function(e,t,i){let s=t>0&&t<1?Math.abs(Math.floor(Math.log10(t))):0,n=Math.pow(10,s),r=new iC(s);for(let s=0;s<i;s++){let i=e+t*s;r[s]=Math.round(i*n)/n}return r}(s,r,t)]}(this.dataDomain.domain,null!=e?e:0);return this.scale.nice=!1,this.scale.domain=t,this.scale.update(),i}}function ai(){return el(e=>"number"==typeof e&&0!==e,"expecting a non-zero Number")}at.className="NumberAxis",at.type="number",v([ea(ec(eI(),eg("max"))),nB(NaN),b("design:type",Number)],at.prototype,"min",void 0),v([ea(ec(eI(),ef("min"))),nB(NaN),b("design:type",Number)],at.prototype,"max",void 0);class as extends at{normaliseDataDomain(e){let{min:t,max:i}=this,{extent:s,clipped:n}=E(e,t,i),r=s[0]>s[1],a=s[0]<0&&s[1]>0,o=0===s[0]&&0===s[1];return(r||a||o)&&(e=[],a?T.warn("the data domain crosses zero, the chart data cannot be rendered. See log axis documentation for more information."):o&&T.warn("the data domain has 0 extent, no data is rendered.")),0===s[0]&&(s[0]=1),0===s[1]&&(s[1]=-1),{domain:s,clipped:n}}set base(e){this.scale.base=e}get base(){return this.scale.base}constructor(e){super(e,new nE),this.min=NaN,this.max=NaN}}as.className="LogAxis",as.type="log",v([ea(ec(eI(),eg("max"),ai())),nB(NaN),b("design:type",Number)],as.prototype,"min",void 0),v([ea(ec(eI(),ef("min"),ai())),nB(NaN),b("design:type",Number)],as.prototype,"max",void 0);class an extends nz{constructor(){super(...arguments),this.maxSpacing=NaN}}v([ea(ec(eI(1),ef("minSpacing"))),nB(NaN),b("design:type",Number)],an.prototype,"maxSpacing",void 0);class ar extends nH{constructor(e){super(e,new nL),this.datumFormat="%m/%d/%y, %H:%M:%S",this.min=void 0,this.max=void 0;let{scale:t}=this;this.refreshScale(),this.datumFormatter=t.tickFormat({specifier:this.datumFormat})}normaliseDataDomain(e){var t;let{min:i,max:s}=this,n=!1;return"number"==typeof i&&(i=new Date(i)),"number"==typeof s&&(s=new Date(s)),e.length>2&&(e=(null!==(t=N(e))&&void 0!==t?t:[0,1e3]).map(e=>new Date(e))),i instanceof Date&&(n||(n=i>e[0]),e=[i,e[1]]),s instanceof Date&&(n||(n=s<e[1]),e=[e[0],s]),e[0]>e[1]&&(e=[]),{domain:e,clipped:n}}createTick(){return new an}onLabelFormatChange(e,t){t?super.onLabelFormatChange(e,t):this.labelFormatter=this.scale.tickFormat({ticks:e})}formatDatum(e){var t;return null!==(t=this.moduleCtx.callbackCache.call(this.datumFormatter,e))&&void 0!==t?t:String(e)}calculatePadding(e,t){return[0,1]}}ar.className="TimeAxis",ar.type="time",v([ea(ec(eO,eg("max"))),b("design:type",Object)],ar.prototype,"min",void 0),v([ea(ec(eO,ef("min"))),b("design:type",Object)],ar.prototype,"max",void 0);let aa={[at.type]:at,[nU.type]:nU,[ar.type]:ar,[nQ.type]:nQ,[as.type]:as},ao={has:e=>Object.prototype.hasOwnProperty.call(aa,e),get axesTypes(){return Object.keys(aa)}},al={},ah=[{type:"root",optionsKey:"animation",chartTypes:["cartesian","polar","hierarchy"]},{type:"root",optionsKey:"background",chartTypes:["cartesian","polar","hierarchy"],optionsInnerKey:"image"},{type:"root",optionsKey:"contextMenu",chartTypes:["cartesian","polar","hierarchy"]},{type:"root",optionsKey:"zoom",chartTypes:["cartesian"]},{type:"legend",optionsKey:"gradientLegend",chartTypes:["cartesian","polar","hierarchy"],identifier:"gradient"},{type:"axis",optionsKey:"axes[]",chartTypes:["polar"],identifier:"angle-category"},{type:"axis",optionsKey:"axes[]",chartTypes:["polar"],identifier:"angle-number"},{type:"axis",optionsKey:"axes[]",chartTypes:["polar"],identifier:"radius-category"},{type:"axis",optionsKey:"axes[]",chartTypes:["polar"],identifier:"radius-number"},{type:"axis-option",optionsKey:"crosshair",chartTypes:["cartesian"]},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"box-plot"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"bullet"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"heatmap"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"nightingale"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"radar-area"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"radar-line"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"radial-bar"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"radial-column"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"range-area"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"range-bar"},{type:"series",optionsKey:"series[]",chartTypes:["hierarchy"],identifier:"sunburst"},{type:"series",optionsKey:"series[]",chartTypes:["hierarchy"],identifier:"treemap"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"waterfall"},{type:"series-option",optionsKey:"errorBar",chartTypes:["cartesian"],identifier:"error-bars"}];function ad(e){return ah.some(t=>"series"===t.type&&t.identifier===e)}function au(e){var t;return null===(t=ah.find(t=>"series"===t.type&&t.identifier===e))||void 0===t?void 0:t.chartTypes}let ac={category:"legend"},ap={};class ag extends k{constructor(e){var t;super(),this.node=new i_({name:"background",zIndex:t$.SERIES_BACKGROUND_ZINDEX}),this.rectNode=new r1,this.visible=!0,this.fill="white",this.image=void 0,this.node.appendChild(this.rectNode),null===(t=e.scene.root)||void 0===t||t.appendChild(this.node),this.destroyFns.push(()=>{var t;return null===(t=e.scene.root)||void 0===t?void 0:t.removeChild(this.node)},e.layoutService.addListener("layout-complete",e=>this.onLayoutComplete(e)))}onLayoutComplete(e){let{width:t,height:i}=e.chart;this.rectNode.width=t,this.rectNode.height=i}}v([ea(ev),tk("node","visible"),b("design:type",Boolean)],ag.prototype,"visible",void 0),v([ea(eE),tk("rectNode","fill"),b("design:type",String)],ag.prototype,"fill",void 0);let af={type:"root",optionsKey:"background",packageType:"community",chartTypes:["cartesian","polar","hierarchy"],instanceConstructor:ag};class am{set fill(e){this.rh.fill=e}get fill(){return this.rh.fill}set stroke(e){this.rh.stroke=e}get stroke(){return this.rh.stroke}set strokeWidth(e){this.rh.strokeWidth=e}get strokeWidth(){return this.rh.strokeWidth}set width(e){this.rh.width=e}get width(){return this.rh.width}set height(e){this.rh.height=e}get height(){return this.rh.height}set gripLineGap(e){this.rh.gripLineGap=e}get gripLineGap(){return this.rh.gripLineGap}set gripLineLength(e){this.rh.gripLineLength=e}get gripLineLength(){return this.rh.gripLineLength}constructor(e){this.rh=e}}class ay{set fill(e){this.rm.fill=e}get fill(){return this.rm.fill}set stroke(e){this.rm.stroke=e}get stroke(){return this.rm.stroke}set strokeWidth(e){this.rm.strokeWidth=e}get strokeWidth(){return this.rm.strokeWidth}set fillOpacity(e){this.rm.fillOpacity=e}get fillOpacity(){return this.rm.fillOpacity}constructor(e){this.rm=e}}class av extends i${constructor(){super(...arguments),this._fill="#f2f2f2",this._stroke="#999999",this._strokeWidth=1,this._lineCap="square",this._centerX=0,this._centerY=0,this._width=8,this._gripLineGap=2,this._gripLineLength=8,this._height=16}set centerX(e){this._centerX!==e&&(this._centerX=e,this.dirtyPath=!0)}get centerX(){return this._centerX}set centerY(e){this._centerY!==e&&(this._centerY=e,this.dirtyPath=!0)}get centerY(){return this._centerY}set width(e){this._width!==e&&(this._width=e,this.dirtyPath=!0)}get width(){return this._width}set gripLineGap(e){this._gripLineGap!==e&&(this._gripLineGap=e,this.dirtyPath=!0)}get gripLineGap(){return this._gripLineGap}set gripLineLength(e){this._gripLineLength!==e&&(this._gripLineLength=e,this.dirtyPath=!0)}get gripLineLength(){return this._gripLineLength}set height(e){this._height!==e&&(this._height=e,this.dirtyPath=!0)}get height(){return this._height}computeBBox(){let{centerX:e,centerY:t,width:i,height:s}=this;return new ts(e-i/2,t-s/2,i,s)}isPointInPath(e,t){let i=this.transformPoint(e,t);return this.computeBBox().containsPoint(i.x,i.y)}updatePath(){let{path:e,centerX:t,centerY:i,width:s,height:n}=this;e.clear();let r=t-s/2,a=i-n/2,o=this.align(r),l=this.align(a),h=o+this.align(r,s),d=l+this.align(a,n);e.moveTo(o,l),e.lineTo(h,l),e.lineTo(h,d),e.lineTo(o,d),e.lineTo(o,l);let u=this.gripLineGap/2,c=this.gripLineLength/2;e.moveTo(this.align(t-u),this.align(i-c)),e.lineTo(this.align(t-u),this.align(i+c)),e.moveTo(this.align(t+u),this.align(i-c)),e.lineTo(this.align(t+u),this.align(i+c))}}function ab(e,t){e!==t&&(this.dirtyPath=!0)}av.className="RangeHandle",v([ea(eN),b("design:type",Object)],av.prototype,"_fill",void 0),v([ea(eN),b("design:type",Object)],av.prototype,"_stroke",void 0),v([ea(eR(0)),b("design:type",Object)],av.prototype,"_strokeWidth",void 0),v([ea(eU),b("design:type",Object)],av.prototype,"_lineCap",void 0),v([ea(eR(0)),b("design:type",Number)],av.prototype,"_width",void 0),v([ea(eR(0)),b("design:type",Number)],av.prototype,"_gripLineGap",void 0),v([ea(eR(0)),b("design:type",Number)],av.prototype,"_gripLineLength",void 0),v([ea(eR(0)),b("design:type",Number)],av.prototype,"_height",void 0);class ax extends i${constructor(){super(...arguments),this.x=0,this.y=0,this.width=200,this.height=30,this.minRange=.05,this._min=0,this._max=1}set min(e){var t;e=es(0,e,this.max-this.minRange),this._min===e||isNaN(e)||(this._min=e,this.dirtyPath=!0,null===(t=this.onRangeChange)||void 0===t||t.call(this))}get min(){return this._min}set max(e){var t;e=es(this.min+this.minRange,e,1),this._max===e||isNaN(e)||(this._max=e,this.dirtyPath=!0,null===(t=this.onRangeChange)||void 0===t||t.call(this))}get max(){return this._max}computeBBox(){let{x:e,y:t,width:i,height:s}=this;return new ts(e,t,i,s)}computeVisibleRangeBBox(){let{x:e,y:t,width:i,height:s,min:n,max:r}=this,a=e+i*n;return new ts(a,t,e+i*r-a,s)}updatePath(){let{path:e,x:t,y:i,width:s,height:n,min:r,max:a}=this;e.clear();let o=this.align(t),l=this.align(i),h=o+this.align(t,s),d=l+this.align(i,n);e.moveTo(o,l),e.lineTo(h,l),e.lineTo(h,d),e.lineTo(o,d),e.lineTo(o,l);let u=this.align(t+s*r),c=this.align(t+s*a);e.moveTo(u,l),e.lineTo(u,d),e.lineTo(c,d),e.lineTo(c,l),e.lineTo(u,l)}}ax.className="RangeMask",v([tD({changeValue:ab}),ea(eR(0)),b("design:type",Object)],ax.prototype,"x",void 0),v([tD({changeValue:ab}),ea(eR(0)),b("design:type",Object)],ax.prototype,"y",void 0),v([tD({changeValue:ab}),ea(eR(0)),b("design:type",Object)],ax.prototype,"width",void 0),v([tD({changeValue:ab}),ea(eR(0)),b("design:type",Object)],ax.prototype,"height",void 0),v([ea(eR()),b("design:type",Number)],ax.prototype,"_min",void 0),v([ea(eR()),b("design:type",Number)],ax.prototype,"_max",void 0);class aS extends i_{set x(e){this.mask.x=e,this.updateHandles()}get x(){return this.mask.x}set y(e){this.mask.y=e,this.updateHandles()}get y(){return this.mask.y}set width(e){this.mask.width=e,this.updateHandles()}get width(){return this.mask.width}set height(e){this.mask.height=e,this.updateHandles()}get height(){return this.mask.height}set min(e){this.mask.min=e}get min(){return this.mask.min}set max(e){this.mask.max=e}get max(){return this.mask.max}constructor(){super({name:"rangeSelectorGroup"}),this.minHandle=new av,this.maxHandle=new av,this.mask=(()=>{let{x:e,y:t,width:i,height:s,min:n,max:r}=aS.defaults,a=new ax;a.x=e,a.y=t,a.width=i,a.height=s,a.min=n,a.max=r;let{minHandle:o,maxHandle:l}=this;return o.centerX=e,l.centerX=e+i,o.centerY=l.centerY=t+s/2,this.append([a,o,l]),a.onRangeChange=()=>{var e;this.updateHandles(),null===(e=this.onRangeChange)||void 0===e||e.call(this)},a})(),this._x=aS.defaults.x,this._y=aS.defaults.y,this._width=aS.defaults.width,this._height=aS.defaults.height,this._min=aS.defaults.min,this._max=aS.defaults.max,this.isContainerNode=!0}updateHandles(){let{minHandle:e,maxHandle:t,x:i,y:s,width:n,height:r,mask:a}=this;e.centerX=i+n*a.min,t.centerX=i+n*a.max,e.centerY=t.centerY=s+r/2}computeBBox(){return this.mask.computeBBox()}computeVisibleRangeBBox(){return this.mask.computeVisibleRangeBBox()}render(e){let{ctx:t,forceRender:i,stats:s}=e;if(this.dirty===tz.NONE&&!i){s&&s.nodesSkipped++;return}this.computeTransformMatrix(),this.matrix.toContext(t);let{mask:n,minHandle:r,maxHandle:a}=this;[n,r,a].forEach(s=>{s.visible&&(i||s.dirty>tz.NONE)&&(t.save(),s.render(Object.assign(Object.assign({},e),{ctx:t,forceRender:i})),t.restore())}),this.markClean({force:!0}),s&&s.nodesRendered++}}aS.className="Range",aS.defaults={x:0,y:0,width:200,height:30,min:0,max:1};class ak extends k{set width(e){this.rs.width=e}get width(){return this.rs.width}set height(e){this.rs.height=e}get height(){return this.rs.height}set min(e){this.rs.min=e}get min(){return this.rs.min}set max(e){this.rs.max=e}get max(){return this.rs.max}set visible(e){this._visible=e,this.updateGroupVisibility()}get visible(){return this._visible}updateGroupVisibility(){let e=this.enabled&&this.visible;this.rs.visible=e,e?this.ctx.zoomManager.updateZoom("navigator",{x:{min:this.rs.min,max:this.rs.max},y:{min:0,max:1}}):this.ctx.zoomManager.updateZoom("navigator")}constructor(e){var t;super(),this.ctx=e,this.rs=new aS,this.mask=new ay(this.rs.mask),this.minHandle=new am(this.rs.minHandle),this.maxHandle=new am(this.rs.maxHandle),this.minHandleDragging=!1,this.maxHandleDragging=!1,this.panHandleOffset=NaN,this.enabled=!1,this.margin=10,this._visible=!0,this.rs.onRangeChange=()=>e.zoomManager.updateZoom("navigator",{x:{min:this.rs.min,max:this.rs.max},y:{min:0,max:1}}),null===(t=e.scene.root)||void 0===t||t.appendChild(this.rs);let i={bypassPause:["animation"]};this.destroyFns.push(e.interactionManager.addListener("drag-start",e=>this.onDragStart(e),i),e.interactionManager.addListener("drag",e=>this.onDrag(e),i),e.interactionManager.addListener("hover",e=>this.onDrag(e),i),e.interactionManager.addListener("drag-end",()=>this.onDragStop(),i),e.layoutService.addListener("before-series",e=>this.layout(e)),e.layoutService.addListener("layout-complete",e=>this.layoutComplete(e)),()=>{var t;return null===(t=e.scene.root)||void 0===t?void 0:t.removeChild(this.rs)},()=>this.ctx.zoomManager.updateZoom("navigator")),this.updateGroupVisibility()}layout({shrinkRect:e}){if(this.enabled){let t=this.rs.height+this.margin;e.shrink(t,"bottom"),this.rs.y=e.y+e.height+this.margin}return{shrinkRect:e}}layoutComplete({series:{rect:e,visible:t}}){this.enabled&&t&&(this.rs.x=e.x,this.rs.width=e.width),this.visible=t}onDragStart(e){if(!this.enabled)return;let{offsetX:t,offsetY:i}=e,{rs:s}=this,{minHandle:n,maxHandle:r,x:a,width:o,min:l}=s,h=s.computeVisibleRangeBBox();!(this.minHandleDragging||this.maxHandleDragging)&&(n.containsPoint(t,i)?this.minHandleDragging=!0:r.containsPoint(t,i)?this.maxHandleDragging=!0:h.containsPoint(t,i)&&(this.panHandleOffset=(t-a)/o-l))}onDrag(e){if(!this.enabled)return;let{rs:t,panHandleOffset:i}=this,{x:s,y:n,width:r,height:a,minHandle:o,maxHandle:l}=t,{offsetX:h,offsetY:d}=e,u=s+r*t.min,c=new ts(u,n,s+r*t.max-u,a),p=()=>Math.min(Math.max((h-s)/r,0),1);if(o.containsPoint(h,d)||l.containsPoint(h,d)?this.ctx.cursorManager.updateCursor("navigator","ew-resize"):c.containsPoint(h,d)?this.ctx.cursorManager.updateCursor("navigator","grab"):this.ctx.cursorManager.updateCursor("navigator"),this.minHandleDragging)t.min=p();else if(this.maxHandleDragging)t.max=p();else if(!isNaN(i)){let e=t.max-t.min,s=Math.min(p()-i,1-e);s<=t.min?(t.min=s,t.max=t.min+e):(t.max=s+e,t.min=t.max-e)}}onDragStop(){this.stopHandleDragging()}stopHandleDragging(){this.minHandleDragging=this.maxHandleDragging=!1,this.panHandleOffset=NaN}}v([tD({changeValue(e){e&&(this.min=0,this.max=1),this.updateGroupVisibility()}}),ea(ev),b("design:type",Object)],ak.prototype,"enabled",void 0),v([ea(eR(0)),b("design:type",Object)],ak.prototype,"margin",void 0);let aD={type:"root",optionsKey:"navigator",packageType:"community",chartTypes:["cartesian"],instanceConstructor:ak,themeTemplate:{navigator:{enabled:!1,height:30,mask:{fill:"#999999",stroke:"#999999",strokeWidth:1,fillOpacity:.2},minHandle:{fill:"#f2f2f2",stroke:"#999999",strokeWidth:1,width:8,height:16,gripLineGap:2,gripLineLength:8},maxHandle:{fill:"#f2f2f2",stroke:"#999999",strokeWidth:1,width:8,height:16,gripLineGap:2,gripLineLength:8}}}},aw=({takeColors:e})=>{let{fills:[t],strokes:[i]}=e(1);return{fill:t,stroke:i}},aO=e=>{let{fill:t,stroke:i}=aw(e);return{marker:{fill:t,stroke:i}}},aM={SMALL:12,MEDIUM:13,LARGE:17},aN="normal",aE="bottom",aC={BOTTOM:aE,LEFT:"left"},aA={CATEGORY:"category",NUMBER:"number"},aL={},aR={},aT={has:e=>Object.prototype.hasOwnProperty.call(aL,e),isCartesian:e=>"cartesian"===aL[e],isPolar:e=>"polar"===aL[e],isHierarchy:e=>"hierarchy"===aL[e],get seriesTypes(){return Object.keys(aL)},get cartesianTypes(){return this.seriesTypes.filter(e=>this.isCartesian(e))},get polarTypes(){return this.seriesTypes.filter(e=>this.isPolar(e))},get hierarchyTypes(){return this.seriesTypes.filter(e=>this.isHierarchy(e))}};function aI(e){var t;return null!==(t=aR[e])&&void 0!==t?t:{}}function a_(e){var t,i,s,n;return null!==(n=null!==(t=e.type)&&void 0!==t?t:null===(s=null===(i=e.series)||void 0===i?void 0:i[0])||void 0===s?void 0:s.type)&&void 0!==n?n:"line"}function aP(e){var t;let i=a_(e);return null==i||("cartesian"===i?(T.warnOnce(`type '${i}' is deprecated, use a series type instead`),!0):aT.isCartesian(i)||"cartesian"===(null===(t=au(i))||void 0===t?void 0:t.find(e=>"cartesian"===e)))}function aB(e){var t;let i=a_(e);return null!=i&&("hierarchy"===i?(T.warnOnce(`type '${i}' is deprecated, use a series type instead`),!0):aT.isHierarchy(i)||"hierarchy"===(null===(t=au(i))||void 0===t?void 0:t.find(e=>"hierarchy"===e)))}function aF(e){var t;let i=a_(e);return null!=i&&("polar"===i?(T.warnOnce(`type '${i}' is deprecated, use a series type instead`),!0):aT.isPolar(i)||"polar"===(null===(t=au(i))||void 0===t?void 0:t.find(e=>"polar"===e)))}let aj={axes:[{type:aA.NUMBER,position:aC.LEFT},{type:aA.CATEGORY,position:aC.BOTTOM}]},aG=Symbol("extends-chart-defaults"),az=Symbol("extends-legend-defaults"),aW=Symbol("extends-legend-item-defaults"),aY=Symbol("extends-legend-item-marker-defaults"),aV=Symbol("extends-axes-defaults"),a$=Symbol("extends-axes-label-defaults"),aX=Symbol("extends-axes-line-defaults"),aH=Symbol("extends-axes-tick-defaults"),aU=Symbol("extends-axes-grid-line-defaults"),aK=Symbol("extends-series-defaults"),aq=Symbol("extends-cartesian-marker-defaults"),aZ=Symbol("override-series-label-defaults"),aJ=Symbol("default-font"),aQ=Symbol("default-label-colour"),a0=Symbol("default-inverted-label-colour"),a1=Symbol("default-inside-series-label-colour"),a2=Symbol("default-muted-label-colour"),a5=Symbol("default-axis-grid-colour"),a3=Symbol("default-axis-line-colour"),a4=Symbol("default-cross-lines-colour"),a6=Symbol("default-background-colour"),a8=Symbol("default-shadow-colour"),a9=Symbol("default-waterfall-series-positive-colors"),a7=Symbol("default-waterfall-series-negative-colors"),oe=Symbol("default-waterfall-series-total-colors"),ot=Symbol("default-waterfall-series-connector-line-stroke"),oi=Symbol("default-polar-series-stroke"),os=Symbol("default-diverging-series-colour-range"),on=Symbol("default-hierarchy-fills"),or=Symbol("default-hierarchy-strokes");function oa(e,t,i,s,n){let{defaultDuration:r}=i,{addPhaseFn:a,updatePhaseFn:o,removePhaseFn:l}=n,h=(s,n,a)=>{i.animate({id:`${e}_${t}_${n.id}_${s}`,groupId:e,from:0,to:1,ease:tC,onUpdate(e,t){t&&"removed"!==s||(n.path.clear({trackChanges:!0}),a(e,n),n.checkPathDirty())},onStop(){"added"===s&&(n.path.clear({trackChanges:!0}),a(1,n),n.checkPathDirty())},duration:tI[s].animationDuration*r,delay:tI[s].animationDelay*r})};for(let e of s)i.isSkipped()||(h("removed",e,l),h("updated",e,o)),h("added",e,a)}let oo=el(e=>rE(e)||Object.getPrototypeOf(e)===su,"expecting a marker shape keyword such as 'circle', 'diamond' or 'square' or an object extending the Marker class");class ol extends te{constructor(){super(...arguments),this.enabled=!0,this.shape=sc,this.size=6,this.fillOpacity=1,this.strokeWidth=1,this.strokeOpacity=1}getStyle(){let{size:e,fill:t,fillOpacity:i,stroke:s,strokeWidth:n,strokeOpacity:r}=this;return{size:e,fill:t,fillOpacity:i,stroke:s,strokeWidth:n,strokeOpacity:r}}getDiameter(){return this.size+this.strokeWidth}}function oh({id:e},t,i){tP(e,"markers",t,i,{scalingX:0,scalingY:0},{scalingX:1,scalingY:1}),i.forEach(e=>e.cleanup())}function od({id:e},t,i,s){t_(e,"markers",t,i,{fromFn:(e,t)=>{var i,n;return{scalingX:0,scalingY:0,animationDelay:Math.max(Math.min(tA((null!==(n=null===(i=t.midPoint)||void 0===i?void 0:i.x)&&void 0!==n?n:s)/s)-.1,1),0),animationDuration:.2}},toFn:()=>({scalingX:1,scalingY:1})})}function ou(e){return{opacity:1,scalingX:1,scalingY:1}}function oc(e,t){var i,s,n,r;return{translationX:null!==(s=null===(i=t.point)||void 0===i?void 0:i.x)&&void 0!==s?s:NaN,translationY:null!==(r=null===(n=t.point)||void 0===n?void 0:n.y)&&void 0!==r?r:NaN}}function op(e,t){let i=(t,i)=>{let s=e[i][t];return Array.isArray(s)?s[0]:s},s=t=>{let{xValue:s}=t;return e.moved[s]?{point:i(s,"moved"),status:"updated"}:e.removed[s]?{point:i(s,"removed"),status:"removed"}:e.added[s]?{point:i(s,"added"),status:"added"}:{status:"unknown"}};return{fromFn:(e,i)=>{var n,r,a,o,l,h;let{status:d,point:u}=s(i);if("unknown"===d)return{opacity:0};let c=Object.assign({translationX:null!==(r=null===(n=null==u?void 0:u.from)||void 0===n?void 0:n.x)&&void 0!==r?r:e.translationX,translationY:null!==(o=null===(a=null==u?void 0:u.from)||void 0===a?void 0:a.y)&&void 0!==o?o:e.translationY,opacity:e.opacity},tI[d]);return"added"===t?Object.assign(Object.assign(Object.assign({},c),{opacity:0,translationX:null===(l=null==u?void 0:u.to)||void 0===l?void 0:l.x,translationY:null===(h=null==u?void 0:u.to)||void 0===h?void 0:h.y}),tI.added):("added"===d&&(c.opacity=0),c)},toFn:(e,i)=>{var n,r;let{status:a,point:o}=s(i);if("unknown"===a)return{opacity:0};let l=Object.assign({translationX:i.point.x,translationY:i.point.y,opacity:1},tI[a]);return"removed"===a||"removed"===t?Object.assign(Object.assign(Object.assign({},l),{translationX:null===(n=null==o?void 0:o.to)||void 0===n?void 0:n.x,translationY:null===(r=null==o?void 0:o.to)||void 0===r?void 0:r.y,opacity:0}),tI.removed):l}}}function og(e){return e.reduce(({min:e,max:t},i)=>((null==e||e.point.x>i.point.x)&&(e=i),(null==t||t.point.x<i.point.x)&&(t=i),{min:e,max:t}),{})}function of(e,t,i){let s=(t.y-e.y)/(t.x-e.x),n=(i-e.x)*s+e.y;return{x:i,y:n}}function om(e,t,i,s){let n=-1,r=0,a=[];for(;r<e.length;){if(e[r].change===t){a.push(e[r]),r++;continue}if(e[r].change===i){r++;continue}a.length>0&&(s(a,n,r),a.length=0),n=r,r++}a.length>0&&s(a,n,r)}function oy(e,t){om(e,"out","in",(i,s,n)=>{var r,a;-1===s&&e[n]?i.forEach(t=>t.to=e[n].from):n===e.length&&e[s]?i.forEach(t=>t.to=e[s].from):"intersect"===t&&(null===(r=e[s])||void 0===r?void 0:r.from)&&(null===(a=e[n])||void 0===a?void 0:a.from)?i.forEach(t=>t.to=of(e[s].from,e[n].from,t.from.x)):i.forEach(e=>e.to=e.from)}),om(e,"in","out",(i,s,n)=>{var r,a;-1===s&&e[n]?i.forEach(t=>t.from=e[n].to):n===e.length&&e[s]?i.forEach(t=>t.from=e[s].to):"intersect"===t&&(null===(r=e[s])||void 0===r?void 0:r.to)&&(null===(a=e[n])||void 0===a?void 0:a.to)?i.forEach(t=>t.from=of(e[s].to,e[n].to,t.to.x)):i.forEach(e=>e.from=e.to)})}function ov(e,t,i){let s=isNaN(e.x)?t.x:e.x,n=isNaN(e.y)?t.y:e.y,r=t.x-e.x,a=t.y-e.y;return{x:s+(isNaN(r)?0:r*i),y:n+(isNaN(a)?0:a*i)}}function ob(e,t,i){let s;let{path:n}=i;for(let i of e){let e=t[i.change];if(null==e)continue;let{from:r,to:a}=i;if(null==r||null==a)continue;let{x:o,y:l}=ov(r,a,e);if(!1===i.moveTo)n.lineTo(o,l);else if(!0!==i.moveTo&&s){if(s){let{x:t,y:r}=ov(s,{x:o,y:l},"in"===i.moveTo?e:1-e);n.lineTo(t,r),n.moveTo(o,l)}}else n.moveTo(o,l);s={x:o,y:l}}}function ox({id:e},t,i){tP(e,"path_properties",t,i,{clipScalingX:0},{clipScalingX:1},{start:{clipMode:"normal"},finish:{clipMode:void 0}})}function oS(e){return t=>({opacity:e.getOpacity(),clipScalingX:1,clipMode:void 0})}function ok(e,t){if(!t)return NaN;if(e instanceof Date&&(e=e.getTime()),"continuous"===t.type&&"number"==typeof e)return(e-t.domain[0])/(t.domain[1]-t.domain[0])*(t.range[1]-t.range[0])+t.range[0];if("log"===t.type&&"number"==typeof e)return t.convert(e);let i=t.domain.findIndex(t=>t===e);return i>=0?t.range[i]:NaN}function oD(e=!1,t=!1){return e===t?!!e:e?"in":"out"}function ow(e,t,i={}){var s,n,r,a;let{backfillSplitMode:o="intersect"}=i,l=t=>{var i,s;return{x:ok(null!==(i=t.xValue)&&void 0!==i?i:NaN,e.scales.x),y:ok(null!==(s=t.yValue)&&void 0!==s?s:NaN,e.scales.y)}},h=e=>{var i,s;return{x:ok(null!==(i=e.xValue)&&void 0!==i?i:NaN,t.scales.x),y:ok(null!==(s=e.yValue)&&void 0!==s?s:NaN,t.scales.y)}},d=[],u={added:{},moved:{},removed:{}},c=(e,t,i,s="move")=>{e&&(isNaN(e.point.x)||isNaN(e.point.y))&&(e=t);let n={from:null==e?void 0:e.point,to:null==t?void 0:t.point,moveTo:oD(null==e?void 0:e.point.moveTo,null==t?void 0:t.point.moveTo),change:s};"move"===s?(u.moved[i]=n,y++,v++):"in"===s?(u.added[i]=n,v++):"out"===s&&(u.removed[i]=n,y++),d.push(n)},{min:p,max:g}=og(t.nodeData),{min:f,max:m}=og(e.nodeData),y=0,v=0;for(;y<t.nodeData.length||v<e.nodeData.length;){let i=t.nodeData[y],o=e.nodeData[v],d=i?l(i):void 0,u=o?h(o):void 0,b=void 0;if(d&&function(e,t){let i=Number(e),s=Number(t);return isNaN(i)||isNaN(s)?e===t:.25>Math.abs(s-i)}(d.x,null==o?void 0:o.point.x))c(i,o,o.xValue,"move");else if(d&&d.x<(null!==(s=null==f?void 0:f.point.x)&&void 0!==s?s:-1/0))c(i,b,i.xValue,"out");else if(d&&d.x>(null!==(n=null==m?void 0:m.point.x)&&void 0!==n?n:1/0))c(i,b,i.xValue,"out");else if(u&&u.x<(null!==(r=null==p?void 0:p.point.x)&&void 0!==r?r:-1/0))c(b,o,o.xValue,"in");else if(u&&u.x>(null!==(a=null==g?void 0:g.point.x)&&void 0!==a?a:1/0))c(b,o,o.xValue,"in");else if(d&&d.x<(null==o?void 0:o.point.x))c(i,b,i.xValue,"out");else if(u&&u.x<(null==i?void 0:i.point.x))c(b,o,o.xValue,"in");else if(i)c(i,b,i.xValue,"out");else if(o)c(b,o,o.xValue,"in");else throw Error("Unable to process points")}return oy(d,o),{result:d,resultMap:u}}function oO(e,t,i,s={}){var n,r,a;let o,l;let{backfillSplitMode:h="intersect",multiDatum:d=!1}=s,u=[],c={added:{},moved:{},removed:{}},p={added:{},moved:{},removed:{}},g=(e,t)=>{var i,s;let n="move"===t.change?"moved":"in"===t.change?"added":"removed";d?(null!==(i=(s=p[n])[e])&&void 0!==i||(s[e]=[]),p[n][e].push(t)):c[n][e]=t,o=t,l=e},f=0,m=0,y=!1;for(;f<t.nodeData.length||m<e.nodeData.length;){let s;let h=t.nodeData[f],c=e.nodeData[m];if((null==h?void 0:h.xValue)===(null==c?void 0:c.xValue))s={change:"move",moveTo:oD(null!==(n=h.point.moveTo)&&void 0!==n&&n,c.point.moveTo),from:h.point,to:c.point},g(h.xValue,s),f++,m++;else if(i.removed.indexOf(null==h?void 0:h.xValue)>=0)s={change:"out",moveTo:null!==(r=h.point.moveTo)&&void 0!==r&&r,from:h.point},g(h.xValue,s),f++;else if(i.added.indexOf(null==c?void 0:c.xValue)>=0)s={change:"in",moveTo:null!==(a=c.point.moveTo)&&void 0!==a&&a,to:c.point},g(c.xValue,s),m++;else if(d&&o&&l===(null==h?void 0:h.xValue))s=Object.assign({},o),g(h.xValue,s),f++;else if(d&&o&&l===(null==c?void 0:c.xValue))s=Object.assign({},o),g(c.xValue,s),m++;else{y=!0;break}u.push(s)}let v=-1/0;return(y||(y=u.some(e=>{let{change:t,to:{x:i=-1/0}={}}=e;if("out"===t)return;let s=i<v;return v=i,s})),y)?{result:void 0,resultMap:void 0}:(oy(u,h),d)?{result:u,resultMap:p}:{result:u,resultMap:c}}function oM(e,t,i,s,n){let r;let a=(r="updated",!t.visible&&e.visible?r="added":t.visible&&!e.visible&&(r="removed"),r),o=function(e,t){let i="none"===t?"updated":e,s={fromFn:t=>Object.assign(Object.assign({},tI[i]),"removed"===e?{finish:{visible:!1}}:"added"===e?{start:{visible:!0}}:{}),toFn:e=>Object.assign({},tI[i])};return"fade"===t?{fromFn:t=>Object.assign({opacity:"added"===e?0:t.opacity},s.fromFn(t)),toFn:t=>Object.assign({opacity:"removed"===e?0:1},s.toFn(t))}:s}(a,s);return{status:a,path:{addPhaseFn:(e,t)=>{n(i,{move:1,in:e},t)},updatePhaseFn:(e,t)=>{n(i,{move:e},t)},removePhaseFn:(e,t)=>{n(i,{move:0,out:e},t)}},pathProperties:o}}function oN(e){let{points:t}=e.fillData;return{top:t.slice(0,t.length/2),bottom:t.slice(t.length/2).reverse()}}function oE(e,t,i){return{scales:t.scales,nodeData:i[e],visible:t.visible}}v([ea(ev),e7({redraw:tz.MAJOR}),b("design:type",Object)],ol.prototype,"enabled",void 0),v([ea(oo),e7({redraw:tz.MAJOR}),b("design:type",Object)],ol.prototype,"shape",void 0),v([ea(eR(0)),e7({redraw:tz.MAJOR}),b("design:type",Number)],ol.prototype,"size",void 0),v([ea(eE),e7({redraw:tz.MAJOR}),b("design:type",String)],ol.prototype,"fill",void 0),v([ea(eT(0,1)),e7({redraw:tz.MAJOR}),b("design:type",Number)],ol.prototype,"fillOpacity",void 0),v([ea(eE),e7({redraw:tz.MAJOR}),b("design:type",String)],ol.prototype,"stroke",void 0),v([ea(eT(0)),e7({redraw:tz.MAJOR}),b("design:type",Number)],ol.prototype,"strokeWidth",void 0),v([ea(eT(0,1)),e7({redraw:tz.MAJOR}),b("design:type",Number)],ol.prototype,"strokeOpacity",void 0),v([ea(ey),e7({redraw:tz.MAJOR}),b("design:type",Function)],ol.prototype,"formatter",void 0),(io=t1||(t1={}))[io.Fill=0]="Fill",io[io.Stroke=1]="Stroke",io[io.Marker=2]="Marker",io[io.Label=3]="Label";class oC extends r6{constructor(e){super({moduleCtx:e,pathsPerSeries:2,pathsZIndexSubOrderOffset:[0,1e3],hasMarkers:!0,markerSelectionGarbageCollection:!1,pickModes:[tX.NEAREST_BY_MAIN_AXIS_FIRST,tX.EXACT_SHAPE_MATCH],animationResetFns:{path:oS({getOpacity:()=>this.getOpacity()}),label:s_,marker:(e,t)=>Object.assign(Object.assign({},ou()),oc(e,t))}}),this.tooltip=new s0,this.marker=new ol,this.label=new sl,this.fill="#c16068",this.stroke="#874349",this.fillOpacity=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.xKey=void 0,this.xName=void 0,this.strokeWidth=2,this.shadow=void 0}processData(e){return x(this,void 0,void 0,function*(){let{xKey:t,yKey:i,normalizedTo:s,data:n,visible:r,seriesGrouping:{groupIndex:a=this.id}={}}=this;if(null==t||null==i||null==n)return;let o=!this.ctx.animationManager.isSkipped(),{isContinuousX:l,isContinuousY:h}=this.isContinuous(),d=[`area-stack-${a}-yValues`,`area-stack-${a}-yValues-trailing`,`area-stack-${a}-yValues-prev`,`area-stack-${a}-yValues-trailing-prev`,`area-stack-${a}-yValues-marker`],u=[],c=s&&isFinite(s)?s:void 0;c&&(u.push(se(this,[d[0],d[1],d[4]],c,"range")),u.push(se(this,[d[2],d[3]],c,"range"))),!l&&o&&this.processedData&&u.push(sa(this.processedData)),o&&u.push(ss(this));let p={invalidValue:null};r||(p.forceValue=0),yield this.requestDataModel(e,n,{props:[sw(this,t,l,{id:"xValue"}),sO(this,i,h,Object.assign({id:"yValueRaw"},p)),...sM(this,i,h,"window","current",Object.assign(Object.assign({id:"yValueEnd"},p),{groupId:d[0]})),...sM(this,i,h,"window-trailing","current",Object.assign(Object.assign({id:"yValueStart"},p),{groupId:d[1]})),...sM(this,i,h,"window","last",Object.assign(Object.assign({id:"yValuePreviousEnd"},p),{groupId:d[2]})),...sM(this,i,h,"window-trailing","last",Object.assign(Object.assign({id:"yValuePreviousStart"},p),{groupId:d[3]})),...sM(this,i,h,"normal","current",Object.assign(Object.assign({id:"yValueCumulative"},p),{groupId:d[4]})),...u],groupByKeys:!0}),this.animationState.transition("updateData")})}getSeriesDomain(e){let{processedData:t,dataModel:i,axes:s}=this;if(!t||!i)return[];let n=s[tG.X],r=s[tG.Y],a=i.resolveProcessedDataDefById(this,"xValue"),o=i.getDomain(this,"xValue","key",t),l=i.getDomain(this,"yValueEnd","value",t);return e===tG.X?(null==a?void 0:a.def.type)==="key"&&"category"===a.def.valueType?o:re(N(o),n):r instanceof as||r instanceof ar?re(l,r):re([l[0]>0?0:l[0],l[1]<0?0:l[1]],r)}createNodeData(){var e;let t=Object.create(null,{calculateScaling:{get:()=>super.calculateScaling}});return x(this,void 0,void 0,function*(){let i;let{axes:s,data:n,processedData:{data:r}={},dataModel:a}=this,o=s[tG.X],l=s[tG.Y];if(!o||!l||!n||!a)return[];let{yKey:h="",xKey:d="",marker:u,label:c,fill:p,stroke:g}=this,{scale:f}=o,{scale:m}=l,v=iL.is(m),b=(null!==(e=f.bandwidth)&&void 0!==e?e:0)/2,x=a.resolveProcessedDataDefsByIds(this,["yValueStart","yValueEnd","yValueRaw","yValuePreviousStart","yValuePreviousEnd","yValueCumulative"]),S=e=>{let{point:t}=e;return Object.assign(Object.assign({},y(e,["point"])),{point:Object.assign(Object.assign({},t),{moveTo:!0})})},k=(e,t,i)=>{let s=f.convert(e)+b,n=m.convert(t);return[{point:{x:s,y:m.convert(i)},yValue:i,xValue:e},{point:{x:s,y:n},yValue:t,xValue:e}]},D=(e,t,i)=>{let s;let n=this.normalizedTo&&isFinite(this.normalizedTo),r=n&&v&&i2(i);return(n||isNaN(i))&&!r||(s=t),{x:f.convert(e)+b,y:m.convert(s),size:u.size}},w=[],O=[],M={itemId:h,fillData:{itemId:h,points:[]},strokeData:{itemId:h,points:[]},labelData:w,nodeData:O,scales:t.calculateScaling.call(this),visible:this.visible},N=M.fillData.points,E=[],C=M.strokeData.points,A=-1,L=-1/0;return null==r||r.forEach(e=>{let{keys:t,keys:[s],datum:n,values:r}=e;r.forEach((e,r)=>{var o,l,f;A++;let m=n[r],y=a.resolveProcessedDataDefsValues(x,{keys:t,values:e}),{yValueRaw:v,yValueCumulative:b}=y,{yValueStart:M,yValueEnd:R,yValuePreviousStart:T,yValuePreviousEnd:I}=y,_=null!=v,P=D(s,+b,v);if(_&&u&&O.push({index:A,series:this,itemId:h,datum:m,midPoint:{x:P.x,y:P.y},cumulativeValue:R,yValue:v,xValue:s,yKey:h,xKey:d,point:P,fill:null!==(o=u.fill)&&void 0!==o?o:p,stroke:null!==(l=u.stroke)&&void 0!==l?l:g,strokeWidth:null!==(f=u.strokeWidth)&&void 0!==f?f:this.getStrokeWidth(this.strokeWidth)}),_&&c){let e=this.getLabelText(c,{value:v,datum:m,xKey:d,yKey:h,xName:this.xName,yName:this.yName},e=>i3(e)?e.toFixed(2):String(e));w.push({index:A,series:this,itemId:h,datum:m,x:P.x,y:P.y,label:e?{text:e,fontStyle:c.fontStyle,fontWeight:c.fontWeight,fontSize:c.fontSize,fontFamily:c.fontFamily,textAlign:"center",textBaseline:"bottom",fill:c.color}:void 0})}(null==L||null==v)&&(R=null!=(M=null!=M?M:0)?M:0,I=null!=(T=null!=T?T:0)?T:0);let[B,F]=k(i,T,I),[j,G]=k(s,M,R);null!=i&&null!=s&&(N.push(B),E.push(F),N.push(j),E.push(G)),_&&null!=L&&A>0&&(C.push(S(B)),C.push(j)),i=s,L=v})}),C.length>0&&(C[0]=S(C[0])),E.reverse(),N.push(...E),[M]})}isPathOrSelectionDirty(){return this.marker.isDirty()}markerFactory(){let{shape:e}=this.marker;return new(rC(e))}updatePathNodes(e){return x(this,void 0,void 0,function*(){let{opacity:t,visible:i,animationEnabled:s}=e,[n,r]=e.paths,{seriesRectHeight:a,seriesRectWidth:o}=this.nodeDataDependencies,l=this.getStrokeWidth(this.strokeWidth);r.setProperties({tag:t1.Stroke,fill:void 0,lineJoin:r.lineCap="round",pointerEvents:tW.None,stroke:this.stroke,strokeWidth:l,strokeOpacity:this.strokeOpacity,lineDash:this.lineDash,lineDashOffset:this.lineDashOffset,opacity:t,visible:i}),n.setProperties({tag:t1.Fill,stroke:void 0,lineJoin:"round",pointerEvents:tW.None,fill:this.fill,fillOpacity:this.fillOpacity,lineDash:this.lineDash,lineDashOffset:this.lineDashOffset,strokeOpacity:this.strokeOpacity,fillShadow:this.shadow,opacity:t,visible:i||s,strokeWidth:l});let h=e=>{var t,i;null==e.clipPath&&(e.clipPath=new iY,e.clipScalingX=1,e.clipScalingY=1),null===(t=e.clipPath)||void 0===t||t.clear({trackChanges:!0}),null===(i=e.clipPath)||void 0===i||i.rect(-25,-25,(null!=o?o:0)+50,(null!=a?a:0)+50)};h(r),h(n)})}updatePaths(e){return x(this,void 0,void 0,function*(){this.updateAreaPaths([e.paths],[e.contextData])})}updateAreaPaths(e,t){this.updateFillPath(e,t),this.updateStrokePath(e,t)}updateFillPath(e,t){t.forEach(({fillData:t},i)=>{let[s]=e[i],{path:n}=s;for(let{point:e}of(n.clear({trackChanges:!0}),t.points))e.moveTo?n.moveTo(e.x,e.y):n.lineTo(e.x,e.y);n.closePath(),s.checkPathDirty()})}updateStrokePath(e,t){t.forEach(({strokeData:t},i)=>{let[,s]=e[i],{path:n}=s;for(let{point:e}of(n.clear({trackChanges:!0}),t.points))e.moveTo?n.moveTo(e.x,e.y):n.lineTo(e.x,e.y);s.checkPathDirty()})}updateMarkerSelection(e){return x(this,void 0,void 0,function*(){let{nodeData:t,markerSelection:i}=e,{marker:{enabled:s}}=this;return this.marker.isDirty()&&(i.clear(),i.cleanup()),i.update(s&&t?t:[])})}updateMarkerNodes(e){return x(this,void 0,void 0,function*(){let{markerSelection:t,isHighlight:i}=e,{xKey:s="",yKey:n="",marker:r,fill:a,stroke:o,strokeWidth:l,fillOpacity:h,strokeOpacity:d}=this,u=iZ(i&&this.highlightStyle.item,r.getStyle(),{fill:a,stroke:o,strokeWidth:l,fillOpacity:h,strokeOpacity:d});t.each((e,t)=>{this.updateMarkerStyle(e,r,{datum:t,highlighted:i,xKey:s,yKey:n},u)}),i||this.marker.markClean()})}updateLabelSelection(e){return x(this,void 0,void 0,function*(){let{labelData:t,labelSelection:i}=e;return i.update(t,e=>{e.tag=t1.Label})})}updateLabelNodes(e){return x(this,void 0,void 0,function*(){let{labelSelection:t}=e,{enabled:i,fontStyle:s,fontWeight:n,fontSize:r,fontFamily:a,color:o}=this.label;t.each((e,t)=>{let{x:l,y:h,label:d}=t;d&&i&&this.visible?(e.fontStyle=s,e.fontWeight=n,e.fontSize=r,e.fontFamily=a,e.textAlign=d.textAlign,e.textBaseline=d.textBaseline,e.text=d.text,e.x=l,e.y=h-10,e.fill=o,e.visible=!0):e.visible=!1})})}getTooltipHtml(e){let{xKey:t,id:i,axes:s,xName:n,yName:r,tooltip:a,marker:o,dataModel:l}=this,{yKey:h,xValue:d,yValue:u,datum:c}=e,p=s[tG.X],g=s[tG.Y];if(!(t&&h)||!(p&&g&&i3(u))||!l)return"";let f=p.formatDatum(d),m=g.formatDatum(u),y=iQ(r),v=iQ(f+": "+m),b=iZ({fill:this.fill},o.getStyle(),{stroke:this.stroke,strokeWidth:this.strokeWidth}),{fill:x}=this.getMarkerStyle(o,{datum:e,xKey:t,yKey:h,highlighted:!1},b);return a.toTooltipHtml({title:y,content:v,backgroundColor:x},{datum:c,xKey:t,xName:n,yKey:h,yName:r,color:x,title:y,seriesId:i})}getLegendData(e){var t,i,s,n,r;let{data:a,id:o,xKey:l,yKey:h,yName:d,marker:u,fill:c,stroke:p,fillOpacity:g,strokeOpacity:f,visible:m}=this;return(null==a?void 0:a.length)&&l&&h&&"category"===e?[{legendType:e,id:o,itemId:h,seriesId:o,enabled:m,label:{text:null!=d?d:h},marker:{shape:u.shape,fill:null!==(t=u.fill)&&void 0!==t?t:c,stroke:null!==(i=u.stroke)&&void 0!==i?i:p,fillOpacity:null!==(s=u.fillOpacity)&&void 0!==s?s:g,strokeOpacity:null!==(n=u.strokeOpacity)&&void 0!==n?n:f,strokeWidth:null!==(r=u.strokeWidth)&&void 0!==r?r:0}}]:[]}animateEmptyUpdateReady(e){let{markerSelections:t,labelSelections:i,contextData:s,paths:n}=e,{animationManager:r}=this.ctx,{seriesRectWidth:a=0}=this.nodeDataDependencies;this.updateAreaPaths(n,s),ox(this,r,n.flat()),s5(t,oc),od(this,r,t,a),sT(this,"labels",r,i)}animateReadyResize(e){let{contextData:t,paths:i}=e;this.updateAreaPaths(i,t),super.animateReadyResize(e)}animateWaitingUpdateReady(e){var t,i;let{animationManager:s}=this.ctx,{markerSelections:n,labelSelections:r,contextData:a,paths:o,previousContextData:l}=e;if(super.resetAllAnimation(e),0===a.length||!l||0===l.length){s.skipCurrentBatch(),this.updateAreaPaths(o,a);return}let[[h,d]]=o,[u]=a,[c]=l,p=function(e,t,i){var s;let n=(null===(s=e.scales.x)||void 0===s?void 0:s.type)==="category",r="updated";t.visible&&!e.visible?r="removed":!t.visible&&e.visible&&(r="added");let{resultMap:a}=n&&i?oO(e,t,i,{backfillSplitMode:"static",multiDatum:!0}):ow(e,t,{backfillSplitMode:"static"}),{top:o,bottom:l}=n&&i?function(e,t,i){let s=oN(t),n=oN(e),r={multiDatum:!0};return{top:oO(oE("top",e,n),oE("top",t,s),i,r),bottom:oO(oE("bottom",e,n),oE("bottom",t,s),i,r)}}(e,t,i):function(e,t){let i=oN(t),s=oN(e);return{top:ow(oE("top",e,s),oE("top",t,i)),bottom:ow(oE("bottom",e,s),oE("bottom",t,i))}}(e,t);if(void 0!==a&&void 0!==o.result&&void 0!==l.result)return{fill:oM(e,t,[...o.result,...l.result.reverse()],"none",ob),marker:op(a,r)}}(u,c,null===(i=null===(t=this.processedData)||void 0===t?void 0:t.reduced)||void 0===i?void 0:i.diff);if(void 0===p){s.skipCurrentBatch(),this.updateAreaPaths(o,a);return}t_(this.id,"marker_update",s,n,p.marker),t_(this.id,"fill_path_properties",s,[h],p.fill.pathProperties),oa(this.id,"fill_path_update",s,[h],p.fill.path),this.updateStrokePath(o,a),function({id:e},t,i,s){tP(e,t,i,s,{opacity:0},{opacity:1},tL)}(this,"stroke",s,[d]),sT(this,"labels",s,r)}isLabelEnabled(){return this.label.enabled}nodeFactory(){return new i_}}oC.className="AreaSeries",oC.type="area",v([ea(eN),b("design:type",String)],oC.prototype,"fill",void 0),v([ea(eN),b("design:type",String)],oC.prototype,"stroke",void 0),v([ea(eR(0,1)),b("design:type",Object)],oC.prototype,"fillOpacity",void 0),v([ea(eR(0,1)),b("design:type",Object)],oC.prototype,"strokeOpacity",void 0),v([ea(eX),b("design:type",Array)],oC.prototype,"lineDash",void 0),v([ea(eR(0)),b("design:type",Number)],oC.prototype,"lineDashOffset",void 0),v([ea(eS),b("design:type",String)],oC.prototype,"xKey",void 0),v([ea(eS),b("design:type",String)],oC.prototype,"xName",void 0),v([ea(eS),b("design:type",String)],oC.prototype,"yKey",void 0),v([ea(eS),b("design:type",String)],oC.prototype,"yName",void 0),v([ea(eT(0)),b("design:type",Number)],oC.prototype,"normalizedTo",void 0),v([ea(eR(0)),b("design:type",Object)],oC.prototype,"strokeWidth",void 0);let oA={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"area",instanceConstructor:oC,stackable:!0,seriesDefaults:aj,themeTemplate:{__extends__:aK,nodeClickRange:"nearest",tooltip:{position:{type:"node"}},fillOpacity:.8,strokeOpacity:1,strokeWidth:0,lineDash:[0],lineDashOffset:0,shadow:{enabled:!1,color:a8,xOffset:3,yOffset:3,blur:5},marker:{__extends__:aq,enabled:!1,fillOpacity:1,strokeOpacity:1,strokeWidth:0},label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:aJ,color:aQ,formatter:void 0}},paletteFactory:e=>{let{marker:t}=aO(e);return{fill:t.fill,stroke:t.stroke,marker:t}}};class oL extends r6{constructor(){super(...arguments),this.direction="vertical"}getBandScalePadding(){return{inner:.2,outer:.1}}shouldFlipXY(){return"horizontal"===this.direction}getBarDirection(){return this.shouldFlipXY()?tG.X:tG.Y}getCategoryDirection(){return this.shouldFlipXY()?tG.Y:tG.X}getValueAxis(){let e=this.getBarDirection();return this.axes[e]}getCategoryAxis(){let e=this.getCategoryDirection();return this.axes[e]}}function oR(e,t){let{startingX:i,startingY:s}=function(e,t){let i=t[e?tG.Y:tG.X],s=1/0,n=0;return i&&(e?n=i.scale.convert(iL.is(i.scale)?0:Math.max(...i.range)):s=i.scale.convert(iL.is(i.scale)?0:Math.min(...i.range))),{startingX:s,startingY:n}}(e,t),n=e=>{var t;return en(null!==(t=e.yValue)&&void 0!==t?t:0)};return{isVertical:e,calculate:(t,r)=>{let a=e?t.x:i,o=e?s:t.y,l=e?t.width:0,h=e?0:t.height;return r&&(isNaN(a)||isNaN(o))&&({x:a,y:o}=r,l=e?r.width:0,h=e?0:r.height,e&&!n(r)?o+=r.height:!e&&n(r)&&(a+=r.width)),{x:a,y:o,width:l,height:h}}}}function oT(e){let t=e=>null==e||isNaN(e.x)||isNaN(e.y);return{toFn:(i,s,n)=>"removed"===n||t(s)?e.calculate(s,i.previousDatum):{x:s.x,y:s.y,width:s.width,height:s.height},fromFn:(i,s,n)=>{"updated"===n&&t(s)?n="removed":"updated"===n&&t(i.previousDatum)&&(n="added");let r={x:i.x,y:i.y,width:i.width,height:i.height};return("unknown"===n||"added"===n)&&(r=e.calculate(s,i.previousDatum)),Object.assign(Object.assign({},r),tI[n])}}}function oI(e,{x:t,y:i,width:s,height:n}){return{x:t,y:i,width:s,height:n}}v([ea(e8),b("design:type",String)],oL.prototype,"direction",void 0),(il=t2||(t2={}))[il.Bar=0]="Bar",il[il.Label=1]="Label";class o_ extends sl{constructor(){super(...arguments),this.placement="inside"}}v([ea(eF("inside","outside")),b("design:type",String)],o_.prototype,"placement",void 0);class oP extends oL{constructor(e){super({moduleCtx:e,pickModes:[tX.EXACT_SHAPE_MATCH],pathsPerSeries:0,hasHighlightedLabels:!0,datumSelectionGarbageCollection:!1,animationResetFns:{datum:oI,label:s_}}),this.label=new o_,this.tooltip=new s0,this.fill="#c16068",this.stroke="#874349",this.fillOpacity=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.formatter=void 0,this.xKey=void 0,this.xName=void 0,this.yKey=void 0,this.yName=void 0,this.stackGroup=void 0,this.strokeWidth=1,this.shadow=void 0,this.groupScale=new ei,this.smallestDataInterval=void 0}resolveKeyDirection(e){return this.getBarDirection()===tG.X?e===tG.X?tG.Y:tG.X:e}processData(e){var t,i,s,n;return x(this,void 0,void 0,function*(){let{xKey:r,yKey:a,normalizedTo:o,seriesGrouping:{groupIndex:l=this.id}={},data:h=[]}=this;if(null==r||null==a||null==h)return;let d=!this.ctx.animationManager.isSkipped(),u=Math.abs(null!=o?o:NaN),c=iL.is(null===(t=this.getCategoryAxis())||void 0===t?void 0:t.scale),p=iL.is(null===(i=this.getValueAxis())||void 0===i?void 0:i.scale),g=`bar-stack-${l}-yValues`,f=`${g}-trailing`,m=u&&isFinite(u)?u:void 0,y=[];m&&y.push(se(this,[g,f],m,"range")),d&&this.processedData&&y.push(sa(this.processedData)),d&&y.push(ss(this));let v=this.visible?{}:{forceValue:0},{processedData:b}=yield this.requestDataModel(e,h,{props:[sw(this,r,c,{id:"xValue"}),sO(this,a,p,Object.assign({id:"yValue-raw",invalidValue:null},v)),...sM(this,a,p,"normal","current",Object.assign({id:"yValue-end",invalidValue:null,missingValue:0,groupId:g,separateNegative:!0},v)),...sM(this,a,p,"trailing","current",Object.assign({id:"yValue-start",invalidValue:null,missingValue:0,groupId:f,separateNegative:!0},v)),...c?[i8]:[],...y],groupByKeys:!0});this.smallestDataInterval={x:null!==(n=null===(s=b.reduced)||void 0===s?void 0:s.smallestKeyInterval)&&void 0!==n?n:1/0,y:1/0},this.animationState.transition("updateData")})}getSeriesDomain(e){var t;let{processedData:i,dataModel:s}=this;if(!i||!s)return[];let{reduced:{[i8.property]:n}={}}=i,r=this.getCategoryAxis(),a=this.getValueAxis(),o=s.resolveProcessedDataDefById(this,"xValue"),l=s.getDomain(this,"xValue","key",i),h=s.getDomain(this,"yValue-end","value",i);if(e===this.getCategoryDirection()){if((null==o?void 0:o.def.type)==="key"&&(null==o?void 0:o.def.valueType)==="category")return l;let i=null!=n&&isFinite(n)?n:0,s=null!==(t=N(l))&&void 0!==t?t:[NaN,NaN];return e===tG.Y?re([s[0]+-i,s[1]],r):re([s[0],s[1]+i],r)}return this.getValueAxis() instanceof as?re(h,a):re([h[0]>0?0:h[0],h[1]<0?0:h[1]],a)}createNodeData(){let e=Object.create(null,{calculateScaling:{get:()=>super.calculateScaling}});return x(this,void 0,void 0,function*(){let{dataModel:t}=this,i=this.getCategoryAxis(),s=this.getValueAxis();if(!(t&&i&&s))return[];let n=i.scale,r=s.scale,{groupScale:a,yKey:o="",xKey:l="",fill:h,stroke:d,strokeWidth:u,label:c,processedData:p,ctx:{seriesStateManager:g},smallestDataInterval:f}=this,m=iL.is(n)?n.calcBandwidth(null==f?void 0:f.x):n.bandwidth,y=[],{index:v,visibleGroupCount:b}=g.getVisiblePeerGroupIndex(this);for(let e=0;e<b;e++)y.push(String(e));a.domain=y,a.range=[0,null!=m?m:0],i instanceof nU?a.paddingInner=i.groupPaddingInner:i instanceof nQ?a.padding=.1:a.padding=0,a.round=0!==a.padding;let x=a.bandwidth>=1?a.bandwidth:a.rawBandwidth,S=t.resolveProcessedDataIndexById(this,"xValue").index,k=t.resolveProcessedDataIndexById(this,"yValue-raw").index,D=t.resolveProcessedDataIndexById(this,"yValue-start").index,w=t.resolveProcessedDataIndexById(this,"yValue-end").index,O=!this.ctx.animationManager.isSkipped(),M={itemId:o,nodeData:[],labelData:[],scales:e.calculateScaling.call(this),visible:this.visible||O};return null==p||p.data.forEach(({keys:e,datum:t,values:i})=>{let s=e[S],p=n.convert(s),g=+i[0][w],f=+i[0][D],m=i[0][k],y=p+a.convert(String(v));if(isNaN(g))return;let b=r.convert(g),O=r.convert(f),N=this.getBarDirection()===tG.X,E={x:N?Math.min(b,O):y,y:N?y:Math.min(b,O),width:N?Math.abs(O-b):x,height:N?x:Math.abs(O-b)},{fontStyle:C,fontWeight:A,fontSize:L,fontFamily:R,color:T,placement:I}=c,_=this.getLabelText(this.label,{datum:t[0],value:m,xKey:l,yKey:o,xName:this.xName,yName:this.yName,legendItemName:this.legendItemName},e=>i3(e)?e.toFixed(2):""),P=_?Object.assign({text:_,fill:T,fontStyle:C,fontWeight:A,fontSize:L,fontFamily:R},function({isPositive:e,isVertical:t,placement:i,padding:s=0,rect:n}){let r=n.x+n.width/2,a=n.y+n.height/2,o="center",l="middle";switch(i){case"start":t?(a=e?n.y+n.height+s:n.y-s,l=e?"top":"bottom"):(r=e?n.x-s:n.x+n.width+s,o=e?"start":"end");break;case"outside":case"end":t?(a=e?n.y-s:n.y+n.height+s,l=e?"bottom":"top"):(r=e?n.x+n.width+s:n.x-s,o=e?"start":"end")}return{x:r,y:a,textAlign:o,textBaseline:l}}({isPositive:m>=0,isVertical:!N,placement:I,rect:E})):void 0,B=this.shouldFlipXY()?E.height:E.width,F={series:this,itemId:o,datum:t[0],cumulativeValue:g,xValue:s,yValue:m,yKey:o,xKey:l,capDefaults:{lengthRatioMultiplier:B,lengthMax:B},x:E.x,y:E.y,width:E.width,height:E.height,midPoint:{x:E.x+E.width/2,y:E.y+E.height/2},fill:h,stroke:d,strokeWidth:u,label:P};M.nodeData.push(F),M.labelData.push(F)}),[M]})}nodeFactory(){return new r1}updateDatumSelection(e){return x(this,void 0,void 0,function*(){return e.datumSelection.update(e.nodeData,e=>{e.tag=t2.Bar},e=>e.xValue)})}updateDatumNodes(e){return x(this,void 0,void 0,function*(){let{datumSelection:t,isHighlight:i}=e,{yKey:s="",fill:n,stroke:r,fillOpacity:a,strokeOpacity:o,lineDash:l,lineDashOffset:h,shadow:d,formatter:u,id:c,highlightStyle:{item:p},ctx:g,stackGroup:f}=this,m=this.axes[tG.X],v=function(e=[]){let[t,i]=e;return!(0!==t||1!==i)}(null==m?void 0:m.visibleRange),b=this.getCategoryDirection()===tG.X;t.each((e,t)=>{let m={fill:n,stroke:r,fillOpacity:a,strokeOpacity:o,lineDash:l,lineDashOffset:h,fillShadow:d,strokeWidth:this.getStrokeWidth(this.strokeWidth)},x=b?t.width>0:t.height>0,S=function(e){let t;var i,s,n,r,a,{datum:o,isHighlighted:l,style:h,highlightStyle:d,formatter:u,seriesId:c,ctx:{callbackCache:p}}=e,g=y(e,["datum","isHighlighted","style","highlightStyle","formatter","seriesId","ctx"]);let{fill:f,fillOpacity:m,stroke:v,strokeWidth:b}=iZ(l&&d,h),{strokeOpacity:x,fillShadow:S,lineDash:k,lineDashOffset:D}=h;return u&&(t=p.call(u,Object.assign({datum:o.datum,xKey:o.xKey,fill:f,stroke:v,strokeWidth:b,highlighted:l,seriesId:c},g))),{fill:null!==(i=null==t?void 0:t.fill)&&void 0!==i?i:f,stroke:null!==(s=null==t?void 0:t.stroke)&&void 0!==s?s:v,strokeWidth:null!==(n=null==t?void 0:t.strokeWidth)&&void 0!==n?n:b,fillOpacity:null!==(r=null==t?void 0:t.fillOpacity)&&void 0!==r?r:m,strokeOpacity:null!==(a=null==t?void 0:t.strokeOpacity)&&void 0!==a?a:x,lineDash:k,lineDashOffset:D,fillShadow:S}}({datum:t,isHighlighted:i,style:m,highlightStyle:p,formatter:u,seriesId:c,stackGroup:f,ctx:g,yKey:s});S.crisp=v,S.visible=x,function({rect:e,config:t}){let{crisp:i=!0,fill:s,stroke:n,strokeWidth:r,fillOpacity:a,strokeOpacity:o,lineDash:l,lineDashOffset:h,fillShadow:d,visible:u=!0}=t;e.crisp=i,e.fill=s,e.stroke=n,e.strokeWidth=r,e.fillOpacity=a,e.strokeOpacity=o,e.lineDash=l,e.lineDashOffset=h,e.fillShadow=d,e.visible=u}({rect:e,config:S})})})}updateLabelSelection(e){return x(this,void 0,void 0,function*(){let t=this.label.enabled?e.labelData:[];return e.labelSelection.update(t,e=>{e.tag=t2.Label,e.pointerEvents=tW.None})})}updateLabelNodes(e){return x(this,void 0,void 0,function*(){e.labelSelection.each((e,t)=>{!function(e,t,i){if(t.enabled&&i){let{x:s,y:n,text:r,textAlign:a,textBaseline:o}=i,{color:l,fontStyle:h,fontWeight:d,fontSize:u,fontFamily:c}=t;e.setProperties({visible:!0,x:s,y:n,text:r,fill:l,fontStyle:h,fontWeight:d,fontSize:u,fontFamily:c,textAlign:a,textBaseline:o})}else e.visible=!1}(e,this.label,t.label)})})}getTooltipHtml(e){var t;let i;let{xKey:s,yKey:n,processedData:r,ctx:{callbackCache:a}}=this,o=this.getCategoryAxis(),l=this.getValueAxis(),{xValue:h,yValue:d,datum:u}=e;if(!r||!s||!n||!o||!l)return"";let{xName:c,yName:p,fill:g,stroke:f,tooltip:m,formatter:y,id:v,stackGroup:b}=this,x=this.getStrokeWidth(this.strokeWidth),S=o.formatDatum(h),k=l.formatDatum(d),D=iQ(p),w=iQ(S+": "+k);y&&(i=a.call(y,{datum:u,fill:g,stroke:f,strokeWidth:x,highlighted:!1,xKey:s,yKey:n,seriesId:v,stackGroup:b}));let O=null!==(t=null==i?void 0:i.fill)&&void 0!==t?t:g;return m.toTooltipHtml({title:D,content:w,backgroundColor:O},Object.assign({datum:u,xKey:s,xName:c,yKey:n,yName:p,color:O,title:D,seriesId:v,stackGroup:b},this.getModuleTooltipParams(u)))}getLegendData(e){var t;let{id:i,data:s,xKey:n,yKey:r,yName:a,legendItemName:o,fill:l,stroke:h,strokeWidth:d,fillOpacity:u,strokeOpacity:c,visible:p,showInLegend:g}=this;return"category"===e&&g&&(null==s?void 0:s.length)&&n&&r?[{legendType:"category",id:i,itemId:r,seriesId:i,enabled:p,label:{text:null!==(t=null!=o?o:a)&&void 0!==t?t:r},marker:{fill:l,stroke:h,fillOpacity:u,strokeOpacity:c,strokeWidth:d},legendItemName:o}]:[]}animateEmptyUpdateReady({datumSelections:e,labelSelections:t,annotationSelections:i}){let s=oT(oR("vertical"===this.direction,this.axes));t_(this.id,"nodes",this.ctx.animationManager,e,s),sT(this,"labels",this.ctx.animationManager,t),sT(this,"annotations",this.ctx.animationManager,i)}animateWaitingUpdateReady(e){var t,i;let{datumSelections:s,labelSelections:n,annotationSelections:r}=e;this.ctx.animationManager.stopByAnimationGroupId(this.id);let a=null===(i=null===(t=this.processedData)||void 0===t?void 0:t.reduced)||void 0===i?void 0:i.diff,o=oT(oR("vertical"===this.direction,this.axes));t_(this.id,"nodes",this.ctx.animationManager,s,o,(e,t)=>String(t.xValue),a),sT(this,"labels",this.ctx.animationManager,n),sT(this,"annotations",this.ctx.animationManager,r)}isLabelEnabled(){return this.label.enabled}}oP.className="BarSeries",oP.type="bar",v([ea(eE),b("design:type",String)],oP.prototype,"fill",void 0),v([ea(eE),b("design:type",String)],oP.prototype,"stroke",void 0),v([ea(eR(0,1)),b("design:type",Object)],oP.prototype,"fillOpacity",void 0),v([ea(eR(0,1)),b("design:type",Object)],oP.prototype,"strokeOpacity",void 0),v([ea(eX),b("design:type",Array)],oP.prototype,"lineDash",void 0),v([ea(eR(0)),b("design:type",Number)],oP.prototype,"lineDashOffset",void 0),v([ea(ey),b("design:type",Function)],oP.prototype,"formatter",void 0),v([ea(eS),b("design:type",String)],oP.prototype,"xKey",void 0),v([ea(eS),b("design:type",String)],oP.prototype,"xName",void 0),v([ea(eS),b("design:type",String)],oP.prototype,"yKey",void 0),v([ea(eS),b("design:type",String)],oP.prototype,"yName",void 0),v([ea(eS),b("design:type",String)],oP.prototype,"stackGroup",void 0),v([ea(eT()),b("design:type",Number)],oP.prototype,"normalizedTo",void 0),v([ea(eR(0)),b("design:type",Number)],oP.prototype,"strokeWidth",void 0);let oB={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"bar",instanceConstructor:oP,stackable:!0,groupable:!0,seriesDefaults:{axes:[{type:aA.NUMBER,position:aC.LEFT},{type:aA.CATEGORY,position:aC.BOTTOM}]},swapDefaultAxesCondition:e=>(null==e?void 0:e.direction)==="horizontal",themeTemplate:{__extends__:aK,fillOpacity:1,strokeWidth:0,lineDash:[0],lineDashOffset:0,label:{enabled:!1,fontStyle:void 0,fontWeight:aN,fontSize:12,fontFamily:aJ,color:a1,formatter:void 0,placement:"inside"},shadow:{enabled:!1,color:a8,xOffset:3,yOffset:3,blur:5}},enterpriseThemeTemplate:{errorBar:{cap:{lengthRatio:.3}}},paletteFactory:aw};class oF extends r4{constructor(e,t,i,s){super(e,t,i,s),this.sizeKey=s.sizeKey}}class oj extends ol{constructor(){super(...arguments),this.maxSize=30,this.domain=void 0}}v([ea(eR(0)),e7({redraw:tz.MAJOR}),b("design:type",Object)],oj.prototype,"maxSize",void 0),v([ea(eP),e7({redraw:tz.MAJOR}),b("design:type",Array)],oj.prototype,"domain",void 0);class oG extends r6{constructor(e){super({moduleCtx:e,pickModes:[tX.NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST,tX.NEAREST_NODE,tX.EXACT_SHAPE_MATCH],pathsPerSeries:0,hasMarkers:!0,markerSelectionGarbageCollection:!1,animationResetFns:{label:s_,marker:ou}}),this.NodeClickEvent=oF,this.sizeScale=new iR,this.marker=new oj,this.label=new sl,this.title=void 0,this.labelKey=void 0,this.xName=void 0,this.yName=void 0,this.sizeName="Size",this.labelName="Label",this.xKey=void 0,this.yKey=void 0,this.sizeKey=void 0,this.colorKey=void 0,this.colorName="Color",this.colorRange=["#ffff00","#00ff00","#0000ff"],this.colorScale=new rQ,this.tooltip=new s0}processData(e){var t,i;return x(this,void 0,void 0,function*(){let{xKey:s,yKey:n,sizeKey:r,labelKey:a,colorScale:o,colorDomain:l,colorRange:h,colorKey:d,marker:u,data:c}=this;if(null==s||null==n||null==r||null==c)return;let{isContinuousX:p,isContinuousY:g}=this.isContinuous(),{dataModel:f,processedData:m}=yield this.requestDataModel(e,c,{props:[sw(this,s,p,{id:"xKey-raw"}),sw(this,n,g,{id:"yKey-raw"}),...a?[sw(this,a,!1,{id:"labelKey-raw"})]:[],sO(this,s,p,{id:"xValue"}),sO(this,n,g,{id:"yValue"}),sO(this,r,!0,{id:"sizeValue"}),...d?[sO(this,d,!0,{id:"colorValue"})]:[],...a?[sO(this,a,!1,{id:"labelValue"})]:[]],dataVisible:this.visible}),y=f.resolveProcessedDataIndexById(this,"sizeValue").index,v=null!==(t=m.domain.values[y])&&void 0!==t?t:[];if(this.sizeScale.domain=u.domain?u.domain:v,d){let e=f.resolveProcessedDataIndexById(this,"colorValue").index;o.domain=null!==(i=null!=l?l:m.domain.values[e])&&void 0!==i?i:[],o.range=h,o.update()}this.animationState.transition("updateData")})}getSeriesDomain(e){let{dataModel:t,processedData:i}=this;if(!i||!t)return[];let s=e===tG.X?"xValue":"yValue",n=t.resolveProcessedDataDefById(this,s),r=t.getDomain(this,s,"value",i);if((null==n?void 0:n.def.type)==="value"&&(null==n?void 0:n.def.valueType)==="category")return r;let a=this.axes[e];return re(N(r),a)}createNodeData(){var e,t,i,s;let n=Object.create(null,{calculateScaling:{get:()=>super.calculateScaling}});return x(this,void 0,void 0,function*(){let{visible:r,axes:a,yKey:o="",xKey:l="",label:h,labelKey:d,dataModel:u,processedData:c,colorScale:p,sizeKey:g="",colorKey:f}=this,m=a[tG.X],y=a[tG.Y];if(!(u&&c&&r&&m&&y))return[];let v=u.resolveProcessedDataIndexById(this,"xValue").index,b=u.resolveProcessedDataIndexById(this,"yValue").index,x=g?u.resolveProcessedDataIndexById(this,"sizeValue").index:-1,S=f?u.resolveProcessedDataIndexById(this,"colorValue").index:-1,k=d?u.resolveProcessedDataIndexById(this,"labelValue").index:-1,D=m.scale,w=y.scale,O=(null!==(e=D.bandwidth)&&void 0!==e?e:0)/2,M=(null!==(t=w.bandwidth)&&void 0!==t?t:0)/2,{sizeScale:N,marker:E}=this,C=[];N.range=[E.size,E.maxSize];let A=h.getFont();for(let{values:e,datum:t}of null!==(i=c.data)&&void 0!==i?i:[]){let i=e[v],s=e[b],n=D.convert(i)+O,r=w.convert(s)+M,a=this.getLabelText(h,{value:d?e[k]:s,datum:t,xKey:l,yKey:o,sizeKey:g,labelKey:d,xName:this.xName,yName:this.yName,sizeName:this.sizeName,labelName:this.labelName}),u=td.getTextSize(String(a),A),c=g?N.convert(e[x]):E.size,m=f?p.convert(e[S]):void 0;C.push({series:this,itemId:o,yKey:o,xKey:l,datum:t,xValue:i,yValue:s,sizeValue:e[x],point:{x:n,y:r,size:c},midPoint:{x:n,y:r},fill:m,label:Object.assign({text:a},u)})}return[{itemId:null!==(s=this.yKey)&&void 0!==s?s:this.id,nodeData:C,labelData:C,scales:n.calculateScaling.call(this),visible:this.visible}]})}isPathOrSelectionDirty(){return this.marker.isDirty()}getLabelData(){var e;return null===(e=this.contextNodeData)||void 0===e?void 0:e.reduce((e,t)=>e.concat(t.labelData),[])}markerFactory(){let{shape:e}=this.marker;return new(rC(e))}updateMarkerSelection(e){return x(this,void 0,void 0,function*(){let{nodeData:t,markerSelection:i}=e;this.marker.isDirty()&&(i.clear(),i.cleanup());let s=this.marker.enabled?t:[];return i.update(s,void 0,e=>this.getDatumId(e))})}updateMarkerNodes(e){return x(this,void 0,void 0,function*(){let{markerSelection:t,isHighlight:i}=e,{xKey:s="",yKey:n="",sizeKey:r="",labelKey:a,marker:o}=this,l=iZ(i&&this.highlightStyle.item,o.getStyle());this.sizeScale.range=[o.size,o.maxSize],t.each((e,t)=>{this.updateMarkerStyle(e,o,{datum:t,highlighted:i,xKey:s,yKey:n,sizeKey:r,labelKey:a},l)}),i||this.marker.markClean()})}updateLabelSelection(e){var t,i;return x(this,void 0,void 0,function*(){let{labelSelection:s}=e,{label:{enabled:n}}=this,r=(n&&null!==(i=null===(t=this.chart)||void 0===t?void 0:t.placeLabels().get(this))&&void 0!==i?i:[]).map(e=>Object.assign(Object.assign({},e.datum),{point:{x:e.x,y:e.y,size:e.datum.point.size}}));return s.update(r)})}updateLabelNodes(e){return x(this,void 0,void 0,function*(){let{labelSelection:t}=e,{label:i}=this;t.each((e,t)=>{var s,n,r,a;e.text=t.label.text,e.fill=i.color,e.x=null!==(n=null===(s=t.point)||void 0===s?void 0:s.x)&&void 0!==n?n:0,e.y=null!==(a=null===(r=t.point)||void 0===r?void 0:r.y)&&void 0!==a?a:0,e.fontStyle=i.fontStyle,e.fontWeight=i.fontWeight,e.fontSize=i.fontSize,e.fontFamily=i.fontFamily,e.textAlign="left",e.textBaseline="top"})})}getTooltipHtml(e){var t;let{xKey:i,yKey:s,sizeKey:n,axes:r}=this,a=r[tG.X],o=r[tG.Y];if(!i||!s||!a||!o||!n)return"";let{marker:l,tooltip:h,xName:d,yName:u,sizeName:c,labelKey:p,labelName:g,id:f}=this,m=iZ({fill:e.fill,strokeWidth:this.getStrokeWidth(l.strokeWidth)},l.getStyle()),{fill:y="gray"}=this.getMarkerStyle(l,{datum:e,highlighted:!1,xKey:i,yKey:s,sizeKey:n,labelKey:p},m),v=null!==(t=this.title)&&void 0!==t?t:u,{datum:b,xValue:x,yValue:S,sizeValue:k,label:{text:D}}=e,w=iQ(a.formatDatum(x)),O=iQ(o.formatDatum(S)),M=`<b>${iQ(null!=d?d:i)}</b>: ${w}<br><b>${iQ(null!=u?u:s)}</b>: ${O}`;return n&&(M+=`<br><b>${iQ(null!=c?c:n)}</b>: ${iQ(String(k))}`),p&&(M=`<b>${iQ(null!=g?g:p)}</b>: ${iQ(D)}<br>`+M),h.toTooltipHtml({title:v,content:M,backgroundColor:y},{datum:b,xKey:i,xName:d,yKey:s,yName:u,sizeKey:n,sizeName:c,labelKey:p,labelName:g,title:v,color:y,seriesId:f})}getLegendData(){var e;let{id:t,data:i,xKey:s,yKey:n,sizeKey:r,yName:a,title:o,visible:l,marker:h}=this,{shape:d,fill:u,stroke:c,fillOpacity:p,strokeOpacity:g,strokeWidth:f}=h;return(null==i?void 0:i.length)&&s&&n&&r?[{legendType:"category",id:t,itemId:n,seriesId:t,enabled:l,label:{text:null!==(e=null!=o?o:a)&&void 0!==e?e:n},marker:{shape:d,fill:null!=u?u:"rgba(0, 0, 0, 0)",stroke:null!=c?c:"rgba(0, 0, 0, 0)",fillOpacity:null!=p?p:1,strokeOpacity:null!=g?g:1,strokeWidth:null!=f?f:0}}]:[]}animateEmptyUpdateReady({markerSelections:e,labelSelections:t}){oh(this,this.ctx.animationManager,e),sT(this,"labels",this.ctx.animationManager,t)}getDatumId(e){return so([`${e.xValue}`,`${e.yValue}`,e.label.text])}isLabelEnabled(){return this.label.enabled}nodeFactory(){return new i_}}oG.className="BubbleSeries",oG.type="bubble",v([ea(eS),b("design:type",String)],oG.prototype,"title",void 0),v([ea(eS),b("design:type",String)],oG.prototype,"labelKey",void 0),v([ea(eS),b("design:type",String)],oG.prototype,"xName",void 0),v([ea(eS),b("design:type",String)],oG.prototype,"yName",void 0),v([ea(eS),b("design:type",String)],oG.prototype,"sizeName",void 0),v([ea(eS),b("design:type",String)],oG.prototype,"labelName",void 0),v([ea(eS),b("design:type",String)],oG.prototype,"xKey",void 0),v([ea(eS),b("design:type",String)],oG.prototype,"yKey",void 0),v([ea(eS),b("design:type",String)],oG.prototype,"sizeKey",void 0),v([ea(eS),b("design:type",String)],oG.prototype,"colorKey",void 0),v([ea(eS),b("design:type",String)],oG.prototype,"colorName",void 0),v([ea(eP),b("design:type",Array)],oG.prototype,"colorDomain",void 0),v([ea(eC),b("design:type",Array)],oG.prototype,"colorRange",void 0);let oz={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"bubble",instanceConstructor:oG,seriesDefaults:{axes:[{type:aA.NUMBER,position:aC.BOTTOM},{type:aA.NUMBER,position:aC.LEFT}]},themeTemplate:{__extends__:aK,tooltip:{position:{type:"node"}},marker:{__extends__:aq,maxSize:30,fillOpacity:.8},label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:aJ,color:aQ}},paletteFactory:aO},oW=["count","sum","mean"],oY=el(e=>oW.includes(e),"expecting a histogram aggregation keyword such as 'count', 'sum' or 'mean");(ih=t5||(t5={}))[ih.Bin=0]="Bin",ih[ih.Label=1]="Label";class oV extends r6{constructor(e){super({moduleCtx:e,pickModes:[tX.EXACT_SHAPE_MATCH],datumSelectionGarbageCollection:!1,animationResetFns:{datum:oI,label:s_}}),this.label=new sl,this.tooltip=new s0,this.fill=void 0,this.stroke=void 0,this.fillOpacity=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.xKey=void 0,this.areaPlot=!1,this.aggregation="sum",this.binCount=void 0,this.xName=void 0,this.yKey=void 0,this.yName=void 0,this.strokeWidth=1,this.shadow=void 0,this.calculatedBins=[]}deriveBins(e){if(void 0!==this.binCount)return this.calculateNiceBins(e,this.binCount);{let t=iM(e[0],e[1],10),i=iE(e[0],e[1],10),s=t[0];return[[s-i,s],...t.map(e=>[e,e+i])]}}calculateNiceBins(e,t){let i=Math.floor(e[0]),s=e[1],n=t||1,{start:r,binSize:a}=this.calculateNiceStart(i,s,n);return this.getBins(r,s,a,n)}getBins(e,t,i,s){let n=[];for(let r=0;r<s;r++){let a=Math.round((e+r*i)*10)/10,o=Math.round((e+(r+1)*i)*10)/10;r===s-1&&(o=Math.max(o,t)),n[r]=[a,o]}return n}calculateNiceStart(e,t,i){let s=Math.abs(t-e)/i,n=Math.pow(10,Math.floor(Math.log10(s)));return{start:Math.floor(e/n)*n,binSize:s}}processData(e){return x(this,void 0,void 0,function*(){let{xKey:t,yKey:i,data:s,areaPlot:n,aggregation:r}=this,a=[sw(this,t,!0),i9];if(i){var o,l;let e=sx(this,"groupCount");"count"===r||("sum"===r?e={id:"groupAgg",scopes:[this.id],type:"aggregate",matchGroupIds:o?[o]:void 0,aggregateFunction:e=>sb(e),groupAggregateFunction:(e,t=[0,0])=>{var i,s;return t[0]+=null!==(i=null==e?void 0:e[0])&&void 0!==i?i:0,t[1]+=null!==(s=null==e?void 0:e[1])&&void 0!==s?s:0,t}}:"mean"===r&&(e={id:"groupAgg",scopes:[this.id],matchGroupIds:l?[l]:void 0,type:"aggregate",aggregateFunction:e=>sb(e),groupAggregateFunction:(e,t=[0,0,-1])=>{var i,s;return t[0]+=null!==(i=null==e?void 0:e[0])&&void 0!==i?i:0,t[1]+=null!==(s=null==e?void 0:e[1])&&void 0!==s?s:0,t[2]++,t},finalFunction:(e=[0,0,0])=>{let t=e[0]+e[1];return t>=0?[0,t/e[2]]:[t/e[2],0]}})),n&&(e=sS(this,"groupAgg",e)),a.push(sO(this,i,!0,{invalidValue:void 0}),e)}else{let e=sx(this,"groupAgg");n&&(e=sS(this,"groupAgg",e)),a.push(e)}!this.ctx.animationManager.isSkipped()&&this.processedData&&a.push(sa(this.processedData,!1)),yield this.requestDataModel(e,null!=s?s:[],{props:a,dataVisible:this.visible,groupByFn:e=>{var t;let i=re(e.domain.keys[0]);if(0===i.length)return e.domain.groups=[],()=>[];let s=null!==(t=this.bins)&&void 0!==t?t:this.deriveBins(i),n=s.length;return this.calculatedBins=[...s],e=>{let t=e.keys[0];for(let e=0;e<n;e++){let i=s[e];if(t>=i[0]&&t<i[1]||e===n-1&&t<=i[1])return i}return[]}}}),this.animationState.transition("updateData")})}getSeriesDomain(e){var t,i,s,n;let{processedData:r,dataModel:a}=this;if(!r||!a||!this.calculatedBins.length)return[];let o=a.getDomain(this,"groupAgg","aggregate",r),l=null===(t=this.calculatedBins)||void 0===t?void 0:t[0][0],h=null===(i=this.calculatedBins)||void 0===i?void 0:i[(null!==(n=null===(s=this.calculatedBins)||void 0===s?void 0:s.length)&&void 0!==n?n:0)-1][1];return e===tG.X?re([l,h]):re(o)}createNodeData(){var e;let t=Object.create(null,{calculateScaling:{get:()=>super.calculateScaling}});return x(this,void 0,void 0,function*(){let{axes:i,processedData:s,ctx:{callbackCache:n}}=this,r=i[tG.X],a=i[tG.Y];if(!this.visible||!r||!a||!s||"grouped"!==s.type)return[];let{scale:o}=r,{scale:l}=a,{fill:h,stroke:d,strokeWidth:u,id:c,yKey:p="",xKey:g=""}=this,f=[],{label:{formatter:m=e=>String(e.value),fontStyle:y,fontWeight:v,fontSize:b,fontFamily:x,color:S}}=this;return s.data.forEach(e=>{var t;let{aggValues:[[i,s]]=[[0,0]],datum:r,datum:{length:a},keys:k,keys:[D,w]}=e,O=o.convert(D),M=o.convert(w),N=i+s,E=l.convert(0),C=l.convert(N),A=M-O,L=Math.abs(C-E),R=0!==N?{text:null!==(t=n.call(m,{value:N,datum:r,seriesId:c,xKey:g,yKey:p,xName:this.xName,yName:this.yName}))&&void 0!==t?t:String(N),fontStyle:y,fontWeight:v,fontSize:b,fontFamily:x,fill:S,x:O+A/2,y:C+L/2}:void 0;f.push({series:this,datum:r,aggregatedValue:N,frequency:a,domain:k,yKey:p,xKey:g,x:O,y:C,xValue:O,yValue:C,width:A,height:L,midPoint:{x:O+A/2,y:C+L/2},fill:h,stroke:d,strokeWidth:u,label:R})}),[{itemId:null!==(e=this.yKey)&&void 0!==e?e:this.id,nodeData:f,labelData:f,scales:t.calculateScaling.call(this),animationValid:!0,visible:this.visible}]})}nodeFactory(){return new r1}updateDatumSelection(e){return x(this,void 0,void 0,function*(){let{nodeData:t,datumSelection:i}=e;return i.update(t,e=>{e.tag=t5.Bin,e.crisp=!0},e=>e.domain.join("_"))})}updateDatumNodes(e){return x(this,void 0,void 0,function*(){let{datumSelection:t,isHighlight:i}=e,{fillOpacity:s,strokeOpacity:n,shadow:r,highlightStyle:{item:{fill:a,fillOpacity:o=s,stroke:l,strokeWidth:h}}}=this;t.each((e,t,d)=>{var u,c;let p=i&&void 0!==h?h:t.strokeWidth;e.fill=null!==(u=i?a:void 0)&&void 0!==u?u:t.fill,e.stroke=null!==(c=i?l:void 0)&&void 0!==c?c:t.stroke,e.fillOpacity=i?o:s,e.strokeOpacity=n,e.strokeWidth=p,e.lineDash=this.lineDash,e.lineDashOffset=this.lineDashOffset,e.fillShadow=r,e.zIndex=i?sR.highlightedZIndex:d,e.visible=t.height>0})})}updateLabelSelection(e){return x(this,void 0,void 0,function*(){let{labelData:t,labelSelection:i}=e;return i.update(t,e=>{e.tag=t5.Label,e.pointerEvents=tW.None,e.textAlign="center",e.textBaseline="middle"})})}updateLabelNodes(e){return x(this,void 0,void 0,function*(){let{labelSelection:t}=e,i=this.label.enabled;t.each((e,t)=>{let s=t.label;s&&i?(e.text=s.text,e.x=s.x,e.y=s.y,e.fontStyle=s.fontStyle,e.fontWeight=s.fontWeight,e.fontSize=s.fontSize,e.fontFamily=s.fontFamily,e.fill=s.fill,e.visible=!0):e.visible=!1})})}getTooltipHtml(e){let{xKey:t,yKey:i="",axes:s}=this,n=s[tG.X],r=s[tG.Y];if(!t||!n||!r)return"";let{xName:a,yName:o,fill:l,tooltip:h,aggregation:d,id:u}=this,{aggregatedValue:c,frequency:p,domain:[g,f]}=e,m=`${iQ(null!=a?a:t)}: ${n.formatDatum(g)} - ${n.formatDatum(f)}`,y=i?`<b>${iQ(null!=o?o:i)} (${d})</b>: ${r.formatDatum(c)}<br>`:"",v={title:m,backgroundColor:l,content:y+=`<b>Frequency</b>: ${p}`};return h.toTooltipHtml(v,{datum:{data:e.datum,aggregatedValue:e.aggregatedValue,domain:e.domain,frequency:e.frequency},xKey:t,xName:a,yKey:i,yName:o,color:l,title:m,seriesId:u})}getLegendData(e){var t;let{id:i,data:s,xKey:n,yName:r,visible:a,fill:o,stroke:l,fillOpacity:h,strokeOpacity:d,strokeWidth:u}=this;return s&&0!==s.length&&"category"===e?[{legendType:"category",id:i,itemId:n,seriesId:i,enabled:a,label:{text:null!==(t=null!=r?r:n)&&void 0!==t?t:"Frequency"},marker:{fill:null!=o?o:"rgba(0, 0, 0, 0)",stroke:null!=l?l:"rgba(0, 0, 0, 0)",fillOpacity:h,strokeOpacity:d,strokeWidth:u}}]:[]}animateEmptyUpdateReady({datumSelections:e,labelSelections:t}){let i=oT(oR(!0,this.axes));t_(this.id,"datums",this.ctx.animationManager,e,i),sT(this,"labels",this.ctx.animationManager,t)}animateWaitingUpdateReady(e){var t,i;let s=null===(i=null===(t=this.processedData)||void 0===t?void 0:t.reduced)||void 0===i?void 0:i.diff,n=oT(oR(!0,this.axes));t_(this.id,"datums",this.ctx.animationManager,e.datumSelections,n,(e,t)=>this.getDatumId(t),s),sT(this,"labels",this.ctx.animationManager,e.labelSelections)}getDatumId(e){return so(e.domain.map(e=>`${e}`))}isLabelEnabled(){return this.label.enabled}}oV.className="HistogramSeries",oV.type="histogram",v([ea(eE),b("design:type",String)],oV.prototype,"fill",void 0),v([ea(eE),b("design:type",String)],oV.prototype,"stroke",void 0),v([ea(eR(0,1)),b("design:type",Object)],oV.prototype,"fillOpacity",void 0),v([ea(eR(0,1)),b("design:type",Object)],oV.prototype,"strokeOpacity",void 0),v([ea(eX),b("design:type",Array)],oV.prototype,"lineDash",void 0),v([ea(eR(0)),b("design:type",Number)],oV.prototype,"lineDashOffset",void 0),v([ea(eS),b("design:type",String)],oV.prototype,"xKey",void 0),v([ea(ev),b("design:type",Boolean)],oV.prototype,"areaPlot",void 0),v([ea(eu()),b("design:type",Array)],oV.prototype,"bins",void 0),v([ea(oY),b("design:type",String)],oV.prototype,"aggregation",void 0),v([ea(eT(0)),b("design:type",Number)],oV.prototype,"binCount",void 0),v([ea(eS),b("design:type",String)],oV.prototype,"xName",void 0),v([ea(eS),b("design:type",String)],oV.prototype,"yKey",void 0),v([ea(eS),b("design:type",String)],oV.prototype,"yName",void 0),v([ea(eR(0)),b("design:type",Number)],oV.prototype,"strokeWidth",void 0);let o$={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"histogram",instanceConstructor:oV,seriesDefaults:{axes:[{type:aA.NUMBER,position:aC.BOTTOM},{type:aA.NUMBER,position:aC.LEFT}]},themeTemplate:{__extends__:aK,strokeWidth:1,fillOpacity:1,strokeOpacity:1,lineDash:[0],lineDashOffset:0,label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:aJ,color:a1,formatter:void 0},shadow:{enabled:!1,color:a8,xOffset:3,yOffset:3,blur:5}},paletteFactory:({takeColors:e})=>{let{fills:[t],strokes:[i]}=e(1);return{fill:t,stroke:i}}};class oX extends r6{constructor(e){super({moduleCtx:e,hasMarkers:!0,pickModes:[tX.NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST,tX.NEAREST_NODE,tX.EXACT_SHAPE_MATCH],markerSelectionGarbageCollection:!1,animationResetFns:{path:oS({getOpacity:()=>this.getOpacity()}),label:s_,marker:(e,t)=>Object.assign(Object.assign({},ou()),oc(e,t))}}),this.label=new sl,this.marker=new ol,this.tooltip=new s0,this.title=void 0,this.stroke="#874349",this.lineDash=[0],this.lineDashOffset=0,this.strokeWidth=2,this.strokeOpacity=1,this.xKey=void 0,this.xName=void 0,this.yKey=void 0,this.yName=void 0}processData(e){return x(this,void 0,void 0,function*(){let{xKey:t,yKey:i,data:s}=this;if(null==t||null==i||null==s)return;let n=!this.ctx.animationManager.isSkipped(),{isContinuousX:r,isContinuousY:a}=this.isContinuous(),o=[];!r&&(o.push(sw(this,t,r,{id:"xKey"})),n&&this.processedData&&o.push(sa(this.processedData))),n&&o.push(ss(this,r?["xValue"]:[])),o.push(sO(this,t,r,{id:"xValue"}),sO(this,i,a,{id:"yValue",invalidValue:void 0})),yield this.requestDataModel(e,s,{props:o}),this.animationState.transition("updateData")})}getSeriesDomain(e){let{axes:t,dataModel:i,processedData:s}=this;if(!s||!i)return[];let n=t[tG.X],r=t[tG.Y],a=i.resolveProcessedDataDefById(this,"xValue");if(e!==tG.X)return re(i.getDomain(this,"yValue","value",s),r);{let e=i.getDomain(this,"xValue","value",s);return(null==a?void 0:a.def.type)==="value"&&"category"===a.def.valueType?e:re(N(e),n)}}createNodeData(){var e,t,i;let s=Object.create(null,{calculateScaling:{get:()=>super.calculateScaling}});return x(this,void 0,void 0,function*(){let n;let{processedData:r,dataModel:a,axes:o}=this,l=o[tG.X],h=o[tG.Y];if(!r||!a||!l||!h)return[];let{label:d,yKey:u="",xKey:c=""}=this,p=l.scale,g=h.scale,f=(null!==(e=p.bandwidth)&&void 0!==e?e:0)/2,m=(null!==(t=g.bandwidth)&&void 0!==t?t:0)/2,y=[],v=this.marker.enabled?this.marker.size:0,b=a.resolveProcessedDataIndexById(this,"xValue").index,x=a.resolveProcessedDataIndexById(this,"yValue").index,S=!0;for(let e=0;e<r.data.length;e++){let{datum:t,values:s}=null!=n?n:r.data[e],a=s[b],o=s[x];if(void 0===o)S=!0;else{let s=p.convert(a)+f;if(isNaN(s)){S=!0,n=void 0;continue}n=(null===(i=r.data[e+1])||void 0===i?void 0:i.values[x])===void 0?void 0:r.data[e+1];let l=g.convert(o)+m,h=this.getLabelText(d,{value:o,datum:t,xKey:c,yKey:u,xName:this.xName,yName:this.yName},e=>i3(e)?e.toFixed(2):String(e));y.push({series:this,datum:t,yKey:u,xKey:c,point:{x:s,y:l,moveTo:S,size:v},midPoint:{x:s,y:l},yValue:o,xValue:a,capDefaults:{lengthRatioMultiplier:this.marker.getDiameter(),lengthMax:1/0},label:h?{text:h,fontStyle:d.fontStyle,fontWeight:d.fontWeight,fontSize:d.fontSize,fontFamily:d.fontFamily,textAlign:"center",textBaseline:"bottom",fill:d.color}:void 0}),S=!1}}return[{itemId:u,nodeData:y,labelData:y,scales:s.calculateScaling.call(this),visible:this.visible}]})}isPathOrSelectionDirty(){return this.marker.isDirty()}markerFactory(){let{shape:e}=this.marker;return new(rC(e))}updatePathNodes(e){var t,i;return x(this,void 0,void 0,function*(){let{paths:[s],opacity:n,visible:r,animationEnabled:a}=e,{seriesRectHeight:o,seriesRectWidth:l}=this.nodeDataDependencies;s.setProperties({fill:void 0,lineJoin:"round",pointerEvents:tW.None,opacity:n,stroke:this.stroke,strokeWidth:this.getStrokeWidth(this.strokeWidth),strokeOpacity:this.strokeOpacity,lineDash:this.lineDash,lineDashOffset:this.lineDashOffset}),a||(s.visible=r),null==s.clipPath&&(s.clipPath=new iY,s.clipScalingX=1,s.clipScalingY=1),null===(t=s.clipPath)||void 0===t||t.clear({trackChanges:!0}),null===(i=s.clipPath)||void 0===i||i.rect(-25,-25,(null!=l?l:0)+50,(null!=o?o:0)+50)})}updateMarkerSelection(e){return x(this,void 0,void 0,function*(){let{nodeData:t}=e,{markerSelection:i}=e,{shape:s,enabled:n}=this.marker;return t=s&&n?t:[],this.marker.isDirty()&&(i.clear(),i.cleanup()),i.update(t,void 0,e=>this.getDatumId(e))})}updateMarkerNodes(e){return x(this,void 0,void 0,function*(){let{markerSelection:t,isHighlight:i}=e,{xKey:s="",yKey:n="",marker:r,stroke:a,strokeWidth:o,strokeOpacity:l}=this,h=iZ(i&&this.highlightStyle.item,r.getStyle(),{stroke:a,strokeWidth:o,strokeOpacity:l}),d=this.ctx.animationManager.isSkipped();t.each((e,t)=>{this.updateMarkerStyle(e,r,{datum:t,highlighted:i,xKey:s,yKey:n},h,{applyTranslation:d})}),i||this.marker.markClean()})}updateLabelSelection(e){return x(this,void 0,void 0,function*(){let{labelData:t}=e,{labelSelection:i}=e,{shape:s,enabled:n}=this.marker;return t=s&&n?t:[],i.update(t)})}updateLabelNodes(e){return x(this,void 0,void 0,function*(){let{labelSelection:t}=e,{enabled:i,fontStyle:s,fontWeight:n,fontSize:r,fontFamily:a,color:o}=this.label;t.each((e,t)=>{let{point:l,label:h}=t;t&&h&&i?(e.fontStyle=s,e.fontWeight=n,e.fontSize=r,e.fontFamily=a,e.textAlign=h.textAlign,e.textBaseline=h.textBaseline,e.text=h.text,e.x=l.x,e.y=l.y-10,e.fill=o,e.visible=!0):e.visible=!1})})}getTooltipHtml(e){var t;let{xKey:i,yKey:s,axes:n}=this,r=n[tG.X],a=n[tG.Y];if(!i||!s||!r||!a)return"";let{xName:o,yName:l,tooltip:h,marker:d,id:u}=this,{datum:c,xValue:p,yValue:g}=e,f=r.formatDatum(p),m=a.formatDatum(g),y=iQ(null!==(t=this.title)&&void 0!==t?t:l),v=iQ(f+": "+m),b=iZ({fill:d.stroke},d.getStyle(),{strokeWidth:this.strokeWidth}),{fill:x}=this.getMarkerStyle(d,{datum:e,xKey:i,yKey:s,highlighted:!1},b);return h.toTooltipHtml({title:y,content:v,backgroundColor:x},Object.assign({datum:c,xKey:i,xName:o,yKey:s,yName:l,title:y,color:x,seriesId:u},this.getModuleTooltipParams(c)))}getLegendData(e){var t,i,s,n,r,a,o,l;let{id:h,data:d,xKey:u,yKey:c,yName:p,visible:g,title:f,marker:m,stroke:y,strokeOpacity:v}=this;return(null==d?void 0:d.length)&&u&&c&&"category"===e?[{legendType:"category",id:h,itemId:c,seriesId:h,enabled:g,label:{text:null!==(t=null!=f?f:p)&&void 0!==t?t:c},marker:{shape:m.shape,fill:null!==(i=m.fill)&&void 0!==i?i:"rgba(0, 0, 0, 0)",stroke:null!==(n=null!==(s=m.stroke)&&void 0!==s?s:y)&&void 0!==n?n:"rgba(0, 0, 0, 0)",fillOpacity:null!==(r=m.fillOpacity)&&void 0!==r?r:1,strokeOpacity:null!==(o=null!==(a=m.strokeOpacity)&&void 0!==a?a:v)&&void 0!==o?o:1,strokeWidth:null!==(l=m.strokeWidth)&&void 0!==l?l:0}}]:[]}updatePaths(e){return x(this,void 0,void 0,function*(){this.updateLinePaths([e.paths],[e.contextData])})}updateLinePaths(e,t){t.forEach(({nodeData:t},i)=>{let[s]=e[i],{path:n}=s;for(let e of(n.clear({trackChanges:!0}),t))e.point.moveTo?n.moveTo(e.point.x,e.point.y):n.lineTo(e.point.x,e.point.y);s.checkPathDirty()})}animateEmptyUpdateReady(e){let{markerSelections:t,labelSelections:i,annotationSelections:s,contextData:n,paths:r}=e,{animationManager:a}=this.ctx,{seriesRectWidth:o=0}=this.nodeDataDependencies;this.updateLinePaths(r,n),ox(this,a,r.flat()),s5(t,oc),od(this,a,t,o),sT(this,"labels",a,i),sT(this,"annotations",a,s)}animateReadyResize(e){let{contextData:t,paths:i}=e;this.updateLinePaths(i,t),super.animateReadyResize(e)}animateWaitingUpdateReady(e){var t,i;let{animationManager:s}=this.ctx,{markerSelections:n,labelSelections:r,annotationSelections:a,contextData:o,paths:l,previousContextData:h}=e;if(super.resetAllAnimation(e),0===o.length||!h||0===h.length){s.skipCurrentBatch(),this.updateLinePaths(l,o);return}let[d]=l,[u]=o,[c]=h,p=function(e,t,i){var s;let{result:n,resultMap:r}=(null===(s=e.scales.x)||void 0===s?void 0:s.type)==="category"&&i?oO(e,t,i):ow(e,t),a="updated";if(t.visible&&!e.visible?a="removed":!t.visible&&e.visible&&(a="added"),void 0===n||void 0===r)return;let o=oM(e,t,n,"fade",ob),l=op(r,a);return Object.assign(Object.assign({},o),{marker:l})}(u,c,null===(i=null===(t=this.processedData)||void 0===t?void 0:t.reduced)||void 0===i?void 0:i.diff);if(void 0===p){s.skipCurrentBatch(),this.updateLinePaths(l,o);return}t_(this.id,"marker",s,n,p.marker),t_(this.id,"path_properties",s,d,p.pathProperties),oa(this.id,"path_update",s,d,p.path),sT(this,"labels",s,r),sT(this,"annotations",s,a)}getDatumId(e){return so([`${e.xValue}`])}isLabelEnabled(){return this.label.enabled}getBandScalePadding(){return{inner:1,outer:.1}}nodeFactory(){return new i_}}oX.className="LineSeries",oX.type="line",v([ea(eS),b("design:type",String)],oX.prototype,"title",void 0),v([ea(eE),b("design:type",String)],oX.prototype,"stroke",void 0),v([ea(eX),b("design:type",Array)],oX.prototype,"lineDash",void 0),v([ea(eR(0)),b("design:type",Number)],oX.prototype,"lineDashOffset",void 0),v([ea(eR(0)),b("design:type",Number)],oX.prototype,"strokeWidth",void 0),v([ea(eR(0,1)),b("design:type",Number)],oX.prototype,"strokeOpacity",void 0),v([ea(eS),b("design:type",String)],oX.prototype,"xKey",void 0),v([ea(eS),b("design:type",String)],oX.prototype,"xName",void 0),v([ea(eS),b("design:type",String)],oX.prototype,"yKey",void 0),v([ea(eS),b("design:type",String)],oX.prototype,"yName",void 0);let oH={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"line",instanceConstructor:oX,seriesDefaults:aj,themeTemplate:{__extends__:aK,tooltip:{position:{type:"node"}},strokeWidth:2,strokeOpacity:1,lineDash:[0],lineDashOffset:0,marker:{__extends__:aq,fillOpacity:1,strokeOpacity:1,strokeWidth:0},label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:aJ,color:aQ,formatter:void 0}},enterpriseThemeTemplate:{errorBar:{cap:{lengthRatio:1}}},paletteFactory:e=>{let{marker:t}=aO(e);return{stroke:t.fill,marker:t}}};class oU extends r6{constructor(e){super({moduleCtx:e,pickModes:[tX.NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST,tX.NEAREST_NODE,tX.EXACT_SHAPE_MATCH],pathsPerSeries:0,hasMarkers:!0,markerSelectionGarbageCollection:!1,animationResetFns:{marker:ou,label:s_}}),this.marker=new ol,this.label=new sl,this.title=void 0,this.labelKey=void 0,this.xName=void 0,this.yName=void 0,this.labelName="Label",this.xKey=void 0,this.yKey=void 0,this.colorKey=void 0,this.colorName="Color",this.colorRange=["#ffff00","#00ff00","#0000ff"],this.colorScale=new rQ,this.tooltip=new s0}processData(e){var t;return x(this,void 0,void 0,function*(){let{xKey:i,yKey:s,labelKey:n,data:r}=this;if(null==i||null==s||null==r)return;let{isContinuousX:a,isContinuousY:o}=this.isContinuous(),{colorScale:l,colorDomain:h,colorRange:d,colorKey:u}=this,{dataModel:c,processedData:p}=yield this.requestDataModel(e,r,{props:[sw(this,i,a,{id:"xKey-raw"}),sw(this,s,o,{id:"yKey-raw"}),...n?[sw(this,n,!1,{id:"labelKey-raw"})]:[],sO(this,i,a,{id:"xValue"}),sO(this,s,o,{id:"yValue"}),...u?[sO(this,u,!0,{id:"colorValue"})]:[],...n?[sO(this,n,!1,{id:"labelValue"})]:[]],dataVisible:this.visible});if(u){let e=c.resolveProcessedDataIndexById(this,"colorValue").index;l.domain=null!==(t=null!=h?h:p.domain.values[e])&&void 0!==t?t:[],l.range=d,l.update()}this.animationState.transition("updateData")})}getSeriesDomain(e){let{dataModel:t,processedData:i}=this;if(!i||!t)return[];let s=e===tG.X?"xValue":"yValue",n=t.resolveProcessedDataDefById(this,s),r=t.getDomain(this,s,"value",i);if((null==n?void 0:n.def.type)==="value"&&(null==n?void 0:n.def.valueType)==="category")return r;let a=this.axes[e];return re(N(r),a)}createNodeData(){var e,t,i,s;let n=Object.create(null,{calculateScaling:{get:()=>super.calculateScaling}});return x(this,void 0,void 0,function*(){let{visible:r,axes:a,yKey:o="",xKey:l="",label:h,labelKey:d,dataModel:u,processedData:c}=this,p=a[tG.X],g=a[tG.Y];if(!(u&&c&&r&&p&&g))return[];let f=u.resolveProcessedDataIndexById(this,"xValue").index,m=u.resolveProcessedDataIndexById(this,"yValue").index,y=this.colorKey?u.resolveProcessedDataIndexById(this,"colorValue").index:-1,v=this.labelKey?u.resolveProcessedDataIndexById(this,"labelValue").index:-1,{colorScale:b,colorKey:x}=this,S=p.scale,k=g.scale,D=(null!==(e=S.bandwidth)&&void 0!==e?e:0)/2,w=(null!==(t=k.bandwidth)&&void 0!==t?t:0)/2,{marker:O}=this,M=[],N=h.getFont();for(let{values:e,datum:t}of null!==(i=c.data)&&void 0!==i?i:[]){let i=e[f],s=e[m],n=S.convert(i)+D,r=k.convert(s)+w,a=this.getLabelText(this.label,{value:d?e[v]:s,datum:t,xKey:l,yKey:o,labelKey:d,xName:this.xName,yName:this.yName,labelName:this.labelName}),h=td.getTextSize(a,N),u=x?b.convert(e[y]):void 0;M.push({series:this,itemId:o,yKey:o,xKey:l,datum:t,xValue:i,yValue:s,capDefaults:{lengthRatioMultiplier:this.marker.getDiameter(),lengthMax:1/0},point:{x:n,y:r,size:O.size},midPoint:{x:n,y:r},fill:u,label:Object.assign({text:a},h)})}return[{itemId:null!==(s=this.yKey)&&void 0!==s?s:this.id,nodeData:M,labelData:M,scales:n.calculateScaling.call(this),visible:this.visible}]})}isPathOrSelectionDirty(){return this.marker.isDirty()}getLabelData(){var e;return null===(e=this.contextNodeData)||void 0===e?void 0:e.reduce((e,t)=>e.concat(t.labelData),[])}markerFactory(){let{shape:e}=this.marker;return new(rC(e))}updateMarkerSelection(e){return x(this,void 0,void 0,function*(){let{nodeData:t,markerSelection:i}=e,{marker:{enabled:s}}=this;return this.marker.isDirty()&&(i.clear(),i.cleanup()),i.update(s?t:[])})}updateMarkerNodes(e){return x(this,void 0,void 0,function*(){let{xKey:t="",yKey:i="",labelKey:s,marker:n}=this,{markerSelection:r,isHighlight:a}=e,o=iZ(a&&this.highlightStyle.item,n.getStyle());r.each((e,r)=>{this.updateMarkerStyle(e,n,{datum:r,highlighted:a,xKey:t,yKey:i,labelKey:s},o)}),a||this.marker.markClean()})}updateLabelSelection(e){var t,i;return x(this,void 0,void 0,function*(){let{labelSelection:s}=e,{label:{enabled:n}}=this,r=(n&&null!==(i=null===(t=this.chart)||void 0===t?void 0:t.placeLabels().get(this))&&void 0!==i?i:[]).map(e=>Object.assign(Object.assign({},e.datum),{point:{x:e.x,y:e.y,size:e.datum.point.size}}));return s.update(r)})}updateLabelNodes(e){return x(this,void 0,void 0,function*(){let{labelSelection:t}=e,{label:i}=this;t.each((e,t)=>{var s,n,r,a;e.text=t.label.text,e.fill=i.color,e.x=null!==(n=null===(s=t.point)||void 0===s?void 0:s.x)&&void 0!==n?n:0,e.y=null!==(a=null===(r=t.point)||void 0===r?void 0:r.y)&&void 0!==a?a:0,e.fontStyle=i.fontStyle,e.fontWeight=i.fontWeight,e.fontSize=i.fontSize,e.fontFamily=i.fontFamily,e.textAlign="left",e.textBaseline="top"})})}getTooltipHtml(e){let{xKey:t,yKey:i,axes:s}=this,n=s[tG.X],r=s[tG.Y];if(!t||!i||!n||!r)return"";let{marker:a,tooltip:o,xName:l,yName:h,labelKey:d,labelName:u,id:c,title:p=h}=this,g=iZ({fill:e.fill,strokeWidth:this.getStrokeWidth(a.strokeWidth)},a.getStyle()),{fill:f="gray"}=this.getMarkerStyle(a,{datum:e,highlighted:!1,xKey:t,yKey:i,labelKey:d},g),{datum:m,xValue:y,yValue:v,label:b}=e,x=iQ(n.formatDatum(y)),S=iQ(r.formatDatum(v)),k=`<b>${iQ(null!=l?l:t)}</b>: ${x}<br><b>${iQ(null!=h?h:i)}</b>: ${S}`;return d&&(k=`<b>${iQ(null!=u?u:d)}</b>: ${iQ(b.text)}<br>`+k),o.toTooltipHtml({title:p,content:k,backgroundColor:f},Object.assign({datum:m,xKey:t,xName:l,yKey:i,yName:h,labelKey:d,labelName:u,title:p,color:f,seriesId:c},this.getModuleTooltipParams(m)))}getLegendData(e){var t,i,s,n,r;let{id:a,data:o,xKey:l,yKey:h,yName:d,title:u,visible:c,marker:p}=this,{fill:g,stroke:f,fillOpacity:m,strokeOpacity:y,strokeWidth:v}=p;return(null==o?void 0:o.length)&&l&&h&&"category"===e?[{legendType:"category",id:a,itemId:h,seriesId:a,enabled:c,label:{text:null!==(t=null!=u?u:d)&&void 0!==t?t:h},marker:{shape:p.shape,fill:null!==(s=null!==(i=p.fill)&&void 0!==i?i:g)&&void 0!==s?s:"rgba(0, 0, 0, 0)",stroke:null!==(r=null!==(n=p.stroke)&&void 0!==n?n:f)&&void 0!==r?r:"rgba(0, 0, 0, 0)",fillOpacity:null!=m?m:1,strokeOpacity:null!=y?y:1,strokeWidth:null!=v?v:0}}]:[]}animateEmptyUpdateReady(e){let{markerSelections:t,labelSelections:i,annotationSelections:s}=e;oh(this,this.ctx.animationManager,t),sT(this,"labels",this.ctx.animationManager,i),sT(this,"annotations",this.ctx.animationManager,s)}isLabelEnabled(){return this.label.enabled}nodeFactory(){return new i_}}oU.className="ScatterSeries",oU.type="scatter",v([ea(eS),b("design:type",String)],oU.prototype,"title",void 0),v([ea(eS),b("design:type",String)],oU.prototype,"labelKey",void 0),v([ea(eS),b("design:type",String)],oU.prototype,"xName",void 0),v([ea(eS),b("design:type",String)],oU.prototype,"yName",void 0),v([ea(eS),b("design:type",String)],oU.prototype,"labelName",void 0),v([ea(eS),b("design:type",String)],oU.prototype,"xKey",void 0),v([ea(eS),b("design:type",String)],oU.prototype,"yKey",void 0),v([ea(eS),b("design:type",String)],oU.prototype,"colorKey",void 0),v([ea(eS),b("design:type",String)],oU.prototype,"colorName",void 0),v([ea(eP),b("design:type",Array)],oU.prototype,"colorDomain",void 0),v([ea(eC),b("design:type",Array)],oU.prototype,"colorRange",void 0);let oK={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"scatter",instanceConstructor:oU,seriesDefaults:{axes:[{type:aA.NUMBER,position:aC.BOTTOM},{type:aA.NUMBER,position:aC.LEFT}]},themeTemplate:{__extends__:aK,tooltip:{position:{type:"node"}},marker:{__extends__:aq,fillOpacity:.8},label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:aJ,color:aQ}},enterpriseThemeTemplate:{errorBar:{cap:{lengthRatio:1}}},paletteFactory:aO},oq={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["polar"],identifier:"pie",instanceConstructor:nr,seriesDefaults:{},themeTemplate:{__extends__:aK,title:{enabled:!0,fontStyle:void 0,fontWeight:aN,fontSize:14,fontFamily:aJ,color:a2,spacing:5},calloutLabel:{enabled:!0,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:aJ,color:aQ,offset:3,minAngle:0},sectorLabel:{enabled:!0,fontStyle:void 0,fontWeight:aN,fontSize:12,fontFamily:aJ,color:a1,positionOffset:0,positionRatio:.5},calloutLine:{length:10,strokeWidth:2},fillOpacity:1,strokeOpacity:1,strokeWidth:1,lineDash:[0],lineDashOffset:0,rotation:0,outerRadiusOffset:0,innerRadiusOffset:0,shadow:{enabled:!1,color:a8,xOffset:3,yOffset:3,blur:5},innerLabels:{fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:aJ,color:aQ,margin:2}},paletteFactory:({takeColors:e,colorsCount:t,userPalette:i})=>{let{fills:s,strokes:n}=e(t);return{fills:s,strokes:i?n:[oi],calloutLine:{colors:n}}}};class oZ{constructor(e,t,i,s,n,r,a,o,l,h,d){this.series=e,this.index=t,this.datum=i,this.size=s,this.colorValue=n,this.fill=r,this.stroke=a,this.sumSize=o,this.depth=l,this.parent=h,this.children=d,this.midPoint={x:0,y:0}}contains(e){let t=e;for(;null!=t&&t.index>=this.index;){if(t===this)return!0;t=t.parent}return!1}walk(e,t=oZ.Walk.PreOrder){t===oZ.Walk.PreOrder&&e(this),this.children.forEach(i=>{i.walk(e,t)}),t===oZ.Walk.PostOrder&&e(this)}*[Symbol.iterator](){for(let e of(yield this,this.children))yield*e}}oZ.Walk={PreOrder:0,PostOrder:1};class oJ extends sR{constructor(e){super({moduleCtx:e,pickModes:[tX.EXACT_SHAPE_MATCH],contentGroupVirtual:!1}),this.childrenKey="children",this.sizeKey=void 0,this.colorKey=void 0,this.colorName=void 0,this.fills=Object.values(sp),this.strokes=Object.values(sg),this.colorRange=void 0,this.rootNode=new oZ(this,0,void 0,0,void 0,void 0,void 0,0,void 0,void 0,[]),this.colorDomain=[0,0],this.maxDepth=0,this.animationState=new s4("empty",{empty:{update:{target:"ready",action:e=>this.animateEmptyUpdateReady(e)}},ready:{updateData:"waiting",clear:"clearing",highlight:e=>this.animateReadyHighlight(e),resize:e=>this.animateReadyResize(e)},waiting:{update:{target:"ready",action:e=>this.animateWaitingUpdateReady(e)}},clearing:{update:{target:"empty",action:e=>this.animateClearingUpdateEmpty(e)}}},()=>this.checkProcessedDataAnimatable())}hasData(){return Array.isArray(this.data)&&this.data.length>0}processData(){var e,t;return x(this,void 0,void 0,function*(){let i;let{childrenKey:s,sizeKey:n,colorKey:r,fills:a,strokes:o,colorRange:l}=this,h=0,d=()=>h+=1,u=0,c=1/0,p=-1/0,g=Array((null!==(t=null===(e=this.data)||void 0===e?void 0:e.length)&&void 0!==t?t:0)+1).fill(void 0),f=(e,t)=>{let i=d(),a=null!=t.depth?t.depth+1:0,o=null!=s?e[s]:void 0,l=null==o||0===o.length,h=null!=n?e[n]:void 0,f=h=Number.isFinite(h)?Math.max(h,0):l?1:0;u=Math.max(u,a);let y=null!=r?e[r]:void 0;return"number"==typeof y&&(g[i]=y,c=Math.min(c,y),p=Math.max(p,y)),m(new oZ(this,i,e,h,y,void 0,void 0,f,a,t,[]),o)},m=(e,t)=>(null==t||t.forEach(t=>{let i=f(t,e);e.children.push(i),e.sumSize+=i.sumSize}),e),y=m(new oZ(this,0,void 0,0,void 0,void 0,void 0,0,void 0,void 0,[]),this.data),v=[c,p];null!=l&&Number.isFinite(c)&&Number.isFinite(p)&&((i=new rQ).domain=v,i.range=l,i.update()),y.children.forEach((e,t)=>{e.walk(e=>{let s;let n=g[e.index];null!=n&&(s=null==i?void 0:i.convert(n)),null!=s||(s=null==a?void 0:a[t%a.length]),e.fill=s,e.stroke=null==i?null==o?void 0:o[t%o.length]:"rgba(0, 0, 0, 0.2)"})}),this.rootNode=y,this.maxDepth=u,this.colorDomain=v})}update({seriesRect:e}){return x(this,void 0,void 0,function*(){yield this.updateSelections(),yield this.updateNodes();let t=this.getAnimationData();this.checkResize(e)&&this.animationState.transition("resize",t),this.animationState.transition("update",t)})}resetAllAnimation(e){var t;let i=null===(t=this.animationResetFns)||void 0===t?void 0:t.datum;this.ctx.animationManager.stopByAnimationGroupId(this.id),null!=i&&s5(e.datumSelections,i)}animateEmptyUpdateReady(e){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(e)}animateWaitingUpdateReady(e){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(e)}animateReadyHighlight(e){var t;let i=null===(t=this.animationResetFns)||void 0===t?void 0:t.datum;null!=i&&s5([e],i)}animateReadyResize(e){this.resetAllAnimation(e)}animateClearingUpdateEmpty(e){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(e)}animationTransitionClear(){this.animationState.transition("clear",this.getAnimationData())}getAnimationData(){return{datumSelections:[this.groupSelection]}}isProcessedDataAnimatable(){return!0}checkProcessedDataAnimatable(){this.isProcessedDataAnimatable()||this.ctx.animationManager.skipCurrentBatch()}getLabelData(){return[]}getSeriesDomain(){return[NaN,NaN]}getLegendData(e){return"gradient"===e&&null!=this.colorKey&&null!=this.colorRange?[{legendType:"gradient",enabled:this.visible,seriesId:this.id,colorName:this.colorName,colorDomain:this.colorDomain,colorRange:this.colorRange}]:[]}getDatumIdFromData(e){return`${e.index}`}getDatumId(e){return this.getDatumIdFromData(e)}}v([ea(eS),b("design:type",String)],oJ.prototype,"childrenKey",void 0),v([ea(eS),b("design:type",String)],oJ.prototype,"sizeKey",void 0),v([ea(eS),b("design:type",String)],oJ.prototype,"colorKey",void 0),v([ea(eS),b("design:type",String)],oJ.prototype,"colorName",void 0),v([ea(eA),b("design:type",Array)],oJ.prototype,"fills",void 0),v([ea(eA),b("design:type",Array)],oJ.prototype,"strokes",void 0),v([ea(eA),b("design:type",Array)],oJ.prototype,"colorRange",void 0);class oQ extends n${constructor(){super(...arguments),this.shape="polygon",this.innerRadiusRatio=0,this.defaultTickMinSpacing=20}computeLabelsBBox(e,t){return null}}v([ea(eR(0,1)),b("design:type",Number)],oQ.prototype,"innerRadiusRatio",void 0);let o0={},o1={},o2={},o5={},o3={},o4=new Set,o6=new Set,o8=new Set,o9=new Set,o7={},le={};function lt(e,t,i={}){let s=o2[e];o2[e]=X([s,t]),o5[e]=X([s,t,i])}function li(e){return o4.has(e)}class ls extends rK{constructor(e,t){super(e,t),this._data={}}performLayout(){let e=Object.create(null,{performLayout:{get:()=>super.performLayout}});return x(this,void 0,void 0,function*(){let t=yield e.performLayout.call(this),{seriesArea:{padding:i},seriesRoot:s}=this,n=t.clone();return t.shrink(i.left,"left"),t.shrink(i.top,"top"),t.shrink(i.right,"right"),t.shrink(i.bottom,"bottom"),this.seriesRect=t,this.animationRect=t,this.hoverRect=t,s.translationX=Math.floor(t.x),s.translationY=Math.floor(t.y),yield Promise.all(this.series.map(e=>x(this,void 0,void 0,function*(){yield e.update({seriesRect:t})}))),s.visible=this.series[0].visible,s.setClipRectInGroupCoordinateSpace(new ts(t.x,t.y,t.width,t.height)),this.layoutService.dispatchLayoutComplete({type:"layout-complete",chart:{width:this.scene.width,height:this.scene.height},clipSeries:!1,series:{rect:n,paddedRect:t,visible:!0},axes:[]}),t})}}ls.className="HierarchyChart",ls.type="hierarchy";let ln="white",lr={fills:Array.from(Object.values(sp)),strokes:Array.from(Object.values(sg))},la={get cartesian(){return{seriesTypes:aT.cartesianTypes,commonOptions:["zoom","navigator"]}},get polar(){return{seriesTypes:aT.polarTypes,commonOptions:[]}},get hierarchy(){return{seriesTypes:aT.hierarchyTypes,commonOptions:[]}}},lo=Object.values(la).reduce((e,{commonOptions:t})=>[...e,...t],[]);class ll{getPalette(){return lr}static getAxisDefaults(){return{top:{},right:{},bottom:{},left:{},title:{enabled:!1,text:"Axis Title",spacing:25,fontStyle:void 0,fontWeight:aN,fontSize:aM.MEDIUM,fontFamily:aJ,color:aQ},label:{fontStyle:void 0,fontWeight:void 0,fontSize:aM.SMALL,fontFamily:aJ,padding:5,rotation:void 0,color:aQ,formatter:void 0,avoidCollisions:!0},line:{enabled:!0,width:1,color:a3},tick:{enabled:!1,width:1,color:a3},gridLine:{enabled:!0,style:[{stroke:a5,lineDash:[]}]},crossLines:{enabled:!1,fill:a4,stroke:a4,fillOpacity:.1,strokeWidth:1,label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:aM.SMALL,fontFamily:aJ,padding:5,color:aQ}}}}static getSeriesDefaults(){return{tooltip:{enabled:!0,renderer:void 0},visible:!0,showInLegend:!0,highlightStyle:{item:{fill:"rgba(255,255,255, 0.33)",stroke:"rgba(0, 0, 0, 0.4)",strokeWidth:2},series:{dimOpacity:1},text:{color:"black"}},nodeClickRange:"exact"}}static getCartesianSeriesMarkerDefaults(){return{enabled:!0,shape:"circle",size:7,strokeWidth:1,formatter:void 0}}static getLegendItemMarkerDefaults(){return{shape:void 0,size:15,padding:8}}static getCaptionWrappingDefaults(){return"hyphenate"}static getChartDefaults(){return{background:{visible:!0,fill:a6},padding:{top:20,right:20,bottom:20,left:20},title:{enabled:!1,text:"Title",fontStyle:void 0,fontWeight:aN,fontSize:aM.LARGE,fontFamily:aJ,color:aQ,wrapping:ll.getCaptionWrappingDefaults()},subtitle:{enabled:!1,text:"Subtitle",spacing:20,fontStyle:void 0,fontWeight:void 0,fontSize:aM.MEDIUM,fontFamily:aJ,color:a2,wrapping:ll.getCaptionWrappingDefaults()},footnote:{enabled:!1,text:"Footnote",spacing:20,fontStyle:void 0,fontWeight:void 0,fontSize:aM.MEDIUM,fontFamily:aJ,color:"rgb(140, 140, 140)",wrapping:ll.getCaptionWrappingDefaults()},legend:{position:aE,spacing:30,listeners:{},item:{paddingX:16,paddingY:8,marker:ll.getLegendItemMarkerDefaults(),label:{color:aQ,fontStyle:void 0,fontWeight:void 0,fontSize:aM.SMALL,fontFamily:aJ,formatter:void 0}},reverseOrder:!1,pagination:{marker:{size:12},activeStyle:{fill:aQ},inactiveStyle:{fill:a2},highlightStyle:{fill:aQ},label:{color:aQ}}},tooltip:{enabled:!0,range:"nearest",delay:0},listeners:{}}}constructor(e){let{overrides:t=null,palette:i=null}=e=iH({},null!=e?e:{}),s=this.createChartConfigPerChartType(this.getDefaults());if(t){let{common:e}=t,i=(e,t)=>{if(t)for(let i of e)s[i]=iH(s[i],t)};for(let[,{seriesTypes:t,commonOptions:s}]of Object.entries(la)){let n=Object.assign({},e);for(let e of lo)s.includes(e)||delete n[e];i(t,n)}aT.seriesTypes.forEach(e=>{t[e]&&(s[e]=iH(s[e],t[e]))})}this.palette=null!=i?i:this.getPalette(),this.config=Object.freeze(this.templateTheme(s))}createChartConfigPerChartType(e){return Object.entries(la).forEach(([t,{seriesTypes:i}])=>{let s=aI(t);i.forEach(t=>{e[t]||(e[t]={},iH(e[t],s))})}),e}getDefaults(){let e={},t=e=>Object.assign(Object.assign(Object.assign({},ap),ll.getChartDefaults()),aI(e)),i=(e,i)=>{var s,n,r,a;let o=t(e),l={};for(let t of i){null!==(s=l[t])&&void 0!==s||(l[t]=iH({},o));let i=null!==(n=(a=l[t]).axes)&&void 0!==n?n:a.axes={},h=O()?o5[t]:o2[t];for(let s of(h&&(l[t].series=iH(l[t].series,h)),ao.axesTypes)){let t=function(e){var t;return null!==(t=al[e])&&void 0!==t?t:{}}(s);"cartesian"===e&&(i[s]=iH(i[s],null!==(r=ll.cartesianAxisDefault[s])&&void 0!==r?r:{})),t&&(i[s]=iH(i[s],t))}}return l};return e=iH(e,i("cartesian",aT.cartesianTypes)),e=iH(e,i("polar",aT.polarTypes)),e=iH(e,i("hierarchy",aT.hierarchyTypes))}templateTheme(e){let t=X([e]),{extensions:i,properties:s}=this.getTemplateParameters();return U(t,(e,t)=>{if(t.__extends__){let e=t.__extends__,s=i.get(e);if(null==s)throw Error("AG Charts - no template variable provided for: "+e);Object.keys(s).forEach(e=>{e in t||(t[e]=s[e])}),delete t.__extends__}if(t.__overrides__){let e=t.__overrides__,s=i.get(e);if(null==s)throw Error("AG Charts - no template variable provided for: "+e);Object.assign(t,s),delete t.__overrides__}if(Array.isArray(t))for(let e=0;e<t.length;e++){let i=t[e];s.has(i)&&(t[e]=s.get(i))}else for(let[e,i]of Object.entries(t))s.has(i)&&(t[e]=s.get(i))}),t}static getWaterfallSeriesDefaultPositiveColors(){return{fill:sp.BLUE,stroke:sg.BLUE}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:sp.ORANGE,stroke:sg.ORANGE}}static getWaterfallSeriesDefaultTotalColors(){return{fill:sp.GRAY,stroke:sg.GRAY}}getTemplateParameters(){let e=new Map;e.set(aG,ll.getChartDefaults()),e.set(aV,ll.getAxisDefaults()),e.set(az,ll.getChartDefaults().legend),e.set(aW,ll.getChartDefaults().legend.item),e.set(aY,ll.getLegendItemMarkerDefaults()),e.set(a$,ll.getAxisDefaults().label),e.set(aX,ll.getAxisDefaults().line),e.set(aH,ll.getAxisDefaults().tick),e.set(aU,ll.getAxisDefaults().gridLine),e.set(aK,ll.getSeriesDefaults()),e.set(aZ,{}),e.set(aq,ll.getCartesianSeriesMarkerDefaults());let t=new Map;return t.set(aJ,"Verdana, sans-serif"),t.set(aQ,"rgb(70, 70, 70)"),t.set(a0,"white"),t.set(a2,"rgb(140, 140, 140)"),t.set(a5,"rgb(224,234,241)"),t.set(a3,"rgb(195, 195, 195)"),t.set(a4,"rgb(70, 70, 70)"),t.set(a1,ln),t.set(a6,ln),t.set(a8,"rgba(0, 0, 0, 0.5)"),t.set(os,[sp.ORANGE,sp.YELLOW,sp.GREEN]),t.set(on,["#ffffff","#e0e5ea","#c1ccd5","#a3b4c1","#859cad"]),t.set(or,["#ffffff","#c5cbd1","#a4b1bd","#8498a9","#648096"]),t.set(oi,ln),t.set(a9,ll.getWaterfallSeriesDefaultPositiveColors()),t.set(a7,ll.getWaterfallSeriesDefaultNegativeColors()),t.set(oe,ll.getWaterfallSeriesDefaultTotalColors()),t.set(ot,ll.getWaterfallSeriesDefaultTotalColors().stroke),{extensions:e,properties:t}}}ll.cartesianAxisDefault={number:Object.assign(Object.assign({},ll.getAxisDefaults()),{line:Object.assign(Object.assign({},ll.getAxisDefaults().line),{enabled:!1})}),log:Object.assign(Object.assign({},ll.getAxisDefaults()),{base:10,line:Object.assign(Object.assign({},ll.getAxisDefaults().line),{enabled:!1})}),category:Object.assign(Object.assign({},ll.getAxisDefaults()),{groupPaddingInner:.1,label:Object.assign(Object.assign({},ll.getAxisDefaults().label),{autoRotate:!0}),gridLine:Object.assign(Object.assign({},ll.getAxisDefaults().gridLine),{enabled:!1})}),"grouped-category":Object.assign({},ll.getAxisDefaults()),time:Object.assign(Object.assign({},ll.getAxisDefaults()),{gridLine:Object.assign(Object.assign({},ll.getAxisDefaults().gridLine),{enabled:!1})})};let lh="#182732",ld={BLUE:"#5090dc",ORANGE:"#ffa03a",GREEN:"#459d55",CYAN:"#34bfe1",YELLOW:"#e1cc00",VIOLET:"#9669cb",GRAY:"#b5b5b5",MAGENTA:"#bd5aa7",BROWN:"#8a6224",RED:"#ef5452"},lu={BLUE:"#74a8e6",ORANGE:"#ffbe70",GREEN:"#6cb176",CYAN:"#75d4ef",YELLOW:"#f6e559",VIOLET:"#aa86d8",GRAY:"#a1a1a1",MAGENTA:"#ce7ab9",BROWN:"#997b52",RED:"#ff7872"},lc={fills:Array.from(Object.values(ld)),strokes:Array.from(Object.values(lu))};class lp extends ll{static getWaterfallSeriesDefaultPositiveColors(){return{fill:ld.BLUE,stroke:lu.BLUE}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:ld.ORANGE,stroke:lu.ORANGE}}static getWaterfallSeriesDefaultTotalColors(){return{fill:ld.GRAY,stroke:lu.GRAY}}getTemplateParameters(){let e=super.getTemplateParameters();return e.properties.set(a9,lp.getWaterfallSeriesDefaultPositiveColors()),e.properties.set(a7,lp.getWaterfallSeriesDefaultNegativeColors()),e.properties.set(oe,lp.getWaterfallSeriesDefaultTotalColors()),e.properties.set(ot,lp.getWaterfallSeriesDefaultTotalColors().stroke),e.properties.set(oi,lh),e.properties.set(aQ,"white"),e.properties.set(a2,"#7D91A0"),e.properties.set(a5,"#545A6E"),e.properties.set(a4,"white"),e.properties.set(os,[ld.ORANGE,ld.YELLOW,ld.GREEN]),e.properties.set(on,["#192834","#253746","#324859","#3f596c","#4d6a80"]),e.properties.set(or,["#192834","#3b5164","#496275","#577287","#668399"]),e.properties.set(a6,lh),e.properties.set(a1,lh),e}getPalette(){return lc}constructor(e){super(e)}}let lg={BLUE:"#2196F3",ORANGE:"#FF9800",GREEN:"#4CAF50",CYAN:"#00BCD4",YELLOW:"#FFEB3B",VIOLET:"#7E57C2",GRAY:"#9E9E9E",MAGENTA:"#F06292",BROWN:"#795548",RED:"#F44336"},lf={BLUE:"#90CAF9",ORANGE:"#FFCC80",GREEN:"#A5D6A7",CYAN:"#80DEEA",YELLOW:"#FFF9C4",VIOLET:"#B39DDB",GRAY:"#E0E0E0",MAGENTA:"#F48FB1",BROWN:"#A1887F",RED:"#EF9A9A"},lm={fills:Array.from(Object.values(lg)),strokes:Array.from(Object.values(lf))};class ly extends lp{static getWaterfallSeriesDefaultPositiveColors(){return{fill:lg.BLUE,stroke:lf.BLUE}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:lg.RED,stroke:lf.RED}}static getWaterfallSeriesDefaultTotalColors(){return{fill:lg.GRAY,stroke:lf.GRAY}}getTemplateParameters(){let e=super.getTemplateParameters();return e.properties.set(a9,ly.getWaterfallSeriesDefaultPositiveColors()),e.properties.set(a7,ly.getWaterfallSeriesDefaultNegativeColors()),e.properties.set(oe,ly.getWaterfallSeriesDefaultTotalColors()),e.properties.set(os,[lg.ORANGE,lg.YELLOW,lg.GREEN]),e.properties.set(ot,ly.getWaterfallSeriesDefaultTotalColors().stroke),e}getPalette(){return lm}}let lv={BLUE:"#2196F3",ORANGE:"#FF9800",GREEN:"#4CAF50",CYAN:"#00BCD4",YELLOW:"#FFEB3B",VIOLET:"#7E57C2",GRAY:"#9E9E9E",MAGENTA:"#F06292",BROWN:"#795548",RED:"#F44336"},lb={BLUE:"#1565C0",ORANGE:"#E65100",GREEN:"#2E7D32",CYAN:"#00838F",YELLOW:"#F9A825",VIOLET:"#4527A0",GRAY:"#616161",MAGENTA:"#C2185B",BROWN:"#4E342E",RED:"#B71C1C"},lx={fills:Array.from(Object.values(lv)),strokes:Array.from(Object.values(lb))};class lS extends ll{static getWaterfallSeriesDefaultPositiveColors(){return{fill:lv.BLUE,stroke:lb.BLUE}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:lv.RED,stroke:lb.RED}}static getWaterfallSeriesDefaultTotalColors(){return{fill:lv.GRAY,stroke:lb.GRAY}}getTemplateParameters(){let e=super.getTemplateParameters();return e.properties.set(a9,lS.getWaterfallSeriesDefaultPositiveColors()),e.properties.set(a7,lS.getWaterfallSeriesDefaultNegativeColors()),e.properties.set(oe,lS.getWaterfallSeriesDefaultTotalColors()),e.properties.set(os,[lv.ORANGE,lv.YELLOW,lv.GREEN]),e.properties.set(ot,lS.getWaterfallSeriesDefaultTotalColors().stroke),e}getPalette(){return lx}}let lk={BLUE:"#436ff4",PURPLE:"#9a7bff",MAGENTA:"#d165d2",PINK:"#f0598b",RED:"#f47348",ORANGE:"#f2a602",YELLOW:"#e9e201",GREEN:"#21b448",CYAN:"#00b9a2",MODERATE_BLUE:"#00aee4"},lD={BLUE:"#6698ff",PURPLE:"#c0a3ff",MAGENTA:"#fc8dfc",PINK:"#ff82b1",RED:"#ff9b70",ORANGE:"#ffcf4e",YELLOW:"#ffff58",GREEN:"#58dd70",CYAN:"#51e2c9",MODERATE_BLUE:"#4fd7ff"},lw={fills:Array.from(Object.values(lk)),strokes:Array.from(Object.values(lD))};class lO extends lp{static getWaterfallSeriesDefaultPositiveColors(){return{fill:lk.BLUE,stroke:lD.BLUE}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:lk.RED,stroke:lD.RED}}static getWaterfallSeriesDefaultTotalColors(){return{fill:"#bbbbbb",stroke:"#eeeeee"}}getTemplateParameters(){let e=super.getTemplateParameters();return e.properties.set(a9,lO.getWaterfallSeriesDefaultPositiveColors()),e.properties.set(a7,lO.getWaterfallSeriesDefaultNegativeColors()),e.properties.set(oe,lO.getWaterfallSeriesDefaultTotalColors()),e.properties.set(os,[lk.BLUE,lk.RED]),e.properties.set(ot,lO.getWaterfallSeriesDefaultTotalColors().stroke),e}getPalette(){return lw}}let lM={BLUE:"#436ff4",PURPLE:"#9a7bff",MAGENTA:"#d165d2",PINK:"#f0598b",RED:"#f47348",ORANGE:"#f2a602",YELLOW:"#e9e201",GREEN:"#21b448",CYAN:"#00b9a2",MODERATE_BLUE:"#00aee4"},lN={BLUE:"#2346c9",PURPLE:"#7653d4",MAGENTA:"#a73da9",PINK:"#c32d66",RED:"#c84b1c",ORANGE:"#c87f00",YELLOW:"#c1b900",GREEN:"#008c1c",CYAN:"#00927c",MODERATE_BLUE:"#0087bb"},lE={fills:Array.from(Object.values(lM)),strokes:Array.from(Object.values(lN))};class lC extends ll{static getWaterfallSeriesDefaultPositiveColors(){return{fill:lM.BLUE,stroke:lN.BLUE}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:lM.RED,stroke:lN.RED}}static getWaterfallSeriesDefaultTotalColors(){return{fill:"#bbbbbb",stroke:"#888888"}}getTemplateParameters(){let e=super.getTemplateParameters();return e.properties.set(a9,lC.getWaterfallSeriesDefaultPositiveColors()),e.properties.set(a7,lC.getWaterfallSeriesDefaultNegativeColors()),e.properties.set(oe,lC.getWaterfallSeriesDefaultTotalColors()),e.properties.set(os,[lM.BLUE,lM.RED]),e.properties.set(ot,lC.getWaterfallSeriesDefaultTotalColors().stroke),e}getPalette(){return lE}}let lA={BLUE:"#4472C4",ORANGE:"#ED7D31",GRAY:"#A5A5A5",YELLOW:"#FFC000",MODERATE_BLUE:"#5B9BD5",GREEN:"#70AD47",DARK_GRAY:"#7B7B7B",DARK_BLUE:"#264478",VERY_DARK_GRAY:"#636363",DARK_YELLOW:"#997300"},lL={BLUE:"#6899ee",ORANGE:"#ffa55d",GRAY:"#cdcdcd",YELLOW:"#ffea53",MODERATE_BLUE:"#82c3ff",GREEN:"#96d56f",DARK_GRAY:"#a1a1a1",DARK_BLUE:"#47689f",VERY_DARK_GRAY:"#878787",DARK_YELLOW:"#c0993d"},lR={fills:Array.from(Object.values(lA)),strokes:Array.from(Object.values(lL))};class lT extends lp{static getWaterfallSeriesDefaultPositiveColors(){return{fill:lA.BLUE,stroke:lL.BLUE}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:lA.ORANGE,stroke:lL.ORANGE}}static getWaterfallSeriesDefaultTotalColors(){return{fill:lA.GRAY,stroke:lL.GRAY}}getTemplateParameters(){let e=super.getTemplateParameters();return e.properties.set(a9,lT.getWaterfallSeriesDefaultPositiveColors()),e.properties.set(a7,lT.getWaterfallSeriesDefaultNegativeColors()),e.properties.set(oe,lT.getWaterfallSeriesDefaultTotalColors()),e.properties.set(os,[lA.ORANGE,lA.YELLOW,lA.GREEN]),e.properties.set(ot,lT.getWaterfallSeriesDefaultTotalColors().stroke),e}getPalette(){return lR}}let lI={BLUE:"#5281d5",ORANGE:"#ff8d44",GRAY:"#b5b5b5",YELLOW:"#ffd02f",MODERATE_BLUE:"#6aabe6",GREEN:"#7fbd57",DARK_GRAY:"#8a8a8a",DARK_BLUE:"#335287",VERY_DARK_GRAY:"#717171",DARK_YELLOW:"#a98220"},l_={BLUE:"#214d9b",ORANGE:"#c25600",GRAY:"#7f7f7f",YELLOW:"#d59800",MODERATE_BLUE:"#3575ac",GREEN:"#4b861a",DARK_GRAY:"#575757",DARK_BLUE:"#062253",VERY_DARK_GRAY:"#414141",DARK_YELLOW:"#734f00"},lP={fills:Array.from(Object.values(lI)),strokes:Array.from(Object.values(l_))};class lB extends ll{static getWaterfallSeriesDefaultPositiveColors(){return{fill:lI.BLUE,stroke:l_.BLUE}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:lI.ORANGE,stroke:l_.ORANGE}}static getWaterfallSeriesDefaultTotalColors(){return{fill:lI.GRAY,stroke:l_.GRAY}}getTemplateParameters(){let e=super.getTemplateParameters();return e.properties.set(a9,lB.getWaterfallSeriesDefaultPositiveColors()),e.properties.set(a7,lB.getWaterfallSeriesDefaultNegativeColors()),e.properties.set(oe,lB.getWaterfallSeriesDefaultTotalColors()),e.properties.set(os,[lI.ORANGE,lI.YELLOW,lI.GREEN]),e.properties.set(ot,lB.getWaterfallSeriesDefaultTotalColors().stroke),e}getPalette(){return lP}}let lF={BLUE:"#0083ff",ORANGE:"#ff6600",GREEN:"#00af00",CYAN:"#00ccff",YELLOW:"#f7c700",VIOLET:"#ac26ff",GRAY:"#a7a7b7",MAGENTA:"#e800c5",BROWN:"#b54300",RED:"#ff0000"},lj={BLUE:"#67b7ff",ORANGE:"#ffc24d",GREEN:"#5cc86f",CYAN:"#54ebff",VIOLET:"#c18aff",YELLOW:"#fff653",GRAY:"#aeaeae",MAGENTA:"#f078d4",BROWN:"#ba8438",RED:"#ff726e"},lG={fills:Array.from(Object.values(lF)),strokes:Array.from(Object.values(lj))};class lz extends lp{static getWaterfallSeriesDefaultPositiveColors(){return{fill:lF.BLUE,stroke:lj.BLUE}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:lF.ORANGE,stroke:lj.ORANGE}}static getWaterfallSeriesDefaultTotalColors(){return{fill:lF.GRAY,stroke:lj.GRAY}}getTemplateParameters(){let e=super.getTemplateParameters();return e.properties.set(a9,lz.getWaterfallSeriesDefaultPositiveColors()),e.properties.set(a7,lz.getWaterfallSeriesDefaultNegativeColors()),e.properties.set(oe,lz.getWaterfallSeriesDefaultTotalColors()),e.properties.set(os,[lF.ORANGE,lF.YELLOW,lF.GREEN]),e.properties.set(ot,lz.getWaterfallSeriesDefaultTotalColors().stroke),e}getPalette(){return lG}}let lW={BLUE:"#0083ff",ORANGE:"#ff6600",GREEN:"#00af00",CYAN:"#00ccff",YELLOW:"#f7c700",VIOLET:"#ac26ff",GRAY:"#a7a7b7",MAGENTA:"#e800c5",BROWN:"#b54300",RED:"#ff0000"},lY={BLUE:"#0f68c0",ORANGE:"#d47100",GREEN:"#007922",CYAN:"#009ac2",VIOLET:"#bca400",YELLOW:"#753cac",GRAY:"#646464",MAGENTA:"#9b2685",BROWN:"#6c3b00",RED:"#cb0021"},lV={fills:Array.from(Object.values(lW)),strokes:Array.from(Object.values(lY))};class l$ extends ll{static getWaterfallSeriesDefaultPositiveColors(){return{fill:lW.BLUE,stroke:lY.BLUE}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:lW.ORANGE,stroke:lY.ORANGE}}static getWaterfallSeriesDefaultTotalColors(){return{fill:lW.GRAY,stroke:lY.GRAY}}getTemplateParameters(){let e=super.getTemplateParameters();return e.properties.set(a9,l$.getWaterfallSeriesDefaultPositiveColors()),e.properties.set(a7,l$.getWaterfallSeriesDefaultNegativeColors()),e.properties.set(oe,l$.getWaterfallSeriesDefaultTotalColors()),e.properties.set(os,[lW.ORANGE,lW.YELLOW,lW.GREEN]),e.properties.set(ot,l$.getWaterfallSeriesDefaultTotalColors().stroke),e}getPalette(){return lV}}let lX=()=>new ll,lH=()=>new lp,lU=Object.assign(Object.assign({},{undefined:lH,null:lH,"ag-default-dark":lH,"ag-sheets-dark":()=>new lT,"ag-polychroma-dark":()=>new lO,"ag-vivid-dark":()=>new lz,"ag-material-dark":()=>new ly}),{undefined:lX,null:lX,"ag-default":lX,"ag-sheets":()=>new lB,"ag-polychroma":()=>new lC,"ag-vivid":()=>new l$,"ag-material":()=>new lS});function lK(e,t,i){let s=[];for(let n=0;n<i;n++)s.push(t[(n+e.colourIndex)%t.length]);return s}let lq={avoidDeepClone:["data"]};class lZ extends rK{constructor(e,t){super(e,t),this.padding=new nR(40),this.axisGroup.zIndex=t$.AXIS_FOREGROUND_ZINDEX}performLayout(){let e=Object.create(null,{performLayout:{get:()=>super.performLayout}});return x(this,void 0,void 0,function*(){let t=yield e.performLayout.call(this),i=t.clone();return this.computeSeriesRect(t),yield this.computeCircle(t),this.axes.forEach(e=>e.update()),this.hoverRect=t,this.layoutService.dispatchLayoutComplete({type:"layout-complete",chart:{width:this.scene.width,height:this.scene.height},clipSeries:!1,series:{rect:i,paddedRect:t,visible:!0},axes:[]}),t})}updateAxes(e,t,i){var s,n;let r=this.axes.find(e=>e.direction===tG.X),a=this.axes.find(e=>e.direction===tG.Y);if(!(r instanceof oQ)||!(a instanceof oQ))return;let o=r.scale,l=null===(s=o.ticks)||void 0===s?void 0:s.call(o).map(e=>o.convert(e)),h=a.innerRadiusRatio;r.innerRadiusRatio=h,null===(n=r.computeRange)||void 0===n||n.call(r),r.gridLength=i,a.gridAngles=l,a.gridRange=r.range,a.range=[i,i*h],[r,a].forEach(i=>{i.translation.x=e,i.translation.y=t,i.calculateLayout()})}computeSeriesRect(e){let{seriesArea:{padding:t}}=this;e.shrink(t.left,"left"),e.shrink(t.top,"top"),e.shrink(t.right,"right"),e.shrink(t.bottom,"bottom"),this.seriesRect=e,this.animationRect=e}computeCircle(e){return x(this,void 0,void 0,function*(){let t=this.series.filter(e=>e instanceof s8),i=this.axes.filter(e=>e instanceof oQ),s=(e,i,s)=>{this.updateAxes(e,i,s),t.forEach(t=>{t.centerX=e,t.centerY=i,t.radius=s});let n=t.filter(e=>e instanceof nr);if(n.length>1){let e=n.map(e=>{let t=e.getInnerRadius();return{series:e,innerRadius:t}}).sort((e,t)=>e.innerRadius-t.innerRadius);e[e.length-1].series.surroundingRadius=void 0;for(let t=0;t<e.length-1;t++)e[t].series.surroundingRadius=e[t+1].innerRadius}},n=e.x+e.width/2,r=e.y+e.height/2,a=Math.max(0,Math.min(e.width,e.height)/2),o=a;s(n,r,o);let l=({hideWhenNecessary:l=!1}={})=>x(this,void 0,void 0,function*(){let h=[];for(let s of[...i,...t]){let t=yield s.computeLabelsBBox({hideWhenNecessary:l},e);t&&h.push(t)}if(0===h.length){s(n,r,a);return}let d=ts.merge(h),u=this.refineCircle(d,o,e);s(u.centerX,u.centerY,u.radius),u.radius!==o&&(o=u.radius)});return yield l(),yield l(),yield l(),yield l({hideWhenNecessary:!0}),yield l({hideWhenNecessary:!0}),{radius:o,centerX:n,centerY:r}})}refineCircle(e,t,i){let s=Math.max(0,-t-e.x),n=Math.max(0,-t-e.y),r=Math.max(0,e.x+e.width-t),a=Math.max(0,e.y+e.height-t);s=r=Math.max(s,r),n=a=Math.max(n,a);let o=Math.min(i.width-s-r,i.height-n-a)/2,l=Math.min(.5*i.width/2,.5*i.height/2);if(o<l){let e=s+r,t=n+a;if(2*(o=l)+t>i.height){let e=i.height-2*o;2*Math.min(n,a)>e?(n=e/2,a=e/2):n>a?n=e-a:a=e-n}if(2*o+e>i.width){let e=i.width-2*o;2*Math.min(s,r)>e?(s=e/2,r=e/2):s>r?s=e-r:r=e-s}}let h=s+2*o+r,d=n+2*o+a;return{centerX:i.x+(i.width-h)/2+s+o,centerY:i.y+(i.height-d)/2+n+o,radius:o}}}lZ.className="PolarChart",lZ.type="polar";let lJ=B.create(!0,"opts");function lQ(e){if(aP(e))return"cartesian";if(aF(e))return"polar";if(aB(e))return"hierarchy";throw Error(`AG Chart - unknown type of chart for options with type: ${e.type}`)}class l0{static licenseCheck(e){var t,i,s;this.licenseChecked||(this.licenseManager=null===(t=S.licenseManager)||void 0===t?void 0:t.call(S,e),null===(i=this.licenseManager)||void 0===i||i.setLicenseKey(this.licenseKey),null===(s=this.licenseManager)||void 0===s||s.validateLicense(),this.licenseChecked=!0)}static setLicenseKey(e){this.licenseKey=e}static create(e){var t,i,s;this.licenseCheck(e);let n=l1.createOrUpdate(e);return(null===(t=this.licenseManager)||void 0===t?void 0:t.isDisplayWatermark())&&(null===(i=S.injectWatermark)||void 0===i||i.call(S,null!==(s=e.document)&&void 0!==s?s:document,n.chart.element,this.licenseManager.getWatermarkMessage())),n}static update(e,t){if(!r7.isInstance(e))throw Error(l0.INVALID_CHART_REF_MESSAGE);l1.createOrUpdate(t,e)}static updateDelta(e,t){if(!r7.isInstance(e))throw Error(l0.INVALID_CHART_REF_MESSAGE);l1.updateUserDelta(e,t)}static download(e,t){if(!(e instanceof r7))throw Error(l0.INVALID_CHART_REF_MESSAGE);l1.download(e,t)}static getImageDataURL(e,t){if(!(e instanceof r7))throw Error(l0.INVALID_CHART_REF_MESSAGE);return l1.getImageDataURL(e,t)}}l0.INVALID_CHART_REF_MESSAGE="AG Charts - invalid chart reference passed",l0.licenseChecked=!1;class l1{static initialiseModules(){l1.initialised||(w(af),w(aD),w(oA),w(oB),w(oz),w(oH),w(oK),w(oq),w(o$),function(){var e,t,i,s,n,r,a,o,l,h;for(let d of D){if("enterprise"===d.packageType&&!function(e){var t;if("enterprise"!==e.packageType)throw Error("AG Charts - internal configuration error, only enterprise modules need verification.");let i=ah.find(t=>t.type===e.type&&t.optionsKey===e.optionsKey&&t.identifier===e.identifier&&e.chartTypes.every(e=>t.chartTypes.includes(e)));return i&&(null!==(t=i.useCount)&&void 0!==t||(i.useCount=0),i.useCount++),null!=i}(d)&&T.errorOnce("Unexpected enterprise module registered: "+d.identifier),null!=na.constructors&&null!=d.optionConstructors&&Object.assign(na.constructors,d.optionConstructors),"root"===d.type&&d.themeTemplate)for(let e of d.chartTypes)!function(e,t){var i;aR[e]=X([null!==(i=aR[e])&&void 0!==i?i:{},t])}(e,d.themeTemplate);if("root"===d.type&&(null===(e=d.conflicts)||void 0===e?void 0:e.length)&&(t=d.optionsKey,i=d.conflicts,M.set(t,i)),"series"===d.type){if(d.chartTypes.length>1)throw Error("AG Charts - Module definition error: "+d.identifier);!function(e,t,i,s,n,r,a,o,l,h,d,u,c){o0[e]=i,o1[e]=s,lt(e,n,r),a&&(o3[e]=a),o&&o4.add(e),l&&o6.add(e),h&&o8.add(e),d&&o9.add(e),u&&(o7[e]=u),c&&(le[e]=c),aL[e]=t}(d.identifier,d.chartTypes[0],d.instanceConstructor,d.seriesDefaults,d.themeTemplate,d.enterpriseThemeTemplate,d.paletteFactory,d.solo,d.stackable,d.groupable,d.stackedByDefault,d.swapDefaultAxesCondition,d.customDefaultsFunction)}if("series-option"===d.type&&d.themeTemplate)for(let e of d.seriesTypes)lt(e,d.themeTemplate);if("axis-option"===d.type&&d.themeTemplate)for(let e of d.axisTypes){let t=d.themeTemplate[e],i=Object.assign(Object.assign({},d.themeTemplate),"object"==typeof t?t:{});for(let e of d.axisTypes)delete i[e];al[e]=i}"axis"===d.type&&(s=d.identifier,n=d.instanceConstructor,aa[s]=n,d.themeTemplate&&(r=d.identifier,a=d.themeTemplate,al[r]=a)),"legend"===d.type&&(o=d.identifier,l=d.optionsKey,d.instanceConstructor,h=d.themeTemplate,ac[o]=l,ap[l]=h)}if(O()){let e=ah.filter(({useCount:e})=>null==e||0===e);e.length>0&&T.errorOnce("Enterprise modules expected but not registered: ",e)}}(),l1.initialised=!0)}static createOrUpdate(e,t){var i,s;l1.initialiseModules(),lJ(">>> AgChartV2.createOrUpdate() user options",e);let{overrideDevicePixelRatio:n,document:r,window:a}=e,o=y(e,["overrideDevicePixelRatio","document","window"]),l=function(e){var t,i,s,n,r;r=e,Object.entries({yKeys:"yKey",yNames:"yName"}).forEach(([e,t])=>{var i;(null===(i=r.series)||void 0===i?void 0:i.some(t=>null!=t[e]))&&T.warnOnce(`Property [series.${e}] is deprecated, please use [series.${t}] and multiple series instead.`)});let a=a_(e),o=function(e){if(void 0===e||"object"!=typeof e||null===e)return{};let{type:t,xOffset:i,yOffset:s}=e,n={};return"string"==typeof t&&["pointer","node"].includes(t)&&(n.type=t),"number"==typeof i&&!isNaN(i)&&isFinite(i)&&(n.xOffset=i),"number"==typeof s&&!isNaN(s)&&isFinite(s)&&(n.yOffset=s),n}(null===(t=e.tooltip)||void 0===t?void 0:t.position),l=e=>{if(null!=e&&!(null!=e&&aT.has(e)||ad(e)||o1[e]))throw Error(`AG Charts - unknown series type: ${e}; expected one of: ${aT.seriesTypes}`)};for(let{type:t}of(l(a),null!==(i=e.series)&&void 0!==i?i:[]))null!=t&&l(t);e=function(e){if(void 0===e.series||e.series.length<=1||!function(e){for(let t of e)if(li(t.type))return!0;return!1}(e.series))return e;let t=[...e.series];if(li(t[0].type))T.warn(`series[0] of type '${t[0].type}' is incompatible with other series types. Only processing series[0]`),t=t.slice(0,1);else{let e=Array.from(new Set(t.filter(e=>li(e.type)).map(e=>e.type)));T.warnOnce(`Unable to mix these series types with the lead series type: ${e}`),t=t.filter(e=>!li(e.type))}return Object.assign(Object.assign({},e),{series:t})}(Object.assign(Object.assign({},e),{type:a}));let h="line";aP(e)?h="line":aB(e)?h="treemap":aF(e)&&(h="pie");let d=o1[a];(function(e){var t,i;let s;for(let n of null!==(t=e.series)&&void 0!==t?t:[]){let{type:e="line"}=n,t=null===(i=o7[e])||void 0===i?void 0:i.call(o7,n);if(null!=t){if(null!=s&&s!=t)throw Error("AG Charts - The provided series have incompatible directions");s=t}}return s})(e)&&(d=function(e){var t;if(!aP(e))return e;let[i,s]=null!==(t=e.axes)&&void 0!==t?t:[];return Object.assign(Object.assign({},e),{axes:[Object.assign(Object.assign({},i),{position:s.position}),Object.assign(Object.assign({},s),{position:i.position})]})}(d)),d=function(e,t){var i;let s=t;for(let t of null!==(i=e.series)&&void 0!==i?i:[]){let{type:e}=t,i=null!=e?le[e]:void 0;void 0!==i&&(s=Object.assign(Object.assign({},s),i(t)))}return s}(e,d);let u=function(e){var t,i,s,n;let r={};for(let[a,o]of M.entries())if(null!=e[a]&&o.length)for(let l of(null!==(t=r[a])&&void 0!==t||(r[a]={}),o))(null===(i=e[a])||void 0===i?void 0:i.enabled)&&(null===(s=e[l])||void 0===s?void 0:s.enabled)?(T.warnOnce(`the [${a}] module can not be used at the same time as [${l}], it will be disabled.`),r[a].enabled=!1):r[a].enabled=null===(n=e[a])||void 0===n?void 0:n.enabled;return r}(e);U(e,(e,t)=>{!1===t.enabled&&Object.keys(t).forEach(e=>{"enabled"!==e&&delete t[e]})},{skip:["data","theme"]});let{context:c,mergedOptions:p,axesThemes:g,seriesThemes:f,theme:m}=function(e,t,i){let{theme:s,cleanedTheme:n,axesThemes:r,seriesThemes:a,userPalette:o}=function(e){var t;let i=function e(t){var i;let s;let n=void 0===t||"string"==typeof t||t instanceof ll?t:"object"==typeof t?function(e){if(null===e)return;let t=!0,{baseTheme:i,palette:s,overrides:n}=e;if(void 0!==i&&"string"!=typeof i&&"object"!=typeof i&&(T.warn(`invalid theme.baseTheme type ${typeof i}, expected (string | object).`),t=!1),void 0!==n&&"object"!=typeof n&&(T.warn(`invalid theme.overrides type ${typeof n}, expected object.`),t=!1),"object"==typeof s){if(null!==s){let{fills:e,strokes:i}=s;Array.isArray(e)||(T.warn("theme.overrides.fills must be a defined array"),t=!1),Array.isArray(i)||(T.warn("theme.overrides.strokes must be a defined array"),t=!1)}}else void 0!==s&&(T.warn(`invalid theme.palette type ${typeof s}, expected object.`),t=!1);if(t)return e}(t):void T.warn(`invalid theme value type ${typeof t}, expected object.`);if(n instanceof ll)return n;if(void 0===n||"string"==typeof n){let e=lU[n];return e?e():(T.warnOnce(`the theme [${n}] is invalid, using [ag-default] instead.`),lX())}let r=[];for(;"object"==typeof n;)r.push(null!==(i=n.overrides)&&void 0!==i?i:{}),n.palette&&null==s&&(s=n.palette),n=n.baseTheme;r.reverse();let a=Object.assign({baseTheme:n,overrides:X(r)},s?{palette:s}:{});return new(a.baseTheme?e(a.baseTheme):lX()).constructor(a)}(e.theme),s=i.config[a_(e)],n=Object.entries(i.config).reduce((e,[t,{series:i}])=>(e[t]=i,e),{}),r=e.theme,a="object"==typeof r&&r.palette?r.palette:null;return{theme:i,axesThemes:null!==(t=null==s?void 0:s.axes)&&void 0!==t?t:{},seriesThemes:n,cleanedTheme:X([null!=s?s:{},{axes:V,series:V}]),userPalette:a}}(t),l={colourIndex:0,palette:s.palette,userPalette:o,theme:s},h=X([e=s.templateTheme(e),n,t,i],lq);return S.isEnterprise||function(e){var t,i,s,n,r;let a=[],o=null!==(r=aL[a_(e)])&&void 0!==r?r:"unknown";for(let{type:r,chartTypes:l,optionsKey:h,optionsInnerKey:d,identifier:u}of ah)if("unknown"===o||l.includes(o)){if("root"===r||"legend"===r){let t=e[h];if(null==t)continue;d?t[d]&&(a.push(`${h}.${d}`),delete t[d]):(a.push(h),delete e[h])}else if("axis"===r){if(!("axes"in e)||!(null===(t=e.axes)||void 0===t?void 0:t.some(e=>e.type===u)))continue;a.push(`axis[type=${u}]`),e.axes=e.axes.filter(e=>e.type!==u)}else if("axis-option"===r){if(!("axes"in e)||!(null===(i=e.axes)||void 0===i?void 0:i.some(e=>e[h])))continue;a.push(`axis.${h}`),e.axes.forEach(e=>{e[h]&&delete e[h]})}else if("series"===r){if(!(null===(s=e.series)||void 0===s?void 0:s.some(e=>e.type===u)))continue;a.push(`series[type=${u}]`),e.series=e.series.filter(e=>e.type!==u)}else if("series-option"===r){if(!(null===(n=e.series)||void 0===n?void 0:n.some(e=>e[h])))continue;a.push(`series.${h}`),e.series.forEach(e=>{e[h]&&delete e[h]})}}a.length>0&&T.warnOnce(["unable to use these enterprise features as 'ag-charts-enterprise' has not been loaded:","",...a,"","See: https://charts.ag-grid.com/javascript/installation/"].join("\n"))}(h),{context:l,mergedOptions:h,axesThemes:r,seriesThemes:a,theme:s}}(d,e,u);p.series=(function(e,t){var i;let s=[],n=function(e){var t,i,s,n;let r={},a={},o={},l=[];for(let h of e){let e=null!==(t=h.type)&&void 0!==t?t:"line",d=o6.has(e),u=o8.has(e);if(!d&&!u){l.push({type:"ungrouped",opts:[h]});continue}let{stacked:c,stackGroup:p,grouped:g,xKey:f}=h,m=null!=p||!0===c;null!==(i=o[e])&&void 0!==i||(o[e]=!1),o[e]||(o[e]=m&&d);let y=!0===g,v=[null!=p?p:!0===c?"stacked":void 0,y?"grouped":void 0].filter(e=>null!=e).join("-");v||(v="default-ag-charts-group");let b=`${e}-${f}-${v}`;if(m&&d){let e=null!==(s=a[b])&&void 0!==s?s:a[b]={type:"stack",opts:[]};0===e.opts.length&&l.push(e),e.opts.push(h)}else if(y&&u){let e=null!==(n=r[b])&&void 0!==n?n:r[b]={type:"group",opts:[]};0===e.opts.length&&l.push(e),e.opts.push(h)}else l.push({type:"ungrouped",opts:[h]})}return Object.values(o).some(e=>e),l}(t.map(e=>{var t;let i=null!==(t=e.type)&&void 0!==t?t:"line",s=o8.has(i),n=o6.has(i),r=o9.has(i);if(e.grouped&&!s&&T.warnOnce(`unsupported grouping of series type: ${i}`),e.stacked&&!n&&T.warnOnce(`unsupported stacking of series type: ${i}`),!s&&!n)return e;let a=!1,o=!1;return void 0===e.stacked&&void 0===e.grouped?(a=n&&r,o=s&&!a):void 0===e.stacked?(a=n&&r&&!(e.grouped&&s),o=s&&!a&&!!e.grouped):void 0===e.grouped?(a=n&&e.stacked,o=s&&!a):(a=n&&e.stacked,o=s&&!a&&e.grouped),Object.assign(Object.assign({},e),{stacked:a,grouped:o})})),r=n.reduce((e,t)=>{var i,s;if("ungrouped"===t.type)return e;let n=null!==(i=t.opts[0].type)&&void 0!==i?i:"line";return null!==(s=e[n])&&void 0!==s||(e[n]=0),e[n]+="stack"===t.type?1:t.opts.length,e},{}),a={},o=e=>{var t,i;let s=0,n=null!==(t=e.opts[0].type)&&void 0!==t?t:"line";if(null!==(i=a[n])&&void 0!==i||(a[n]=0),"stack"===e.type){for(let t of e.opts)t.seriesGrouping={groupIndex:a[n],groupCount:r[n],stackIndex:s++,stackCount:e.opts.length};a[n]++}else if("group"===e.type)for(let t of e.opts)t.seriesGrouping={groupIndex:a[n],groupCount:r[n],stackIndex:0,stackCount:0},a[n]++;else for(let t of e.opts)t.seriesGrouping=void 0;return e.opts};for(let e of(B.create(!0,"opts")("processSeriesOptions() - series grouping: ",n),n)){let t=null!==(i=e.opts[0].type)&&void 0!==i?i:"line";o8.has(t)||o6.has(t)?s.push(...o(e)):s.push(...e.opts)}return s})(0,(null!==(s=p.series)&&void 0!==s?s:[]).map(e=>{var t,i;let s=null!==(t=e.type)&&void 0!==t?t:h,n=function(e,t,i,s){var n,r;let a=X([Object.assign({},s),null===(n=e.tooltip)||void 0===n?void 0:n.position],lq);return X([null!==(r=i[t])&&void 0!==r?r:{},Object.assign(Object.assign({},e),{type:t,tooltip:Object.assign(Object.assign({},e.tooltip),{position:a})})],lq)}(e,s,f,o);return"pie"===s&&(i=f.pie,Array.isArray(e.innerLabels)?n.innerLabels=e.innerLabels.map(e=>X([i.innerLabels,e])):n.innerLabels=V),n})).map(e=>(function(e,t,...i){return X([...i,function(e,t){let i=o3[t.type];if(!i)return{};let{palette:{fills:s,strokes:n},userPalette:r,theme:a}=e,o=Math.max(s.length,n.length);return i({userPalette:r,themeTemplateParameters:a.getTemplateParameters(),colorsCount:o,takeColors:t=>{let i={fills:lK(e,s,t),strokes:lK(e,n,t)};return e.colourIndex+=t,i}})}(e,t),t,{stacked:V,grouped:V}],lq)})(c,e)).map(e=>m.templateTheme(e));let y=e=>{let t=null!=e&&ao.has(e);return t||T.warnOnce(`unknown axis type: ${e}; expected one of: ${ao.axesTypes}, ignoring.`),t};if("axes"in p){let t=!0;for(let{type:e}of null!==(n=p.axes)&&void 0!==n?n:[])t&&(t=y(e));let i=t?p.axes:d.axes;p.axes=null==i?void 0:i.map(e=>{var i,s,n,r,a;let o;let l=e.type;t&&(o=null===(i=d.axes)||void 0===i?void 0:i.find(({type:e})=>e===l));let h=X([null!==(s=g[l])&&void 0!==s?s:{},null!==(a=null===(n=g[l])||void 0===n?void 0:n[null!==(r=e.position)&&void 0!==r?r:"unknown"])&&void 0!==a?a:{},o]);return function(e,t){if(e.crossLines){Array.isArray(e.crossLines)||(T.warn("axis[].crossLines should be an array."),e.crossLines=[]);let{crossLines:i}=t;e.crossLines=e.crossLines.map(e=>X([i,e]))}return X([t,{crossLines:V},e,{top:V,bottom:V,left:V,right:V}],lq)}(e,h)}),function(e,t){var i,s,n,r;if((null===(i=e.legend)||void 0===i?void 0:i.enabled)===void 0&&(null===(s=t.legend)||void 0===s?void 0:s.enabled)===void 0){if(null!==(n=t.legend)&&void 0!==n||(t.legend={}),(null!==(r=e.series)&&void 0!==r?r:[]).length>1){t.legend.enabled=!0;return}t.legend.enabled=!1}}(e,p)}return U(e,(e,t,i)=>{if(!i)return;let{_enabledFromTheme:s}=i;null!=s&&delete i._enabledFromTheme,"enabled"in i&&(s||null!=t.enabled||(i.enabled=!0))},{skip:["data","theme"]},p),U(p,(e,t)=>{null!=t._enabledFromTheme&&delete t._enabledFromTheme},{skip:["data","theme"]}),p}(o),h=null==t?void 0:t.chart;(null==h||lQ(o)!==lQ(h.processedOptions))&&(h=l1.createChartInstance(l,{overrideDevicePixelRatio:n,document:r,window:a},h)),null==t?t=new r7(h):t.chart=h,B.check()&&"undefined"!=typeof window&&(null!==(i=(s=window).agChartInstances)&&void 0!==i||(s.agChartInstances={}),window.agChartInstances[h.id]=h);let d=h;d.queuedUserOptions.push(o);let u=()=>{let e=d.queuedUserOptions.indexOf(o);d.queuedUserOptions.splice(0,e)};return d.requestFactoryUpdate(()=>x(this,void 0,void 0,function*(){if(d.destroyed)return;let e=Y(d.processedOptions,l);if(null==e){u();return}yield l1.updateDelta(d,e,o),u()})),t}static updateUserDelta(e,t){var i;let{chart:s,chart:{queuedUserOptions:n}}=e,r=null!==(i=n[n.length-1])&&void 0!==i?i:s.userOptions,a=X([r,t]);lJ(">>> AgChartV2.updateUserDelta() user delta",t),lJ("AgChartV2.updateUserDelta() - base options",r),l1.createOrUpdate(a,e)}static download(e,t){x(this,void 0,void 0,function*(){let i=yield l1.prepareResizedChart(e,t),{chart:s}=i;s.scene.download(null==t?void 0:t.fileName,null==t?void 0:t.fileFormat),i!==e&&i.destroy()}).catch(e=>T.errorOnce(e))}static getImageDataURL(e,t){return x(this,void 0,void 0,function*(){let i=yield l1.prepareResizedChart(e,t),{chart:s}=i,n=s.scene.canvas.getDataURL(null==t?void 0:t.fileFormat);return i!==e&&i.destroy(),n})}static prepareResizedChart(e,t){var i;return x(this,void 0,void 0,function*(){let{chart:s}=e,{width:n,height:r}=null!=t?t:{},a=s.width,o=s.height;if(void 0===n&&void 0===r||1===s.scene.canvas.pixelRatio&&a===n&&o===r)return e;null!=n||(n=a),null!=r||(r=o);let l=Object.assign(Object.assign({},s.userOptions),{container:document.createElement("div"),width:n,height:r,autoSize:!1,overrideDevicePixelRatio:1});O()&&(null!==(i=l.animation)&&void 0!==i||(l.animation={}),l.animation.enabled=!1);let h=l1.createOrUpdate(l);return yield h.chart.waitForUpdate(),h})}static createChartInstance(e,t,i){let s=null==i?void 0:i.destroy({keepTransferableResources:!0});if(aP(e))return new r9(t,s);if(aB(e))return new ls(t,s);if(aF(e))return new lZ(t,s);throw Error("AG Charts - couldn't apply configuration, check options are correctly structured and series types are specified")}static updateDelta(e,t,i){var s;return x(this,void 0,void 0,function*(){null==t.type&&(t=Object.assign(Object.assign({},t),{type:null!==(s=e.processedOptions.type)&&void 0!==s?s:a_(t)})),e.destroyed||(lJ("AgChartV2.updateDelta() - applying delta",t),function(e,t,i){var s,n,r,a;let o=X([null!==(s=e.processedOptions)&&void 0!==s?s:{},t],lq),l=function(e,t){let i=t=>e instanceof r9&&t.chartTypes.includes("cartesian")||e instanceof lZ&&t.chartTypes.includes("polar")||e instanceof ls&&t.chartTypes.includes("hierarchy"),s=!1,n=(n,r,a)=>{for(let o of D.filter(e=>e.type===n)){let n=i(o)&&null!=t[o.optionsKey];n!==e.isModuleEnabled(o)&&(s=!0,n?r(o):a(o))}};return n("root",t=>e.addModule(t),t=>e.removeModule(t)),n("legend",t=>e.addLegendModule(t),t=>e.removeLegendModule(t)),s}(e,o),h=["type","data","series","listeners","theme","legend.listeners"];if(aP(t)||aF(t))h.push("axes");else if(aB(t));else throw Error(`AG Charts - couldn't apply configuration, check type of options and chart: ${t.type}`);t.listeners&&l2(e,t.listeners),l5(e,t,{skip:h});let d=!1,u=!1;t.series&&t.series.length>0&&(u=function(e,t){let i=t.series;if(!i)return!1;let s=["type","direction","xKey","yKey","sizeKey","angleKey","stacked","stackGroup"],n=e.series.length===i.length;for(let t=0;t<e.series.length&&n;t++)for(let r of s)n&&(n=e.series[t][r]===i[t][r]);return n?(e.series.forEach((t,s)=>{var n,r,a,o;let l=Y(null!==(a=null===(r=null===(n=e.processedOptions)||void 0===n?void 0:n.series)||void 0===r?void 0:r[s])&&void 0!==a?a:{},null!==(o=i[s])&&void 0!==o?o:{});l&&(lJ(`AgChartV2.applySeries() - applying series diff idx ${s}`,l),l3(t,l,{path:`series[${s}]`,index:s}),t.markNodeDataDirty())}),!1):(lJ("AgChartV2.applySeries() - creating new series instances"),e.series=function(e,t){var i;let s=[],n=e.getModuleContext(),r=0;for(let e of null!=t?t:[]){let t=`series[${r++}]`,a=null!==(i=e.type)&&void 0!==i?i:"unknown";if(ad(a)&&!function(e){var t,i;return(null!==(i=null===(t=ah.find(t=>"series"===t.type&&t.identifier===e))||void 0===t?void 0:t.useCount)&&void 0!==i?i:0)>0}(a))continue;let o=function(e,t){let i=o0[e];if(i)return new i(t);throw Error(`AG Charts - unknown series type: ${e}`)}(a,n);(function(e,t){for(let i of D.filter(e=>"series-option"===e.type)){let s=i.seriesTypes;i.optionsKey in t&&s.includes(e.type)&&e.getModuleMap().addModule(i)}})(o,e),l3(o,e,{path:t,index:r}),s.push(o)}return s}(e,i),!0)}(e,t),d=!0),"axes"in o&&Array.isArray(o.axes)&&function(e,t,i){let s=t.axes;if(!s)return!1;if(!i&&e.axes.length===s.length&&e.axes.every((e,t)=>e.type===s[t].type)){let t=e.processedOptions;if(aP(t))return e.axes.forEach((e,i)=>{var n,r;let a=Y(null!==(r=null===(n=t.axes)||void 0===n?void 0:n[i])&&void 0!==r?r:{},s[i]);lJ(`AgChartV2.applyAxes() - applying axis diff idx ${i}`,a),l5(e,a,{path:`axes[${i}]`,skip:["axes[].type"]})}),!0}return e.axes=function(e,t){let i=[],s=["axes[].type"],n=e.getModuleContext(),r=0;for(let e of null!=t?t:[]){let t=function(e,t){let i=aa[e];if(i)return new i(t);throw Error(`AG Charts - unknown axis type: ${e}`)}(e.type,n),a=`axes[${r++}]`;(function(e,t){for(let i of D.filter(e=>"axis-option"===e.type)){let s=null!=t[i.optionsKey],n=e.getModuleMap();s!==n.isModuleEnabled(i)&&(s?n.addModule(i):n.removeModule(i))}})(t,e),l5(t,e,{path:a,skip:s}),i.push(t)}return i}(e,s),!0}(e,o,u)&&(d=!0);let c=t.series,p=!!t.data||(null==c?void 0:c.some(e=>null!=e.data)),g=Object.values(ac).some(e=>null!=t[e]),f=null!=t.title&&null!=t.subtitle;d=d||p||g||f,t.data&&(e.data=t.data),(null===(n=t.legend)||void 0===n?void 0:n.listeners)&&Object.assign(e.legend.listeners,null!==(r=t.legend.listeners)&&void 0!==r?r:{}),t.listeners&&e.updateAllSeriesListeners(),e.processedOptions=o,e.userOptions=X([null!==(a=e.userOptions)&&void 0!==a?a:{},i],lq);let m=d||l?tQ.PROCESS_DATA:tQ.PERFORM_LAYOUT;lJ("AgChartV2.applyChartOptions() - update type",tQ[m]),e.update(m,{forceNodeDataRefresh:d,newAnimationBatch:!0})}(e,t,i))})}}function l2(e,t){for(let[i,s]of(e.clearEventListeners(),Object.entries(null!=t?t:{})))"function"==typeof s&&e.addEventListener(i,s)}function l5(e,t,{skip:i,path:s}={}){return H(e,t,Object.assign(Object.assign(Object.assign({},nl()),{skip:i}),s?{path:s}:{}))}function l3(e,t,{path:i,index:s}={}){var n,r;let a=["series[].listeners","series[].seriesGrouping"],o=nl(),l=null!==(n=o.constructors)&&void 0!==n?n:{},h={constructors:Object.assign(Object.assign({},l),{title:"pie"===e.type?ni:l.title})},d=H(e,t,Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},o),h),{skip:["series[].type",...null!=a?a:[]]}),i?{path:i}:{}),{idx:null!=s?s:-1}));(null==t?void 0:t.listeners)!=null&&l2(e,t.listeners);let{seriesGrouping:u}=t;return"seriesGrouping"in(null!=t?t:{})&&(u?e.seriesGrouping=Object.freeze(Object.assign(Object.assign({},null!==(r=e.seriesGrouping)&&void 0!==r?r:{}),u)):e.seriesGrouping=u),d}l1.initialised=!1,Object.entries(lU).reduce((e,[t,i])=>(e[t]=i(),e),{})}}]);